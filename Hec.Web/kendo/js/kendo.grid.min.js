/**
 * Kendo UI v2025.2.702 (http://www.telerik.com/kendo-ui)
 * Copyright 2025 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("kendo.data.js"),require("kendo.columnsorter.js"),require("kendo.editable.js"),require("kendo.window.js"),require("kendo.badge.js"),require("kendo.filtermenu.js"),require("kendo.filtercell.js"),require("kendo.columnmenu.js"),require("kendo.groupable.js"),require("kendo.pager.js"),require("kendo.selectable.js"),require("kendo.sortable.js"),require("kendo.reorderable.js"),require("kendo.resizable.js"),require("kendo.ooxml.js"),require("kendo.excel.js"),require("kendo.pane.js"),require("kendo.pdf.js"),require("kendo.dialog.js"),require("kendo.switch.js"),require("kendo.html.button.js"),require("kendo.textbox.js"),require("kendo.form.js"),require("kendo.toolbar.js"),require("kendo.icons.js"),require("kendo.menu.js"),require("kendo.loader.js"),require("kendo.html.loadercontainer.js"),require("kendo.loaderContainer.chunk.js")):"function"==typeof define&&define.amd?define(["exports","kendo.data.min","kendo.columnsorter.min","kendo.editable.min","kendo.window.min","kendo.badge.min","kendo.filtermenu.min","kendo.filtercell.min","kendo.columnmenu.min","kendo.groupable.min","kendo.pager.min","kendo.selectable.min","kendo.sortable.min","kendo.reorderable.min","kendo.resizable.min","kendo.ooxml.min","kendo.excel.min","kendo.pane.min","kendo.pdf.min","kendo.dialog.min","kendo.switch.min","kendo.html.button.min","kendo.textbox.min","kendo.form.min","kendo.toolbar.min","kendo.icons.min","kendo.menu.min","kendo.loader.min","kendo.html.loadercontainer.min","kendo.loaderContainer.chunk.min"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).kendo=e.kendo||{},e.kendo._globals=e.kendo._globals||{},e.kendo._globals.Grid={}),e.kendo._globals.Data,e.kendo._globals.Columnsorter,e.kendo._globals.Editable,e.kendo._globals.Window,e.kendo._globals.Badge,e.kendo._globals.Filtermenu,e.kendo._globals.Filtercell,e.kendo._globals.Columnmenu,e.kendo._globals.Groupable,e.kendo._globals.Pager,e.kendo._globals.Selectable,e.kendo._globals.Sortable,e.kendo._globals.Reorderable,e.kendo._globals.Resizable,e.kendo._globals.Ooxml,e.kendo._globals.Excel,e.kendo._globals.Pane,e.kendo._globals.Pdf,e.kendo._globals.Dialog,e.kendo._globals.Switch,e.kendo._globals.HtmlButton,e.kendo._globals.Textbox,e.kendo._globals.Form,e.kendo._globals.Toolbar,e.kendo._globals.Icons,e.kendo._globals.Menu,e.kendo._globals.Loader,e.kendo._globals.HtmlLoadercontainer,e.kendo._globals.LoaderContainerChunk)}(this,(function(e,t,o,r,l,n,i,a,s,d,c,u,p,h,g,f,m,b,_,k,v,C,w,y,S,x,T,H,R,I){!function(e){var t=window.kendo,o=t.ui.ContextMenu,r=e.extend,l=t.htmlEncode,n="action",i=o.extend({init:function(e,t){var r=this;o.fn.init.call(r,e,t),r._overrideTemplates(),r._extendItems(),r.bind("select",r._onSelect.bind(r)),r.bind("open",r._onOpen.bind(r))},_overrideTemplates:function(){this.templates.sprite=({icon:e,spriteCssClass:o})=>`${e||o?t.ui.icon({icon:l(e||""),iconClass:l(o||"")}):""}`},defaultItems:{separator:{name:"separator",separator:!0},create:{name:"create",text:"Add",icon:"plus",command:"AddCommand",rules:"isEditable"},edit:{name:"edit",text:"Edit",icon:"pencil",command:"EditCommand",rules:"isEditable"},destroy:{name:"destroy",text:"Delete",icon:"trash",command:"DeleteCommand",rules:"isEditable"},select:{name:"select",text:"Select",icon:"table-body",rules:"isSelectable",items:[{name:"selectRow",text:"Row",icon:"table-row-groups",command:"SelectRowCommand"},{name:"selectAllRows",text:"All rows",icon:"grid",command:"SelectAllRowsCommand"},{name:"clearSelection",text:"Clear selection",icon:"table-unmerge",softRules:"hasSelection",command:"ClearSelectionCommand"}]},copySelection:{name:"copySelection",text:"Copy selection",icon:"page-header-section",rules:"isSelectable",softRules:"hasSelection",command:"CopySelectionCommand",options:"withHeaders"},copySelectionNoHeaders:{name:"copySelectionNoHeaders",text:"Copy selection (No Headers)",icon:"file-txt",rules:"isSelectable",softRules:"hasSelection",command:"CopySelectionCommand"},paste:{name:"paste",text:"Paste (use CTRL/⌘ + V)",rules:"allowPaste",softRules:"alwaysDisabled",icon:"clipboard"},reorderRow:{name:"reorderRow",text:"Reorder row",icon:"caret-alt-expand",rules:"isRowReorderable",softRules:"isSorted",items:[{name:"reorderRowUp",text:"Up",icon:"caret-alt-up",command:"ReorderRowCommand",options:"dir:up"},{name:"reorderRowDown",text:"Down",icon:"caret-alt-down",command:"ReorderRowCommand",options:"dir:down"},{name:"reorderRowTop",text:"Top",icon:"caret-alt-to-top",command:"ReorderRowCommand",options:"dir:top"},{name:"reorderRowBottom",text:"Bottom",icon:"caret-alt-to-bottom",command:"ReorderRowCommand",options:"dir:bottom"}]},exportPDF:{name:"exportPDF",text:"Export to PDF",icon:"file-pdf",command:"ExportPDFCommand"},exportExcel:{name:"exportExcel",text:"Export to Excel",icon:"file-excel",items:[{name:"exportToExcelAll",text:"All",command:"ExportExcelCommand"},{name:"exportToExcelSelection",text:"Selection",command:"ExportExcelCommand",softRules:"hasSelection",options:"selection,withHeaders"},{name:"exportToExcelSelectionNoHeaders",text:"Selection (No Headers)",softRules:"hasSelection",command:"ExportExcelCommand",options:"selection"}]},sortAsc:{name:"sortAsc",text:"Sort Ascending",icon:"sort-asc-small",rules:"isSortable",command:"SortCommand",options:"dir:asc"},sortDesc:{name:"sortDesc",text:"Sort Descending",icon:"sort-desc-small",rules:"isSortable",command:"SortCommand",options:"dir:desc"},moveGroupPrevious:{name:"moveGroupPrevious",text:"Move previous",icon:"arrow-left",rules:"isGroupable",softRules:"canMoveGroupPrev",command:"MoveGroupCommand",options:"dir:prev"},moveGroupNext:{name:"moveGroupNext",text:"Move next",icon:"arrow-right",rules:"isGroupable",softRules:"canMoveGroupNext",command:"MoveGroupCommand",options:"dir:next"}},events:o.fn.events.concat([n]),_onSelect:function(t){var o=e(t.item).data("command"),r=e(t.item).data("options");r=r?r.split(",").map((e=>{if(e.indexOf(":")>-1){var[t,e]=e.split(":");return{[t||"_"]:e}}return{[e]:!0}})).reduce(((e,t)=>Object.assign(e,t)),{}):{};var l=e(t.target);o&&this.action({command:o,options:Object.assign(r,{target:l})})},_onOpen:function(o){var r=o.sender,l=r.options.items,n=e(o.event?o.event.target:null);!l&&e.isEmptyObject(this.defaultItems)||n.closest(".k-grid-column-menu").length?o.preventDefault():(this._toggleSeparatorVisibility(),r.element.find(`[${t.attr("soft-rules")}]`).each(((o,l)=>{var i=e(l).attr(t.attr("soft-rules")).split(";");r.enable(l,this._validateSoftRules(i,n))})))},_toggleSeparatorVisibility:function(){this.element.find(".k-item.k-separator").filter(((t,o)=>{var r=e(o).prev(".k-item:not(.k-separator)"),l=e(o).next(".k-item:not(.k-separator)");return!(r.length&&l.length)})).hide()},_extendItems:function(){var t,o=this,r=o.options.items;if(r&&r.length)for(var l=0;l<r.length;l++)t=r[l],e.isPlainObject(t)&&1===Object.keys(t).length&&t.name&&(t=t.name),e.isPlainObject(t)?o._append(t):o.defaultItems[t]?(t=o.defaultItems[t],o._append(t)):"string"==typeof t&&(t={name:t,text:t,spriteCssClass:t,command:t+"Command"},o._append(t));else for(var n in o.defaultItems)t=o.defaultItems[n],o._append(t)},_extendItem:function(e){var o=this,l=o.options.messages,n=e.attr||{};if(e.command&&(n[t.attr("command")]=e.command),e.options&&(n[t.attr("options")]=e.options),e.softRules&&(n[t.attr("soft-rules")]=e.softRules),e.items)for(var i=0;i<e.items.length;i++)e.items.forEach((e=>{o._extendItem(e)}));r(e,{text:l.commands[e.name],icon:e.icon||"",spriteCssClass:e.spriteCssClass||"",attr:n,uid:t.guid()})},_validateSoftRules:function(e,t){if(!e||!e||!e.length)return!0;for(var o=0;o<e.length;o++)if(!this._readState(e[o],t))return!1;return!0},_validateRules:function(e){var t=e.rules?e.rules.split(";"):[];if(!t.length)return!0;for(var o=0;o<t.length;o++)if(!this._readState(t[o]))return!1;return!0},_readState:function(e,o){var r=this.options.states;return t.isFunction(r[e])?r[e](o):r[e]},_append:function(e){var t=this;t._extendItem(e),t._validateRules(e)&&t.append(e)},action:function(e){this.trigger(n,e)}});t.ui.grid=t.ui.grid||{},r(t.ui.grid,{ContextMenu:i})}(window.kendo.jQuery),function(e){var t=window.kendo,o=e.extend,r=t.Class.extend({init:function(e){this.options=e,this.grid=e.grid}}),l=r.extend({exec:function(){var e=this.grid.groupable,t=this.options,o=t.target.closest(".k-chip"),r="next"===t.dir?"after":"before";("next"===t.dir?o.next():o.prev())[r](o),e._change()}}),n=r.extend({exec:function(){var e,t,o=this.grid,r=o.dataSource,l=r.sort()||[],n=this.options,i=n.dir,a=o._getCellField(n.target),s=o.options.sortable.mode&&"multiple"===o.options.sortable.mode,d=o.options.compare;if(s){for(t=0,e=l.length;t<e;t++)if(l[t].field===a){l.splice(t,1);break}l.push({field:a,dir:i,compare:d})}else l=[{field:a,dir:i,compare:d}];r.sort(l)}}),i=r.extend({exec:function(){this.grid.addRow()}}),a=r.extend({exec:function(){var e=this,t=e.grid,o="incell"===t._editMode(),r=o?e.options.target:e.options.target.closest("tr");o?t.editCell(r):t.editRow(r)}}),s=r.extend({exec:function(){var e=this.grid,t=this.options.target.closest("tr");e.removeRow(t)}}),d=r.extend({exec:function(){var e=this.grid,t=this.options.withHeaders;e.copySelectionToClipboard(t)}}),c=r.extend({exec:function(){var e=this.grid,o=t.ui.Selectable.parseOptions(e.options.selectable),r=this.options.target.closest("tr");e.select(o.cell?r.find("td"):r)}}),u=r.extend({exec:function(){var e=this.grid,o=t.ui.Selectable.parseOptions(e.options.selectable),r=e.items();e.select(o.cell?r.find("td"):r)}}),p=r.extend({exec:function(){this.grid.clearSelection()}}),h=r.extend({exec:function(){var e,t=this,o=t.grid,r=t.options.dir,l=t.options.target.closest("tr"),n=l.index();switch(r){case"up":e=n-1;break;case"down":e=n+2;break;case"top":e=0;break;case"bottom":e=o.items().length}o.reorderRowTo(l,e)}}),g=r.extend({exec:function(){this.grid.saveAsPDF()}}),f=r.extend({exec:function(){var e=this,t=e.options.selection,o=e.options.withHeaders,r=e.grid;t?r.exportSelectedToExcel(o):r.saveAsExcel()}});t.ui.grid=t.ui.grid||{},o(t.ui.grid,{GridCommand:r,commands:{SortCommand:n,AddCommand:i,EditCommand:a,DeleteCommand:s,CopySelectionCommand:d,SelectRowCommand:c,SelectAllRowsCommand:u,ClearSelectionCommand:p,ReorderRowCommand:h,ExportPDFCommand:g,ExportExcelCommand:f,MoveGroupCommand:l}})}(window.kendo.jQuery);!function(e,t){let o=window.kendo,r=o.ui,l=o.data.DataSource,n=o.data.ObservableObject,i=o.support.tbodyInnerHtml,a=o._activeElement,s=r.Widget,d=o._outerWidth,c=o._outerHeight,u=o.keys,p=o.type,h=e.isPlainObject,g=e.extend,f=e.map,m=e.grep,b=Array.isArray,_=e.inArray,k=Array.prototype.push,v=o.isFunction,C=o.htmlEncode,w=e.isEmptyObject,y=e.contains,S=Math,x=".",T="progress",H="error",R=":not(.k-group-cell):not(["+o.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible",E=":not(["+o.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left)))",A="tr:not(.k-footer-template):visible",M=":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible",F="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",z="col:not(.k-group-col, .k-hierarchy-col)",D="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",L="a[class*='-i-caret-alt-down']",B="a[class*='-i-caret-alt-right']",P=B,V=".kendoGrid",q="edit",O="beforeEdit",G="save",W="remove",N="detailInit",$="filterMenuInit",j="columnMenuInit",U="filterMenuOpen",K="columnMenuOpen",Q="cellClose",Y="changing",J="change",X="columnHide",Z="columnShow",ee="saveChanges",te="dataBound",oe="detailExpand",re="detailCollapse",le="itemchange",ne="page",ie="paging",ae="paste",se="scroll",de="sync",ce="loadStart",ue="loadEnd",pe="requestEnd",he="k-focus",ge="k-hover",fe="k-active",me=":kendoFocusable",be=".k-command-cell,.k-select-checkbox",_e="k-selected",ke="k-checkbox",ve="input[data-role='checkbox'].k-select-checkbox."+ke,Ce="k-grid-norecords",we="k-link",ye="k-icon",Se="k-svg-icon",xe="k-sort-order",Te="k-sorted",He="k-header",Re="k-grid-column-menu",Ie="k-grid-filter-menu",Ee="k-grid-content-sticky",Ae="k-grid-header-sticky",Me="k-grid-footer-sticky",Fe="k-grid-no-left-border",ze="k-grouping-row",De="resize",Le="rowResize",Be="columnResize",Pe="columnReorder",Ve="columnLock",qe="columnUnlock",Oe="columnStick",Ge="columnUnstick",We="rowReorder",Ne="navigate",$e="click",je="mousedown",Ue="mouseup",Ke="mouseenter",Qe="mouseleave",Ye="mousemove",Je="dblclick",Xe="height",Ze="width",et="auto",tt="tabIndex",ot="function",rt="string",lt="bottom",nt="container-for",it="field",at="input",st="incell",dt="inline",ct="overflow",ut="sort",pt="group-sort",ht="Collapse",gt="Expand",ft="id",mt="px",bt="tr",_t="div",kt="aria-label",vt="aria-owns",Ct="aria-rowcount",wt="aria-colcount",yt="aria-colindex",St="aria-rowindex",xt="aria-expanded",Tt="aria-checked",Ht="aria-activedescendant",Rt="role",It="none",Et="row",At="rowgroup",Mt="columnheader",Ft="gridcell",zt=/(\}|\#)/gi,Dt="[\\x20\\t\\r\\n\\f]",Lt=(new RegExp("(\\s*left\\s*:\\s*\\d*px;?)*","ig"),new RegExp("(\\s*right\\s*:\\s*\\d*px;?)*","ig"),new RegExp("(^|"+Dt+")(k-group-cell|k-hierarchy-cell)("+Dt+"|$)")),Bt=new RegExp("(^|"+Dt+")(k-filter-row)("+Dt+"|$)"),Pt=({className:e,attr:t,text:r})=>`<button type="button" class="${e}" ${t}>${o.htmlEncode(r)}</button>`,Vt=(e,t)=>`<span class="k-checkbox-wrap"><input tabindex="-1" class="k-select-checkbox ${ke} ${e} k-rounded-md" data-role="checkbox" aria-label="${t}" aria-checked="false" type="checkbox"></span>`,qt=({size:e})=>Vt(e,"Select row"),Ot=({size:e})=>Vt(e,"Select all rows"),Gt=()=>o.ui.icon("reorder"),Wt=({text:e})=>`<span class="k-cell-inner"><span class="k-link"><span class="k-column-title">${e}</span></span></span>`,Nt=!1,$t=o.support.browser;var jt,Ut=$t.msie&&11===$t.version,Kt=/Mac OS/.test(navigator.userAgent),Qt="k-content",Yt="k-scroll-container",Jt="k-cell-inner",Xt=["copySelection","copySelectionNoHeaders","paste","separator","create","edit","destroy","select","separator","reorderRow","exportPDF","exportExcel","separator"],Zt=["sortAsc","sortDesc","separator"],eo=["moveGroupPrevious","moveGroupNext","separator"];const to=[".k-grid-edit-command",".k-grid-remove-command",".k-grid-save-changes",".k-grid-cancel-changes",".k-grid-cancel-command",".k-grid-save-command"].join(", "),oo=function(e){return{sort:[{command:"clear-sort",text:e.clearButtons?e.clearButtons.clearSorting:"Clear Sorting",size:"large",fillMode:"solid",themeColor:"base",icon:"x"},{command:"done",text:e.applyButtons?e.applyButtons.applySorting:"Done",size:"large",themeColor:"primary",icon:"check"}],group:[{command:"clear-group",text:e.clearButtons?e.clearButtons.clearGrouping:"Clear Grouping",size:"large",fillMode:"solid",themeColor:"base",icon:"x"},{command:"done",text:e.applyButtons?e.applyButtons.applyGrouping:"Done",size:"large",themeColor:"primary",icon:"check"}],filter:[{command:"clear-filter",text:e.clearButtons?e.clearButtons.clearFiltering:"Clear All Filters",size:"large",fillMode:"solid",themeColor:"base",icon:"filter-clear"}],"column-chooser":[{text:e.clearButtons?e.clearButtons.columnChooserReset:"Reset",icon:"arrow-rotate-ccw"},{text:e.applyButtons?e.applyButtons.columnChooserApply:"Apply",themeColor:"primary",icon:"check"}]}};r.Pager&&(jt=r.Pager.extend({init:function(e,t){r.Pager.fn.init.call(this,e,g(!0,{},t)),this.dataSource.options.useRanges=!0,this.dataSource._omitPrefetch=!0},options:{name:"GroupsPager"},totalPages:function(){return Math.ceil((this._collapsedTotal()||0)/(this.pageSize()||1))},_collapsedTotal:function(){var e=this.dataSource;return e&&e.groupsTotal(!0)||0}}));var ro=s.extend({init:function(e,t){var o=this;s.fn.init.call(o,e,t),o._refreshHandler=o.refresh.bind(o),o.setDataSource(t.dataSource),o.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(J,t._refreshHandler),t.dataSource=e,t.dataSource.bind(J,t._refreshHandler),t.dataSource.options.useRanges=!0,t.dataSource.options.virtual=!0},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0,maxScrollHeight:25e4},events:[ie,ne,se,ce,ue],destroy:function(){var e=this;s.fn.destroy.call(e),e.dataSource.unbind(J,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(V),clearTimeout(e._timeout),e._scrollingTimeout&&clearTimeout(e._scrollingTimeout),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,r=this,l=o.support.scrollbar()+1,n=r.element;n.css({width:et,overflow:"hidden"}).css(Nt?"padding-left":"padding-right",l),r.content=n.children().first(),t=r.wrapper=r.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().on("DOMMouseScroll"+V+" mousewheel"+V,r._wheelScroll.bind(r)),r._wrapper(),(o.support.kineticScrollNeeded||o.support.touch)&&(r.wrapper.css("touch-action",It),r.drag=new o.UserEvents(r.wrapper,{global:!0,allowSelection:!0,start:function(e){e.sender.capture()},move:function(e){r.verticalScrollbar.scrollTop(r.verticalScrollbar.scrollTop()-e.y.delta),o.scrollLeft(t,o.scrollLeft(t)-e.x.delta),e.preventDefault()}})),r.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" tabindex="-1"/>').css({width:l}).appendTo(n).on("scroll"+V,r._scroll.bind(r))},_wrapper:function(){Ut&&(this.wrapper.css({"overflow-y":se}),this.element.css(Nt?"padding-left":"padding-right",0))},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.verticalScrollbar,r=t.scrollTop(),l=o.wheelDeltaY(e);!l||l>0&&0===r||l<0&&r+t[0].clientHeight==t[0].scrollHeight||(e.preventDefault(),this.verticalScrollbar.scrollTop(r+-l))}},_scroll:function(e){var t=this,o=!t.options.prefetch,r=e.currentTarget.scrollTop,l=t.dataSource,n=t.itemHeight,i=l.skip()||0,a=t._rangeStart||i,s=t.element.innerHeight(),d=!!(t._scrollbarTop&&t._scrollbarTop>r),c=S.max(S.floor(r/n),0),u=d?S.ceil(s/n):S.floor(s/n),p=S.max(c+u,0);t._preventScroll?t._preventScroll=!1:(t._prevScrollTop=t._scrollTop,t._scrollTop=r-a*n,t._scrollbarTop=r,t._scrolling=o,t._fetch(c,p,d)||(t.wrapper[0].scrollTop=t._scrollTop),t.trigger(se),o&&(t._scrollingTimeout&&clearTimeout(t._scrollingTimeout),t._scrollingTimeout=setTimeout((function(){t._scrolling=!1,t._page(t._rangeStart,t.dataSource.take())}),100)))},scrollToTop:function(){this._scrollTo(0)},scrollToBottom:function(){var e=this.verticalScrollbar;this._scrollTo(e[0].scrollHeight-e.height())},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0)},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight)},_scrollWrapperOnColumnResize:function(){var e=this,t=this.wrapper,r=t.scrollTop();t[0].scrollWidth>t[0].clientWidth?(!e._wrapperScrolled&&r||e._isScrolledToBottom())&&(t.scrollTop(r+o.support.scrollbar()),e._scrollTop=t.scrollTop(),e._wrapperScrolled=!0):e._wrapperScrolled&&(e._isWrapperScrolledToBottom()||(t.scrollTop(r-o.support.scrollbar()),e._scrollTop=t.scrollTop()),e._wrapperScrolled=!1)},_scrollTo:function(e,t){var o=this,r=o.verticalScrollbar;r.scrollTop()!==e&&(o._preventScroll=!0),o.wrapper.scrollTop(e),o._scrollTop=o.wrapper.scrollTop(),r.scrollTop(t??e),o._scrollbarTop=r.scrollTop()},_isScrolledToTop:function(){return 0===this.verticalScrollbar.scrollTop()},_isScrolledToBottom:function(){var e=this.verticalScrollbar,t=e.scrollTop();return t>0&&t>=parseInt(e[0].scrollHeight-e.height(),10)},_isWrapperScrolledToBottom:function(){var e=this.wrapper;return e.scrollTop()>=parseInt(e[0].scrollHeight-e.height(),10)},itemIndex:function(e){return(this._rangeStart||this.dataSource.skip()||0)+e},position:function(e){var t,o=this._rangeStart||this.dataSource.skip()||0,r=this.dataSource.pageSize();return(t=e>o?e-o:o-e-1)>r?r:t},scrollIntoView:function(e){var t=this.wrapper[0],o=t.clientHeight,r=this._isScrolledToBottom()?t.scrollTop:this._scrollTop||t.scrollTop,l=e[0].offsetTop,n=e[0].offsetHeight;r>l?this.verticalScrollbar[0].scrollTop-=o/2:l+n>=r+o&&(this.verticalScrollbar[0].scrollTop+=o/2)},_fetch:function(t,o,r){var l=this,n=l.dataSource,i=l.itemHeight,a=n.take(),s=l._rangeStart||n.skip()||0,d=S.floor(t/a)*a,c=!1,u=l.verticalScrollbar,p=$t.webkit?1:0,h=n._isGroupPaged()?n.groupsTotal(!0):n.total();return t<s?(c=!0,l._alwaysScrollTop?(s=S.min(t,h-a),l._scrollTop=0):(s=S.max(0,o-a),l._scrollTop=u.scrollTop()-s*i),l._page(s,a)):o>=s+a&&!r?(c=!0,s=S.min(t,h-a),u.scrollTop()>=u[0].scrollHeight-u[0].offsetHeight-p?l._scrollTop=l.wrapper[0].scrollHeight-l.wrapper[0].offsetHeight:l.dataSource._isGroupPaged()&&t>=h-a?l._scrollTop=l.wrapper[0].scrollHeight-l.wrapper[0].offsetHeight-(l._scrollTop-l._prevScrollTop):l._alwaysScrollTop?l._scrollTop=0:l._scrollTop=i,l._page(s,a)):!l._fetching&&l.options.prefetch&&(t<d+a-.33*a&&t>a&&n.prefetch(d-a,a,e.noop),o>d+.33*a&&n.prefetch(d+a,a,e.noop)),c},fetching:function(){return this._fetching},_page:function(t,o,r){var l=this,n=!l.options.prefetch,i=l.dataSource,a=i._isGroupPaged();r=v(r)?r:e.noop,l.trigger(ie,{skip:t,take:o})||(clearTimeout(l._timeout),l._fetching=!0,l._rangeStart=t,a&&i._groupRangeExists(t,t+o)||!a&&i.inRange(t,o)?(l.trigger(ce),i.range(t,o,(function(){l.trigger(ue),r(),l.trigger(ne)}),"page")):(n||l.trigger(ce),l._timeout=setTimeout((function(){l._scrolling||(n&&l.trigger(ce),i.range(t,o,(function(){l.trigger(ue),r(),l.trigger(ne)})))}),100)))},repaintScrollbar:function(t){var r,l,n=this,i=n.options.maxScrollHeight,a=n.dataSource,s=o.support.kineticScrollNeeded?0:o.support.scrollbar(),d=n.wrapper[0],c=n._isScrolledToBottom();l=n.itemHeight=n.options.itemHeight()||0;var u=d.scrollWidth>d.offsetWidth?s:0;r=(a._isGroupPaged()?a.groupsTotal(!0):a.total())*l+u;var p=e(new Array(S.floor(r/i)+1).join("<div></div>")).css({width:"1px",height:`${i}px`});r%i&&(p=p.add(e("<div></div>").css({width:"1px",height:r%i+"px"}))),n.verticalScrollbar.empty().append(p),!c||n._isScrolledToBottom()||n.dataSource._isGroupPaged()||n.scrollToBottom(),void 0!==n._scrollTop&&t&&(d.scrollTop=n._scrollTop,n._scrollWrapperOnColumnResize())},refresh:function(e){var t=this,o=t.dataSource,r=t._rangeStart,l=(e||{}).action,n=t._isScrolledToBottom()||!l||l!==le&&l!==W&&l!==de;t.trigger(ue),clearTimeout(t._timeout),t.repaintScrollbar(n),t.drag&&t.drag.cancel(),void 0===r||t._fetching||((!l||l!==de&&l!==le&&"expandGroup"!==l)&&(t._rangeStart=o.skip()),1!==o.page()||l&&(l===de||l===le||"expandGroup"===l||"collapseGroup"===l)||(t.verticalScrollbar[0].scrollTop=0)),t._programmaticallyScrolling&&"resolved"!==t._programmaticallyScrolling.state()&&t._programmaticallyScrolling.resolve(),t._alwaysScrollTop&&delete t._alwaysScrollTop,t._fetching=!1}});function lo(e,t){return"["+o.attr(e)+"="+t+"]"}function no(e){return new Array(e+1).join('<td class="k-group-cell k-table-group-td k-table-td">&nbsp;</td>')}function io(e){var t,o=" ";if(e){if(typeof e===rt)return e;for(t in e)""!==e[t]&&(o+=t+'="'+e[t]+'"')}return o}var ao={create:{text:"Add",className:"k-grid-add",iconClass:"k-i-plus"},cancel:{text:"Cancel changes",className:"k-grid-cancel-changes",iconClass:"k-i-cancel"},save:{text:"Save changes",className:"k-grid-save-changes",iconClass:"k-i-check"},destroy:{text:"Delete",className:"k-grid-remove-command",iconClass:"k-i-trash"},edit:{text:"Edit",className:"k-grid-edit-command",iconClass:"k-i-pencil"},update:{text:"Save",className:"k-grid-save-command",iconClass:"k-i-save"},canceledit:{text:"Cancel",className:"k-grid-cancel-command",iconClass:"k-i-cancel"},excel:{text:"Export to Excel",className:"k-grid-excel",iconClass:"k-i-file-excel"},pdf:{text:"Export to PDF",className:"k-grid-pdf",iconClass:"k-i-file-pdf"},search:{text:"Search...",className:"k-grid-search"},columns:{text:"Columns",type:"button",icon:"columns",fillMode:"flat",overflow:"never",className:"k-grid-column-menu",attr:{"aria-haspopup":"menu"}},columnchooser:{text:"Columns",type:"button",icon:"columns",overflow:"never",className:"k-grid-column-chooser",attr:{"aria-haspopup":"menu"}},sort:{text:"Sort",type:"button",icon:"arrows-swap",overflow:"never",className:"k-grid-sort-tool",attr:{"aria-haspopup":"menu"},clearButton:!0},filter:{text:"Filter",type:"button",icon:"filter",overflow:"never",className:"k-grid-filter-tool",attr:{"aria-haspopup":"menu"},clearButton:!0},group:{text:"Group",type:"button",icon:"group",overflow:"never",className:"k-grid-group-tool",attr:{"aria-haspopup":"menu"},clearButton:!0}};function so(t,o){e("th, th .k-grid-filter-menu, th .k-link",t).add(document.body).css("cursor",o)}function co(t,o,r,l,n){var i=o;o=e(),n=n||1;for(var a=0;a<n;a++)o=o.add(t.eq(i+a));"number"==typeof r?o[l?"insertBefore":"insertAfter"](t.eq(r)):o.appendTo(r)}function uo(t,o,r){return e(t).add(o).find(r)}function po(e,t,o){var r,l,n,i;for(r=0,l=(o=b(o)?o:[o]).length;r<l;r++)n=o[r],h(n)&&n.click&&(i=n.name||n.text,t.on($e+V,".k-grid-"+(i||"").replace(/\s/g,""),{commandName:i},n.click.bind(e)))}function ho(e,r,l,n,i){return f(e,(function(e){var a;(e=typeof e===rt?{field:e}:e).parentIds=i,e.attributes instanceof Function&&(e._attributesFunction=e.attributes),!wo(e)||l?(e.attributes=cr(e.attributes),e.footerAttributes=cr(e.footerAttributes),e.headerAttributes=cr(e.headerAttributes),a=!0):!wo(e)&&l||(e.attributes=ur(e.attributes),e.footerAttributes=ur(e.footerAttributes),e.headerAttributes=ur(e.headerAttributes),a=t);var s=o.guid();return n&&!e.locked&&(e.locked=n),e.headerAttributes=g({headers:i},e.headerAttributes),e.headerAttributes.id?e.uid=s=e.headerAttributes.id:(e.headerAttributes=g({id:s},e.headerAttributes),e.uid=s),e.columns&&(e.columns=ho(e.columns,r,a,e.locked,i?i+" "+s:s)),g({encoded:r,hidden:a,locked:n},e)}))}function go(e,t){var o=[];return fo(e,t,o),o[o.length-1]}function fo(e,t,o){o=o||[];for(var r=0;r<t.length;r++){if(e===t[r])return!0;if(t[r].columns){var l=o.length;if(o.push(t[r]),fo(e,t[r].columns,o))return!0;o.splice(l,o.length-l)}}return!1}function mo(e,t){bo(e,t,t)}function bo(e,t,o){var r=o?ur:cr;e.hidden=!t,e.attributes=r(e.attributes),e.footerAttributes=r(e.footerAttributes),e.headerAttributes=r(e.headerAttributes)}function _o(e,t){ko(e),bo(e,t,e._hideByMedia?e.matchesMedia:t)}function ko(e){e.matchesMedia=vo(e)}function vo(e){return e&&(xo(e.media)||!xo(e.media)&&o.matchesMedia(e.media))}function Co(){return this.style.display!==It&&!this.classList.contains("k-hidden")}function wo(e){return yo([e]).length>0}function yo(e){return m(e,(function(e){var t=!e.hidden&&!1!==e.matchesMedia;return t&&e.columns&&(t=yo(e.columns).length>0),t}))}function So(e){for(var t,o=[],r=0;r<e.length;r++){if(!xo((t=e[r]).media)){if(!xo(t.minScreenWidth))throw new Error("Using 'media' and 'minScreenWidth' options at the same time is not supported.");o.push(t)}t.columns&&(o=o.concat(So(t.columns)))}return o}function xo(e){return void 0===e}function To(t){return e(t).map((function(){return this.toArray()}))}function Ho(e,t){for(var o=0;o<e.length;o++)if(e[o].field==t)return e[o]}function Ro(t,o,r,l,n,i,a,s){var d=Eo(t),c=Eo([o]);if(d>c){var u=new Array(a+1).join('<th class="k-group-cell k-header k-table-th" scope="col">&nbsp;</th>'),p=i.children(":not(.k-filter-row)");e(new Array(d-c+1).join("<tr class='k-table-row'>"+u+"</tr>")).insertAfter(p.last())}!function(e,t){for(var o=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),r=0;r<o.length;r++)o[r].rowSpan+=t}(i,d-c),Ao(r,l,n,i,s)}function Io(t,r,l){var n;l=l||0;var i=r;r=rr(r);for(var a={},s=t.find(">tr:not(.k-filter-row)"),d=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},c=0,u=r.length;c<u;c++)a[(n=Mo(r[c],i)).row]||(a[n.row]=s.eq(n.row).find(x+He).filter(d)),a[n.row].eq(n.cell).attr(o.attr("index"),l+c);return r.length}function Eo(e){for(var t=0,o=0;o<e.length;o++)if(e[o].columns){var r=Eo(e[o].columns);r>t&&(t=r)}return 1+t}function Ao(t,o,r,l,n){var i,a=Do(t[0],o),s=r.find(">tr:not(.k-filter-row)").eq(a.row).children("th.k-header:not(.k-group-cell)"),d=e(),c=a.cell;for(i=0;i<t.length;i++)d=d.add(s.eq(c+i));l.find(">tr:not(.k-filter-row)").eq(a.row)[n](d);var u=[];for(i=0;i<t.length;i++)t[i].columns&&(u=u.concat(t[i].columns));u.length&&Ao(u,o,r,l,n)}function Mo(e,t,o,r){var l,n;for((r=r||{})[o=o||0]=r[o]||0,n=0;n<t.length;n++){if(t[n]==e){l={cell:r[o],row:o};break}if(t[n].columns&&(l=Mo(e,t[n].columns,o+1,r)))break;r[o]++}return l}function Fo(e){let t=e,o=t.match(/class=["][^"]+/g);if(o){const e=o[0].split('"').pop();t=t.replace(e,e+" k-table-td")}else t=t.replace("<td","<td class='k-table-td'");return t}function zo(e,t,o,r,l){if(t.columns)return(t=t.columns)[r?0:t.length-1];var n,i=go(t,e);n=i?i.columns:e;var a=_(t,n);0===a&&r?a++:a==n.length-1&&!r||!o.locked&&!t.columns&&!r?a--:(a>0||0===a&&!r)&&a++,t=function(e,t,o,r){var l,n,i=!!o.locked;do{l=e[t],t+=r?1:-1,n=!!l.locked}while(l&&t>-1&&t<e.length&&l!=o&&!l.columns&&n===i);return l}(n,a,o,_(o,n)>a);var s=_(t,l);return(!t.columns||s&&s!==n.length-1)&&t&&t!=o&&t.columns?zo(e,t,o,r,l):null}function Do(e,t,o,r){var l,n;for((r=r||{})[o=o||0]=r[o]||0,n=0;n<t.length;n++){if(t[n]==e){l={cell:r[o],row:o};break}if(t[n].columns&&(l=Do(e,t[n].columns,o+1,r)))break;t[n].hidden||r[o]++}return l}function Lo(e){return Po(Ko(e)).concat(Po(Qo(e)))}function Bo(e,t,o,r){var l=e[o],n=e[r],i=go(l,t);return t=i?i.columns:t,_(n,t)}function Po(e){for(var t=[],o=[],r=0;r<e.length;r++)t.push(e[r]),e[r].columns&&(o=o.concat(e[r].columns));return o.length&&(t=t.concat(Po(o))),t}function Vo(e){for(var t,o=0,r=0;r<e.length;r++)(t=e[r]).columns?o+=Vo(t.columns):t.hidden&&o++;return o}function qo(e){for(var t=0,o=0,r=e.length;o<r;o++)e[o].hidden||(t+=parseInt(e[o].width,10));return t}function Oo(e){for(var t,o=0,r=0,l=e.length;r<l;r++)(t=e[r].style.width)&&-1==t.indexOf("%")&&(o+=parseInt(t,10));return o}function Go(t){for(var o=t.find("tr:not(.k-filter-row)"),r=o.filter((function(){return!e(this).children().length})).remove().length,l=o.find("th:not(.k-group-cell,.k-hierarchy-cell)"),n=0;n<l.length;n++)l[n].rowSpan>1&&(l[n].rowSpan-=r);return o.length-r}function Wo(e,t,o,r,l){var n,i,a,s=[];for(n=0,a=e.length;n<a;n++)(i=o[r]||[]).push(t.eq(l+n)),o[r]=i,e[n].columns&&(s=s.concat(e[n].columns));s.length&&Wo(s,t,o,r+1,l+e.length)}function No(e,t,o){e.css({left:t,right:o})}function $o(e,t,o){e[t]=e[t]||{},e[t][o]=e[t][o]||""}function jo(e,t,o,r){$o(e,t,o),""!==e[t][o]?e[t][o]+=" "+r:e[t][o]=r}function Uo(e,t,o,r,l){$o(e,t,o),l?delete e[t][o]:e[t][o]=e[t][o].replace(r,"")}function Ko(e){return m(e,(function(e){return e.locked}))}function Qo(e){return m(e,(function(e){return!e.locked}))}function Yo(e){return m(e,(function(e){return e.sticky&&!e.locked}))}function Jo(e){return m(e,(function(e){return!e.locked&&wo(e)}))}function Xo(e){return m(e,(function(e){return e.locked&&wo(e)}))}function Zo(e){for(var t=[],o=0;o<e.length;o++)e[o].hidden||(e[o].columns?t=t.concat(Zo(e[o].columns)):t.push(e[o]));return t}function er(e){for(var t=[],o=0;o<e.length;o++)e[o].hidden||(e[o].columns?t=t.concat(Zo(e[o].columns)):t.push({field:e[o].field,width:e[o].width,values:e[o].values,title:e[o].title}));return t}function tr(e){for(var t=[],o=0;o<e.length;o++)e[o].columns&&(t=t.concat(e[o].columns));return t}function or(e){var t=tr(e);return t=t.filter((function(e){return!e.hidden}))}function rr(e){for(var t=[],o=0;o<e.length;o++)e[o].columns?t=t.concat(rr(e[o].columns)):t.push(e[o]);return t}function lr(e){var t=[];e=rr(e);for(var o=0;o<e.length;o++)"string"==typeof e[o]?t.push(e[o]):e[o].field&&t.push(e[o].field);return t}function nr(e,t){return{field:e.field,title:e.title,format:e.format,editor:e.editor,values:e.values,editorOptions:g(!0,{format:e.format,adaptiveMode:t},e.editorOptions),label:e.title||e.field||""}}function ir(r){var l=r.find(">tr:not(.k-filter-row)"),n=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},i=e();l.length>1&&(i=l.find("th").filter(n).filter((function(){return this.rowSpan>1}))),i=i.add(l.last().find("th").filter(n));var a=o.attr("index");return[].sort.call(i,(function(o,r){o=e(o),r=e(r);var l=o.attr(a),n=r.attr(a);return l===t&&(l=e(o).index()),n===t&&(n=e(r).index()),(l=parseInt(l,10))>(n=parseInt(n,10))?1:l<n?-1:0}))}function ar(t){var o=t.closest("table"),r=e().add(t),l=t.closest(bt),n=o.find("tr:not(.k-filter-row)"),i=n.index(l);if(i>0){for(var a=n.eq(i-1).find("th:not(.k-group-cell,.k-hierarchy-cell)").filter((function(){return!e(this).attr("rowspan")})),s=0,d=l.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),c=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter((function(){return this.colSpan>1})),u=0;u<c.length;u++)s+=c[u].colSpan||1;for(d+=Math.max(s-1,0),s=0,u=0;u<a.length;u++){var p=a.eq(u);if(p.attr("data-colspan")?s+=p[0].getAttribute("data-colspan"):s+=1,d>=u&&d<s){r=ar(p).add(r);break}}}return r}function sr(t){var r=t.closest("thead"),l=e().add(t),n=t.closest(bt),i=r.find("tr:not(.k-filter-row)"),a=i.index(n)+t[0].rowSpan,s=o.attr("colspan");if(a<=i.length-1){var d,c=n.next(),u=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");u=u.filter((function(){return!this.rowSpan||1===this.rowSpan}));var p=0;for(d=0;d<u.length;d++)p+=parseInt(u.eq(d).attr(s),10)||1;var h=c.find("th:not(.k-group-cell,.k-hierarchy-cell)"),g=parseInt(t.attr(s),10)||1;for(d=0;d<g;){c=h.eq(d+p),l=l.add(sr(c));var f=parseInt(c.attr(s),10);f>1&&(g-=f-1),d++}}return l}function dr(t,r,l,n){var a,s=t;if(i){let r=e(l);o.applyStylesFromKendoAttributes(r,["display","left","right"]),t.empty(),r.each(((e,o)=>t[0].appendChild(o)))}else(a=document.createElement(_t)).innerHTML="<table class='k-grid-table k-table'><tbody class='k-table-tbody'>"+l+"</tbody></table>",e(a).find("table").addClass(o.getValidCssClass("k-table-","size",n)),t=a.firstChild.firstChild,r[0].replaceChild(t,s[0]),t=e(t);return t}function cr(e){e=e||{};let t={};return t[o.attr("style-display")]="none",g({},e,t)}function ur(e){return delete(e=e||{})[o.attr("style-display")],e}function pr(t,r,l,n){var i,a=t.find(">colgroup"),s=f(r,(function(e){return(i=e.width)&&0!==parseInt(i,10)?o.format(`<col ${o.attr("style-width")}="{0}" ${e.draggable?"class=k-drag-col":""} />`,typeof i===rt?i:i+mt):e.draggable?"<col class='k-drag-col' />":"<col />"}));(l||a.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />'),a.length&&a.remove(),a=e(new Array(n+1).join('<col class="k-group-col">')+s.join("")),o.applyStylesFromKendoAttributes(a,["width"]),a.is("colgroup")||(a=e("<colgroup/>").append(a)),t.prepend(a)}function hr(e){var t,o,r,l={};for(o=0,r=e.length;o<r;o++)l[(t=e[o]).value]=t.text;return l}function gr(e,t,r,l){let n=r&&r.length&&h(r[0])&&"value"in r[0]?hr(r)[e]:e;n=null!=n?n:"";let i=!1===l?n:o.htmlEncode(n);return t?o.format(t,i):i}function fr(e,t,o){for(var r,l=0,n=e[l];n;){if(r=!!o||n.style.display!==It,o&&n.classList.contains("k-hidden")&&n.classList.remove("k-hidden"),r&&!Lt.test(n.className)&&--t<0){n.style.display=o?"":It;break}n=e[++l]}}function mr(t,o){for(var r,l,n=0,i=t.length;n<i;n+=1)(l=t.eq(n)).is(".k-grouping-row,.k-detail-row")?(r=l.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(r.attr("colspan"),10)-1):(l.hasClass("k-grid-edit-row")&&(r=l.children(".k-edit-container")[0])&&((r=e(r)).attr("colspan",parseInt(r.attr("colspan"),10)-1),r.find("col").eq(o).remove(),l=r.find(bt).first()),fr(l[0].cells,o,!1))}function br(e){for(var t,o=[],r=0;r<e.length&&("field"in(t=e[r])&&"value"in t&&"items"in t);r++)o.push(t),t.hasSubgroups&&(o=o.concat(br(t.items)));return o}function _r(t,o){for(var r,l,n=0,i=t.length;n<i;n+=1)(l=t.eq(n)).is(".k-grouping-row,.k-detail-row")?(r=l.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(r.attr("colspan"),10)+1):(l.hasClass("k-grid-edit-row")&&(r=l.children(".k-edit-container")[0])&&((r=e(r)).attr("colspan",parseInt(r.attr("colspan"),10)+1),pr(r.find(">form>table"),yo(undefined),!1,0),l=r.find(bt).first()),fr(l[0].cells,o,!0))}function kr(e,t,o){var r,l,n;for(o=o||1,l=0,n=e.length;l<n;l++)(r=e.eq(l).children(":not([hidden])").last()).attr("colspan",parseInt(r.attr("colspan"),10)+o),(r=t.eq(l).children(":not([hidden])").last()).attr("colspan",parseInt(r.attr("colspan"),10)-o)}function vr(e){var t,o,r=0,l=e.find(">colgroup>col");for(t=0,o=l.length;t<o;t+=1)r+=parseInt(l[t].style.width,10);return r}var Cr=o.ui.DataBoundWidget.extend({init:function(t,r,l){var n=this;r=b(r)?{dataSource:r}:r,s.fn.init.call(n,t,r),l&&(n._events=l),Nt=o.support.isRtl(t),B=Nt?"a[class*='-i-caret-alt-left']":P,n._element(),n._ariaId(),n._columns(e.extend(!0,[],n.options.columns)),n._bindMediaQueries(),n._foreignKeyPromises?e.when.apply(null,n._foreignKeyPromises).then((function(){n._foreignKeyPromises=null,n._continueInit()})):n._continueInit()},_continueInit:function(){var t=this;t._dataSource(),t._stickyColumns(),t._tbody(),t._thead(),t._rowResizing(),t._groupable(),t._toolbar(),t._initToolbarItemsPopups(),t._pageable(),t._setContentHeight(),t._templates(),t._navigatable(),t._initSelectableAggregates(),t._selectable(),t._statusBar(),t._clipboard(),t._paste(),t._details(),t._editable(),t._attachCustomCommandsEvent(),t._adaptiveColumns(),t._minScreenSupport(),t.options.autoBind?t.dataSource.fetch():(t._group=t._groups()>0,t._footer()),t._setInitialRtlScrollPosition(),t.options.contextMenu&&t._initContextMenu(),t.lockedContent&&(t.wrapper.addClass("k-grid-lockedcolumns"),t._resizeHandler=function(){t.resize()},e(window).on("resize"+V,t._resizeHandler)),t._initLoader(),o.notify(t),t._showWatermarkOverlay&&t._showWatermarkOverlay(t.wrapper[0])},events:[J,Y,"dataBinding","cancel",te,oe,re,N,$,U,j,K,q,O,G,W,ee,Q,Le,Be,Pe,Z,X,Ve,qe,Oe,Ge,We,Ne,ae,"page","sort","filter","group","groupExpand","groupCollapse","kendoKeydown"],setDataSource:function(e){var t,r=this,l=r.options.scrollable;r.options.dataSource=e,r._dataSource(),r._pageable(),r._thead(),r._rowResizing(),l&&(l.virtual?(t=r.content.find(">.k-virtual-scrollable-wrap"),o.scrollLeft(t,Er(t,Nt))):(t=r.tbody,o.scrollLeft(r.content,Er(t,Nt)))),r.options.groupable&&r._groupable(),r.virtualScrollable&&r.virtualScrollable.setDataSource(r.options.dataSource),r.options.navigatable&&r._navigatable(),r.options.selectable&&r._selectable(),r.options.autoBind?r.dataSource.fetch():r._footer()},options:{name:"Grid",adaptiveMode:"none",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,allowPaste:!1,navigatable:!1,pageable:!1,persistSelection:!1,editable:!1,encodeTitles:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",statusBarTemplate:null,search:!1,noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,contextMenu:!1,columnResizeHandleWidth:3,size:"medium",mobile:"",loaderType:"loadingPanel",messages:{loader:{loading:"Loading...",exporting:"Exporting..."},editable:{cancelDelete:"Cancel",confirmation:"Are you sure you want to delete this record?",confirmDelete:"Delete"},commands:{create:ao.create.text,cancel:ao.cancel.text,save:ao.save.text,destroy:ao.destroy.text,edit:ao.edit.text,update:ao.update.text,canceledit:ao.canceledit.text,excel:ao.excel.text,pdf:ao.pdf.text,search:ao.search.text,columns:ao.columns.text,select:"Select",sort:ao.sort.text,filter:ao.filter.text,group:ao.group.text,columnchooser:ao.columnchooser.text,selectRow:"Select Row",selectAllRows:"All rows",clearSelection:"Clear selection",copySelection:"Copy selection",copySelectionNoHeaders:"Copy selection (No Headers)",paste:"Paste (use CTRL/⌘ + V)",reorderRow:"Reorder row",reorderRowUp:"Up",reorderRowDown:"Down",reorderRowTop:"Top",reorderRowBottom:"Bottom",exportPdf:"Export to PDF",exportExcel:"Export to Excel",exportToExcelAll:"All",exportToExcelSelection:"Selection",exportToExcelSelectionNoHeaders:"Selection (No Headers)",sortAsc:"Sort Ascending",sortDesc:"Sort Descending",moveGroupPrevious:"Move previous",moveGroupNext:"Move next"},noRecords:"No records available.",expandCollapseColumnHeader:"",groupHeader:"Press ctrl + space to group",ungroupHeader:"Press ctrl + space to ungroup",itemsSelected:"items selected",dragHandleLabel:"Drag row",toolbarLabel:"grid toolbar",groupingHeaderLabel:"grid grouping header",filterCellTitle:"filter cell",clearButtons:{clearFiltering:"Clear All Filters",clearSorting:"Clear Sorting",clearGrouping:"Clear Grouping",columnChooserReset:"Reset"},applyButtons:{applySorting:"Done",applyGrouping:"Done",columnChooserApply:"Apply"}},width:null},destroy:function(){var t,r,l=this;if(l._destroyColumnAttachments(),s.fn.destroy.call(l),this._navigatableTables&&(this._navigatableTables.off(V),this._navigatableTables=null,this._headertables=null),l._resizeHandler&&e(window).off("resize"+V,l._resizeHandler),l.pager&&l.pager.element&&l.pager.destroy(),l.timer&&clearTimeout(l.timer),l._progressTimeOut&&clearTimeout(l._progressTimeOut),l._collapseGroupsTimeOut&&clearTimeout(l._collapseGroupsTimeOut),l._endlessFetchTimeOut&&clearTimeout(l._endlessFetchTimeOut),l.pager=null,l._destroyGroupable(),(r=l.wrapper.data("kendoReorderable"))&&r.destroy(),(r=l.tbody?l.tbody.data("kendoReorderable"):null)&&r.destroy(),l.allowPaste){(l.content||l.table).off(ae+V,l.pasteHandler),l.unbind(l.pasteHandler)}l.pasteActionsDropDownList&&(l.pasteActionsDropDownList.destroy(),l.pasteActionsDropDownList=null),l.selectable&&l.selectable.element&&(l.selectable.destroy(),l.clearArea(),l._selectedIds=null,l.copyHandler&&(l.wrapper.off("keydown",l.copyHandler),l.unbind(l.copyHandler)),l.updateClipBoardState&&(l.unbind(l.updateClipBoardState),l.updateClipBoardState=null),l.clearAreaHandler&&l.wrapper.off("keyup",l.clearAreaHandler)),l.selectable=null,l._selectableAggregatesOptions=null,l.resizable&&(l.resizable.destroy(),l._resizeUserEvents&&(l._resizeHandleDocumentClickHandler&&e(document).off("click",l._resizeHandleDocumentClickHandler),l._resizeUserEvents.destroy(),l._resizeUserEvents=null),l.resizable=null),l._destroyRowResizing(),l._destroyVirtualScrollable(),l.editableUserEvents&&(l.editableUserEvents.destroy(),l.editableUserEvents=null),l._lockedContentUserEvents&&(l._lockedContentUserEvents.destroy(),l._lockedContentUserEvents=null),l._destroyEditable(),l.dataSource&&(l.dataSource.unbind(J,l._refreshHandler).unbind(T,l._progressHandler).unbind(H,l._errorHandler).unbind(ut,l._clearSortClasses),l._refreshHandler=l._progressHandler=l._errorHandler=l._sortHandler=null),t=l.element.add(l.wrapper).add(l.table).add(l.thead).add(l.wrapper.find(">.k-grid-toolbar")),l.content&&(t=t.add(l.content).add(l.content.find(">.k-virtual-scrollable-wrap"))),l.scrollables&&l.scrollables.first()&&(t=t.add(l.scrollables.first())),l.lockedHeader&&l._removeLockedContainers(),l.pane&&l.pane.destroy(),l._isMobile&&(l.wrapper.off("transitionend"+V),l.wrapper.off("contextmenu"+V)),l.minScreenResizeHandler&&e(window).off("resize",l.minScreenResizeHandler),l._detachColumnMediaResizeHandler(),l._draggableInstance&&l._draggableInstance.element&&l._draggableInstance.destroy(),l._draggableInstance=null,l._draggableRowsInstance&&l._draggableRowsInstance.element&&l._draggableRowsInstance.destroy(),l.tbodyContextMenu&&l.tbodyContextMenu.destroy(),l.theadContextMenu&&l.theadContextMenu.destroy(),l.loader&&l.loader.destroy(),l._draggableRowsInstance=null,t.off(V),t[0].kendoBindingTarget=null,o.destroy(l.wrapper),l.rowTemplate=l.altRowTemplate=l.lockedRowTemplate=l.lockedAltRowTemplate=l.detailTemplate=l.footerTemplate=l.groupFooterTemplate=l.lockedGroupFooterTemplate=l.noRecordsTemplate=null,l.scrollables=l.thead=l.tbody=l.element=l.table=l.content=l.statusBar=l.footer=l.wrapper=l.lockedTable=l.lockedContent=l.lockedHeader=l.lockedFooter=l._groupableClickHandler=l._groupRows=l._setContentWidthHandler=l.loaderOverlay=l.wrapperClone=null},getOptions:function(){this.options.dataSource=null;var t=g(!0,{},this.options);t.columns=o.deepExtend([],this.columns);var r=this.dataSource,l=r.options.data&&r._data;return r.options.data=null,t.dataSource=e.extend(!0,{},r.options),r.options.data=l,t.dataSource.data=l,t.dataSource.page=r.page(),t.dataSource.filter=e.extend(!0,{},r.filter()),t.dataSource.pageSize=r.pageSize(),t.dataSource.sort=r.sort(),t.dataSource.group=r.group(),t.dataSource.aggregate=r.aggregate(),t.dataSource.transport&&(t.dataSource.transport.dataSource=null),t.pageable&&t.pageable.pageSize&&(t.pageable.pageSize=r.pageSize()),t},setOptions:function(e){var t=this.getOptions(),r=this.element;if(t.size){const e=o.getValidCssClass("k-grid-","size",t.size);r.removeClass(e)}o.deepExtend(t,e),e.dataSource?e.dataSource.filter&&(t.dataSource.filter=e.dataSource.filter):t.dataSource=this.dataSource;var l=this.wrapper,n=this._events;if(this.destroy(),this.options=null,this._isMobile){var i=l.closest(o.roleSelector("pane")).parent();i.after(l),i.remove(),l.removeClass("k-grid-mobile")}l[0]!==r[0]&&(l.before(r),l.remove()),r.empty(),this.init(r,t,n),this._setEvents(t)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t,o){return t.children().filter((function(){var t=e(this);return!((o?t.hasClass("k-detail-row"):t.hasClass(ze))||t.hasClass("k-detail-row")||t.hasClass("k-group-footer"))}))},dataItems:function(){var e=o.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(var t=e.length,r=new Array(2*t),l=t;--l>=0;)r[l]=r[l+t]=e[l];e=r}return e},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&t.thead.add(t.lockedHeader).find("th").each((function(){var t=e(this),o=t.data("kendoFilterMenu"),r=t.data("kendoColumnSorter"),l=t.data("kendoColumnMenu");o&&o.destroy(),r&&r.destroy(),l&&l.destroy()}))},_setInitialRtlScrollPosition:function(){const e=this;Nt&&e.scrollables&&o.scrollLeft(e.scrollables,0)},_attachCustomCommandsEvent:function(){var e,t,o,r=this,l=rr(r.columns||[]);for(t=0,o=l.length;t<o;t++)(e=l[t].command)&&po(r,r.wrapper,e)},_bindMediaQueries:function(){const e=this;if("auto"===e.options.adaptiveMode){e.largeMQL=o.mediaQuery("large"),e.mediumMQL=o.mediaQuery("medium"),e.smallMQL=o.mediaQuery("small");const t=(t,o)=>{if("popup"!==e._editMode())return;const r=!0===t||!1===t;let l;if(e._editContainer&&(l=e._editContainer&&e._editContainer.data(o)),!l){const t="kendoActionSheet"===o?"kendoWindow":"kendoActionSheet";l=e._editContainer&&e._editContainer.data(t)}r?l&&l.fullscreen&&l.visible()?(e._showAdaptiveView=!0,l.fullscreen(t)):l&&(e._showAdaptiveView=!1,e._destroyEditable(!0)):l&&l.fullscreen&&l.close()};e.smallMQL.onEnter((()=>{t(!0,"kendoActionSheet")})),e.mediumMQL.onEnter((()=>{t(!1,"kendoActionSheet")})),e.largeMQL.onEnter((()=>{t(null,"kendoWindow")}))}else e.smallMQL&&e.smallMQL.destroy(),e.mediumMQL&&e.mediumMQL.destroy(),e.largeMQL&&e.largeMQL.destroy(),e._showAdaptiveView=!1},_aria:function(){var e,t,r,l,n,i=this.wrapper,a=this._hasDetails()?"treegrid":this.options.navigatable?"grid":null,s=this.table,d=i.find(".k-grid-toolbar"),c=i.find(".k-grouping-header"),u=this._ariaGridId(),p=s.attr(tt),h=this.thead.find(bt).length+this.wrapper.find(".k-grid-footer-wrap table tr").length,g=this._trailingColumns(),f=this.virtualScroll,m=this.options.pageable;s.attr(tt,p>=0?p:0),a&&s.attr(Rt,a);const b=s.find("tbody"),_=s.find("thead"),k=s.find("tfoot"),v=s.find(bt);b.find(bt).length>0&&b.attr(Rt,At),_.find(`${bt} th`).length>0&&_.attr(Rt,At),k.find(bt).length>0&&k.attr(Rt,At),v.children().length>0&&v.attr(Rt,Et),s.find("th").attr(Rt,Mt),s.find("td").attr(Rt,Ft),m&&this.dataSource.totalPages()>1||f&&f.rows?(n=this._groups()>0?-1:this._hasDetails()?h+2*this.dataSource.total():h+this.dataSource.total(),s.attr(Ct,n)):this._hasDetails()&&(n=this._groups()>0?-1:h+2*this.dataSource.total(),s.attr(Ct,n)),n&&n>0&&this._ariaRowIndex(),(f&&f.columns||!s.attr(wt)&&(s.find("td:not([group-header-spanned-hidden]):hidden").length>0||i.find(".k-grid-content-locked td:not([group-header-spanned-hidden]):hidden").length>0))&&(s.attr(wt,g+rr(this.columns).length),this._ariaColumnIndex()),this.pager&&this.pager.element.attr("aria-controls",u),d.attr({role:"toolbar","aria-label":this.options.messages.toolbarLabel,"aria-controls":u}),c.attr({role:"toolbar","aria-label":this.options.messages.groupingHeaderLabel,"aria-controls":u}),t=this._ariaHeaderFooter("header","thead","th, td",Mt),r=this._ariaHeaderFooter("footer","tfoot","td",Ft),i.find(".k-grid-content-locked").length>0&&this._ariaLockedContent(),(t||r)&&(l=[t,e=this.tbody.attr(ft)||o.guid(),r].join(" "),this.tbody.attr(ft,e),s.attr(vt,l)),this.options.groupable&&this._ariaGroupTitles()},_ariaColumnIndex:function(){var t,o,r,l,n=this._trailingColumns(),i=this.tbody.find(">tr").last().find("> td[data-virtual]"),a=this.thead.find(">tr").not(".k-filter-row"),s=this.wrapper.find(".k-grid-header-locked thead > tr").not(".k-filter-row"),d=Number.MAX_VALUE,c=0,u=0,p=0,h=0,g=function(o,r){var l=r.getAttribute("data-index"),n=Number(l),i=e(r).closest(".k-grid-header-locked");0===i.length&&n<d&&(d=n),i.length>0&&u<n&&(u=n),0===i.length&&c<n&&(c=n),null!==l?(r.setAttribute(yt,Number(n)+1),t=Number(n)+1+r.getAttribute("colspan")):(r.setAttribute(yt,t+1),t+=r.getAttribute("colspan"))};for(2===i.length?(p=Number(i[0].getAttribute("colspan")),h=Number(i[1].getAttribute("colspan"))):1===i.length&&0===i.prev().length?p=Number(i[0].getAttribute("colspan")):1===i.length&&1===i.prev().length&&(h=Number(i[0].getAttribute("colspan"))),o=0;o<s.length;o++)t=0,s.eq(o).find("th").each(g);for(o=0;o<a.length;o++)t=0,a.eq(o).find("th").each(g);for(o=0;o<=u;o++)r=o+n,this.wrapper.find(".k-grid-content-locked tbody > tr > td:nth-child("+(o+1)+")").attr(yt,r+1);for(o=p;o<=c-d-h;o++)l=0===p?o+1:o-p+2,r=d+o+n,this.tbody.find("> tr > td:nth-child("+l+")").attr(yt,r+1)},_ariaGroupTitles:function(){var e=this,t=e.dataSource.group(),r=e.wrapper.find(".k-grid-header th");r.each((function(t,o){o.getAttribute("title")===e.options.messages.ungroupHeader&&o.setAttribute("title",e.options.messages.groupHeader)})),t&&t.length>0&&t.forEach((function(t){var l=t.field,n=r.filter("["+o.attr("field")+"='"+l+"']");n.attr("title")===e.options.messages.groupHeader&&n.attr("title",e.options.messages.ungroupHeader)}))},_ariaHeaderFooter:function(e,t,r,l){var n,i=this.wrapper,a=i.find(".k-grid-"+e+" .k-grid-"+e+"-wrap table"),s=i.find(".k-grid-"+e+" .k-grid-"+e+"-locked table"),d="";if(a.length>0){d=(n=a.find(t+", tbody")).attr(ft)||o.guid(),a.attr(Rt,It);const e=a.find(bt);e.children().length>0&&(e.attr(Rt,Et),n.attr(Rt,At)),a.find(r).attr(Rt,l),n.attr({id:d})}return s.length>0&&this._ariaLocked(e,t,r,l),s.find("td").attr(Rt,Ft),a.find("td").attr(Rt,Ft),d},_ariaId:function(){var e=this.element.attr(ft)||"aria";e&&(this._cellId=e+"_active_cell")},_ariaGridId:function(){var e=this.table,t=e.attr(ft);return t||(t=o.guid(),e.attr(ft,t)),t},_ariaLocked:function(t,o,r,l){var n=this,i=n.wrapper,a=i.find(".k-grid-"+t+" .k-grid-"+t+"-wrap table"),s=i.find(".k-grid-"+t+" .k-grid-"+t+"-locked table"),d=a.find(bt),c=s.find(bt);s.attr(Rt,It),s.find(o+", tbody").attr(Rt,It),c.attr(Rt,It),s.find(r).attr(Rt,l),d.each((function(o,l){var i=[];i=(i=n._cellsIds(c.eq(o).find(r),"locked_"+t,o)).concat(n._cellsIds(e(l).find(r),t,o)),l.setAttribute(vt,i.join(" "))}))},_ariaLockedContent:function(){var t=this,o=t.table.find(bt),r=t.wrapper.find(".k-grid-content-locked table"),l=r.find(bt);r.attr(Rt,It),r.find("tbody").attr(Rt,It),l.attr(Rt,It),r.find("td").attr(Rt,Ft),o.each((function(o,r){var n=[];n=(n=t._cellsIds(l.eq(o).find("td"),"locked_datacell",o)).concat(t._cellsIds(e(r).find("td"),"datacell",o)),r.setAttribute(vt,n.join(" "))}))},_ariaAddHiddenColIndex:function(){var e=this.virtualScroll||{},t=this.columns,o=this.table,r=rr(t).length;e.columns||o.attr(wt)||(this._ariaColumnIndex(),o.attr(wt,r))},_ariaRemoveHiddenColIndex:function(){var e=this.virtualScroll||{},t=rr(this.columns).length;e.columns||t!==Zo(this.columns).length||(this.wrapper.find("td, th").removeAttr(yt),this.table.removeAttr(wt))},_ariaRowIndex:function(){var e,t,o=this.thead.find(">tr"),r=o.length,l=this.tbody.find(">tr"),n=this.wrapper.find(".k-grid-footer-wrap tfoot > tr"),i=this.dataSource.total(),a=this.dataSource.skip()||0,s=1,d=!1;for(this._hasDetails()&&(i*=2,a*=2),e=0;e<r;e++)o.eq(e).attr(St,s+e);for(s=r+a,e=0;e<l.length;e++)t=l.eq(e),this._hasDetails()&&t.hasClass("k-master-row")?(s+=d?2:1,d=!0):(s+=1,d=!1),t.attr(St,s);for(s=r+i+1,e=0;e<n.length;e++)n.eq(e).attr(St,s+e)},_cellsIds:function(e,t,o){var r=[],l=this._ariaGridId();return e.each((function(e,n){var i=n.getAttribute(ft)||l+"_"+t+"_"+o+"_"+e;n.setAttribute(ft,i),r.push(i)})),r},_trailingColumns:function(){return this._groups()+(this._hasDetails()?1:0)},_element:function(){const t=this;let r=t.element;r.is("table")||(r=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),r.length||(r=e("<table />").appendTo(t.element))),r.addClass("k-grid-table k-table"),r.addClass(o.getValidCssClass("k-table-","size",t.options.size)),t.table=r,t._wrapper()},_createResizeHandle:function(t,r){var l,n,i,a,s,d,u,p=this,h=p.options.columnResizeHandleWidth,g=p.options.scrollable,f=p.resizeHandle,m=3*h/2,b=0;f&&p.lockedContent&&f.data("th")[0]!==r[0]&&(f.off(V).remove(),f=null),f||(f=p.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(f)),s=o.scrollLeft(t),Nt&&($t.mozilla||$t.webkit&&$t.version>=85)&&(s*=-1),a=parseFloat(t.css("borderLeftWidth")),d=r.offset().left+s-parseFloat(r.css("marginLeft"))-(t.offset().left+a),Nt?g&&(b=d<=s?m:0,(l=r.closest(".k-grid-header-wrap, .k-grid-header-locked"))[0].scrollWidth-l[0].offsetWidth,i=parseFloat(l.css("marginLeft")),n=$t.msie?2*o.scrollLeft(l)+a-i-b:0,d-=-b+($t.mozilla?a-i-b:0)+n):d+=r[0].offsetWidth,u=r.offset().top-parseFloat(r.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth"))),f.css({top:u,left:d-m,height:c(r),width:3*h-b}).data("th",r).show(),f.off(Je+V).on(Je+V,(function(){p._autoFitLeafColumn(parseInt(r.attr(o.attr("index")),10))}))},_positionColumnResizeHandle:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find("thead").first():e();t.thead.add(r).on(Ye+V,"tr:not(.k-filter-row) > th:not([data-resizable=false])",(function(r){var l=void 0!==r.buttons?r.buttons:r.which||r.button,n=e(this);n.hasClass("k-group-cell")||n.hasClass("k-hierarchy-cell")||void 0!==l&&0!==l||n[0].hasAttribute(o.attr("colSpan"))||t._createResizeHandle(n.closest(_t),n)}))},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._resetResizeHandleHeader(),this._hideResizeHandle())},_resetResizeHandleHeader:function(){var t;this.resizeHandle&&(t=e(this.resizeHandle).data("th"))&&(t.find(x+we).find(x+ye+","+x+Se).show(),t.find(x+xe).show(),t.find(x+Re).show(),t.find(x+Ie).show())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(V).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find("thead").first():e();t._resizeUserEvents=new o.UserEvents(r.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,minHold:500,hold:function(o){var r=e(o.target);o.preventDefault(),t.resizeHandle&&(t.resizeHandle.data("th").removeClass("k-column-active"),t._resetResizeHandleHeader()),r.addClass("k-column-active"),r.find(x+we).find(x+ye+","+x+Se).hide(),r.find(x+xe).hide(),r.find(x+Re).hide(),r.find(x+Ie).hide(),t._createResizeHandle(r.closest(_t),r),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=t._resizeHandleDocumentClick.bind(t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},resizeColumn:function(t,r){var l,n=this,i=!!t.locked,a=!!t.hidden,s=this.options,c=o.support.mobileOS?0:o.support.scrollbar(),u=_(t,i?Xo(Zo(n.columns)):Jo(Zo(n.columns))),p=i?n.lockedTable:n.table,h=n.footer||e(),g=i?n.lockedHeader.find("table"):n.thead.closest("table"),f=t.minResizableWidth||10,m=d(i?p.find("tbody"):n.tbody);if(a)t.width=r>f?r:f;else{if(n.footer&&n.lockedContent&&(h=i?n.footer.children(".k-grid-footer-locked"):n.footer.children(".k-grid-footer-wrap")),l=s.scrollable?g.find("col:not(.k-group-col,.k-hierarchy-col)").eq(u).add(p.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(u)).add(h.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(u)):p.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(u),s.scrollable){var b=!1,k=n.wrapper.width()-c,v=r=r>f?r:f;i&&m-r+v>k&&((v=r+(k-m-2*c))<0&&(v=r),b=!0),v>10&&v>=f&&(l.css("width",v),m&&(v=b?k-2*c:m+(r-t.width),p.add(g).add(h).css("width",v),i||(n._footerWidth=v))),n._scrollVirtualWrapperOnColumnResize()}else r>10&&r>=f&&l.css("width",r);t.width=r,n._applyLockedContainersWidth(),n._syncLockedContentHeight(),n._syncLockedHeaderHeight(),n._updateStickyColumns()}},_adjustColWidths:function(t,o,r,l){const n={};t.add(o).add(r).css("width",l),t.add(o).add(r).find("col").each(((t,o)=>{n[t]=e(o).css("width")})),t.add(o).add(r).find("col").each(((t,o)=>{e(o).css("width",n[t])}))},_resizable:function(){var t,l,n,i,a,s,u,p,h=this,g=h.options,f=this._isMobile,m=o.support.mobileOS?0:o.support.scrollbar();(!0===g.resizable||g.resizable&&!0===g.resizable.columns)&&(t=g.scrollable?h.wrapper.find(".k-grid-header-wrap").first():h.wrapper,f?h._positionColumnResizeHandleTouch(t):h._positionColumnResizeHandle(t),h.resizable&&h.resizable.destroy(),h.resizable=new r.Resizable(t.add(h.lockedHeader),{handle:(g.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:c(t.data("th"))+h.tbody.attr("clientHeight")})},start:function(t){p=e(t.currentTarget).data("th"),f&&h._hideResizeHandle();let o=p.closest("table"),r=e.inArray(p[0],ir(p.closest("thead")).filter(":visible")),c=(s=o.parent().hasClass("k-grid-header-locked"))?h.lockedTable:h.table,m=h.footer||e();h.footer&&h.lockedContent&&(m=s?h.footer.children(".k-grid-footer-locked"):h.footer.children(".k-grid-footer-wrap"));let b=m.find("table");so(h.wrapper,"col-resize"),u=g.scrollable?o.find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r).add(c.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r)).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r)):c.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(r);let _=e.map(h.columns,(function(e){return!e.hidden&&(s&&e.locked||!s&&!e.locked)?e:null}));l=t.x.location,n=d(p),i=rr(_)[r].minResizableWidth||10,a=d(s?c.children("tbody"):h.tbody),$t.webkit&&h.wrapper.addClass("k-grid-column-resizing"),h._adjustColWidths(c,o,b,a)},resize:function(t){var o=Nt?-1:1,r=n+t.x.location*o-l*o;if(g.scrollable){var d;s&&h.lockedFooter?d=h.lockedFooter.children("table"):h.footer&&(d=h.footer.find(">.k-grid-footer-wrap>table")),d&&d[0]||(d=e());var c=p.closest("table"),f=s?h.lockedTable:h.table,b=!1,_=h.wrapper.width()-m,k=r;s&&a-n+k>_&&((k=n+(_-a-2*m))<0&&(k=r),b=!0),k>10&&k>=i&&(u.css("width",k),a&&(k=b?_-2*m:a+t.x.location*o-l*o,f.add(c).add(d).css("width",k),s||(h._footerWidth=k))),h._scrollVirtualWrapperOnColumnResize()}else r>10&&r>=i&&u.css("width",r)},resizeend:function(){var e,t,r=d(p);if(so(h.wrapper,""),$t.webkit&&h.wrapper.removeClass("k-grid-column-resizing"),p&&n!=r){t=h.lockedHeader?h.lockedHeader.find("thead").first().find(bt).first().add(h.thead.find(bt).first()):p.parent();var l=p.attr(o.attr("index"));l||(l=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(p)),(e=rr(h.columns)[l]).width=r,h.trigger(Be,{column:e,oldWidth:n,newWidth:r}),h._applyLockedContainersWidth(!0),h._syncLockedContentHeight(),h._syncLockedHeaderHeight(),h._updateStickyColumns()}h._resetResizeHandleHeader(),h._hideResizeHandle(),p=null}}))},_addLockedRowResizing:function(e){var t=e.index();return this.lockedTable.find(bt).eq(t).add(this.tbody.find(bt).eq(t))},_getMinRowHeight:function(e){var t=0;return e.each(((e,o)=>{var r;o.style.height="",(r=c(o))>t&&(t=r)})),t},_cacheRowHeight:function(e,t){var o=this;o._cachedRowsHeight||(o._cachedRowsHeight={}),e.each(((e,r)=>{var l=r.getAttribute("data-uid");o._cachedRowsHeight[l]=t}))},_clearCachedRowsHeight:function(e){var t=this;e&&t._cachedRowsHeight?e.each(((e,o)=>{var r=o.getAttribute("data-uid");delete t._cachedRowsHeight[r]})):t._cachedRowsHeight=null},_mapCachedRowsHeight:function(e,t){var o=this._cachedRowsHeight,r=this.dataSource,l={};Object.keys(o).forEach((n=>{var i=r[e](n);i&&(l[i[t]]=o[n])})),this._cachedRowsHeight=l},_rowResizerDblClick:function(){var t,o,r=this,l=r.rowResizer,n=l.data(bt),i=c(n);o=n.hasClass(_e)?r.select():n,r.lockedTable?(o=(n=r._addLockedRowResizing(n)).hasClass(_e)?r.lockedTable.find(x+_e):r.lockedTable.find(bt).eq(n.index())).each(((t,o)=>{var l=o.rowIndex,n=e(o).add(r.tbody.find(bt).eq(l)),i=r._getMinRowHeight(n);n.css(Xe,i)})):o.css(Xe,et),r._clearCachedRowsHeight(o),l.removeClass(ge),l.removeClass(fe),i!=(t=c(n))&&r.trigger(Le,{row:n,rows:o,oldHeight:i,newHeight:t})},_setupRowResizer(e,t,o){e.data(bt,t).css({top:o})},_attachRowResizerEvents:function(){var e=this.rowResizer,t=!1;e.on(je+V,(t=>{0===t.button&&(e.removeClass(ge),e.addClass(fe))})).on(Ue+V,(t=>{0===t.button&&(e.removeClass(fe),e.addClass(ge))})).on(Ke+V,(()=>{t=!0,setTimeout((()=>{t&&e.addClass(ge)}),200)})).on(Qe+V,(()=>{t=!1,e.removeClass(ge)}))},_getResizerTop:function(e,t){var o=this.rowResizer,r=o.find(".k-row-resizer")[0],l=parseInt(getComputedStyle(o[0]).paddingTop);return e.offset().top-parseFloat(e.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth")))-r.clientHeight-l+t.scrollTop()},_getResizerContainer:function(){var e=this.tbody.closest(_t);return this.lockedTable&&(e=e.closest(".k-grid-container")),e},_createRowResizer:function(t){var o,r=this,l=e(t.currentTarget),n=t.currentTarget.clientHeight,i=t.offsetY,a=r.rowResizer,s=l.prev("tr:visible"),d=r._getResizerContainer();a||(a=r.rowResizer=e('<div class="k-resizer-wrap"><div class="k-row-resizer"></div></div>'),d.append(a),r._attachRowResizerEvents(),a.off(Je+V).on(Je+V,r._rowResizerDblClick.bind(r))),o=r._getResizerTop(l,d),0!==s.length&&n/2>i?s.hasClass(ze)||r._setupRowResizer(a,s,o):l.hasClass(ze)||r._setupRowResizer(a,l,o+n)},_detachRowResizerEvents:function(){this.rowResizer.off(je+V).off(Ue+V).off(Ke+V).off(Qe+V)},_mapResizedRows:function(t,o,r){var l=this;t.each(((t,n)=>{var i;if(o){var a=n.rowIndex,s=r,d=0,u=e(n).add(l.tbody.find(bt).eq(a));u.each(((e,t)=>{var o;t.style.height="",(o=c(t))>d&&(d=o)})),s<d?(s=d,l._clearCachedRowsHeight(u.eq(0))):l._cacheRowHeight(u.eq(0),s),u.css(Xe,s)}else n.style.height="",i=c(n),r>i?(n.style.height=r+mt,l._cacheRowHeight(e(n),r)):l._clearCachedRowsHeight(e(n))}))},_rowResizing:function(){var t,o,l,n,i=this,a=i.options;a.resizable&&!0===a.resizable.rows&&(i.tbody.parent().add(i.lockedTable).on(Ye+V,".k-grid-footer tr, .k-table-tbody tr",i._createRowResizer.bind(i)),i.rowResizing&&i.rowResizing.destroy(),t=i._getResizerContainer(),i.rowResizing=new r.Resizable(t,{handle:".k-resizer-wrap",start:function(t){n=e(t.currentTarget).data(bt),i.lockedTable&&(n=i._addLockedRowResizing(n)),n.addClass(ge),i._detachRowResizerEvents(),o=t.y.location,l=c(n)},resize:function(e){var r=l+e.y.location-o,a=0;n.length>1&&(a=i._getMinRowHeight(n)),r<a&&(r=a),n.css("height",r),i._setupRowResizer(i.rowResizer,n,i._getResizerTop(n,t)+r)},resizeend:function(){var e,t=c(n),o=!1;n.hasClass(_e)?(e=i.select(),n.length>1&&e.length>n.length&&(e=i.lockedTable.find(x+_e).not(n),o=!0)):e=n,i._mapResizedRows(e,o,t),n.removeClass(ge),i.rowResizer.removeClass(fe),i.rowResizer.addClass(ge),i._attachRowResizerEvents(),o&&(e=i.select()),l!=t&&i.trigger(Le,{row:n,rows:e,oldHeight:l,newHeight:t}),n=null}}))},_draggable:function(){var t=this,r=t.options.reorderable;if(!0===r||r&&r.columns){t._draggableInstance&&t._draggableInstance.destroy();var l=t.wrapper.children(".k-grid-header");l.addClass("k-grid-draggable-header"),l.attr("draggable",!0),t._draggableInstance=t.wrapper.kendoDraggable({group:o.guid(),autoScroll:!0,filter:t.content?".k-grid-header:first "+D:"table:first>.k-grid-header "+D,dragstart:function(){l.children(".k-grid-header-wrap").off("scroll"+V+"scrolling").on("scroll"+V+"scrolling",(function(e){t.virtualScrollable?o.scrollLeft(t.content.find(">.k-virtual-scrollable-wrap"),this.scrollLeft):o.scrollLeft(t.scrollables.not(e.currentTarget),this.scrollLeft)}))},dragend:function(){t._resetResizeHandleHeader(),l.children(".k-grid-header-wrap").off("scroll"+V+"scrolling")},drag:function(){t._hideResizeHandle()},hint:function(t){var r=t.attr(o.attr("title"));return r&&(r=o.htmlEncode(r)),e('<div class="k-reorder-clue k-drag-clue" />').html(r||t.attr(o.attr("field"))||t.text()).prepend(o.ui.icon({icon:"cancel",iconClass:"k-drag-status"}))}}).data("kendoDraggable")}},_reorderable:function(){let t=this,o=t.options.reorderable;(!0===o||o&&o.columns)&&(t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy(),t.wrapper.kendoReorderable({draggable:t._draggableInstance,dropFilter:D,allowDropAfterLastItem:!0,dragOverContainers:function(e,o){let r=Lo(t.columns);return!1!==r[e].lockable&&Bo(r,t.columns,e,o)>-1},inSameContainer:function(o){let r=e(o.source).parent()[0],l=e(o.target).parent()[0],n=o.sourceIndex,i=o.targetIndex,a=Lo(t.columns),s=a&&a[n]&&!!a[n].lockable;return t._isLocked()&&s&&(r=e(o.source.closest(".k-grid-header"))[0],l=e(o.target.closest(".k-grid-header"))[0]),r===l&&Bo(a,t.columns,n,i)>-1},change:function(e){let o=Lo(t.columns),r=o[e.oldIndex],l=Bo(o,t.columns,e.oldIndex,e.newIndex);t.trigger(Pe,{newIndex:l,oldIndex:_(r,o),column:r}),t.reorderColumn(l,r,"before"===e.position)}}))},_reorderHeader:function(e,t,o,r){for(var l,n,i=this,a=Mo(e[0],i.columns),s=Mo(t,i.columns),d=[],c=0;c<e.length;c++)e[c].columns&&(d=d.concat(e[c].columns));n=r?uo(r,r,"tr:eq("+a.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"):uo(i.lockedHeader,i.thead,"tr:eq("+a.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");var u,p,h,g,f,m,b=Ko(e).length,_=Ko([t]).length;d.length?(b>0&&0===_?(l="prepend",Ro(e,t,d,i.columns,i.lockedHeader.find("thead"),i.thead,this._groups(),l)):0===b&&_>0&&(l=0!==s.cell||!e[0].columns||t.columns||i._group?"append":"prepend",Ro(e,t,d,Qo(i.columns),i.thead,i.lockedHeader.find("thead"),this._groups(),l)),(t.columns||a.cell-s.cell>1||s.cell-a.cell>1)&&(t=zo(i.columns,t,e[0],o,i.columns))&&(b>0&&0===_?i._reorderHeader(d,t,o,i.thead):0===b&&_>0?i._reorderHeader(d,t,o,i.lockedHead):i._reorderHeader(d,t,o))):b!==_&&(u=n[a.cell],p=i.columns,h=b,g=Eo(Ko(p)),f=Eo(Qo(p)),m=u.rowSpan,u.rowSpan=h?g>f?m-(g-f)||1:m+(f-g):g>f?m+(g-f):m-(f-g)||1),co(n,a.cell,s.cell,o,e.length)},_reorderContent:function(t,o,r){var l,n,i,a=this,s=e(),d=t[0],c=yo(t),u=_(d,rr(a.columns)),p=_(o,rr(a.columns)),h=_(c[0],Zo(a.columns)),g=_(o,Zo(a.columns)),f=Ko(a.columns).length,m=!!o.locked,b=a.footer||a.wrapper.find(".k-grid-footer");if(l=n=g,o.hidden){var k=m?Ko(a.columns):Qo(a.columns);yo(k).length>0?(l=n=g=this._findClosestVisibleColumnIndex(k,p),i=yo(k.slice(p)).length>0):m?(g=a.lockedTable.find("colgroup"),l=a.lockedHeader.find("colgroup"),n=e(a.lockedFooter).find(">table>colgroup")):(g=a.tbody.prev(),l=a.thead.prev(),n=b.find(".k-grid-footer-wrap").find(">table>colgroup"))}a._hasFilterRow()&&co(a.wrapper.find(".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)"),u,p,r,t.length),h>=0&&co(uo(a.lockedHeader,a.thead.prev(),z),h,l,i||r,c.length),a.options.scrollable&&h>=0&&!a._hasVirtualColumns()&&co(uo(a.lockedTable,a.tbody.prev(),z),h,g,i||r,c.length),b&&b.length&&(h>=0&&co(uo(a.lockedFooter,b.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),h,n,i||r,c.length),co(b.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),u,p,r,t.length));var v=a.tbody.children(":not(.k-grouping-row,.k-detail-row)");a.lockedTable&&(f>p?f<=u&&kr(a.lockedTable.find(">tbody>tr.k-grouping-row:not([hidden])"),a.table.find(">tbody>tr.k-grouping-row:not([hidden])"),t.length):f>u&&kr(a.table.find(">tbody>tr.k-grouping-row:not([hidden])"),a.lockedTable.find(">tbody>tr.k-grouping-row:not([hidden])"),t.length),s=a.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)"));for(var C=0,w=v.length;C<w;C+=1)co(uo(s[C],v[C],">td:not(.k-group-cell,.k-hierarchy-cell)"),u,p,r,t.length)},_findClosestVisibleColumnIndex:function(e,t){var o=yo(e.slice(t)).length>0?e.slice(t):e.slice(0,t+1).reverse(),r=yo(o)[0];return _(r,yo(this.columns))},_autoFitLeafColumn:function(e){this.autoFitColumn(rr(this.columns)[e])},_hasReorderableRows:function(){return this.options.reorderable&&this.options.reorderable.rows},_draggableRows:function(){var t=this,r=t._checkBoxSelection||t.options.selectable&&!o.ui.Selectable.parseOptions(t.options.selectable).cell,l=!1,n=!(!t._isMobile&&!o.support.mobileOS);t._draggableRowsInstance&&t._draggableRowsInstance.destroy(),!1!==this.options.reorderable.rows.clickMoveClick&&this._hasDragHandleColumn&&(l=!0),t._draggableRowsInstance=t.tbody.kendoDraggable({holdToDrag:n,showHintOnHold:n,preventOsHoldFeatures:n,group:"row-draggable",autoScroll:!0,filter:(r?" > .k-selected":" > "+F)+(t._hasDragHandleColumn?" > [ref-grid-drag-cell]":""),hint:function(l){var n=e('<div class="k-reorder-clue k-drag-clue">'+o.ui.icon({icon:"cancel",iconClass:"k-drag-status"})+"</div>");if(r&&t.select().length>1&&t.lockedContent)n.append("<span>"+t.select().length/2+" "+C(t.options.messages.itemsSelected)+"</span>");else if(r&&t.select().length>1&&!t.lockedContent)n.append("<span>"+t.select().length+" "+C(t.options.messages.itemsSelected)+"</span>");else{var i=l.closest(F).clone();i.find("td.k-command-cell").remove(),i.find("td").each((function(e,t){n.append("<span>"+t.innerText.replace(/<(\/?)script([^>]*)>/gi,"")+"&nbsp;</span>")}))}return n},clickMoveClick:l,cursorOffset:{top:0,left:0}}).data("kendoDraggable")},_reorderableRows:function(){var t=this,r=t._checkBoxSelection||t.options.selectable&&!o.ui.Selectable.parseOptions(t.options.selectable).cell;t.tbody.data("kendoReorderable")&&t.tbody.data("kendoReorderable").destroy(),t.tbody.kendoReorderable({smartPosition:!1,draggable:t._draggableRowsInstance,dragOverContainers:function(o,l){var n=!0,i=e(F,t.content).eq(l);return r&&(n=!i.is(".k-selected")),n},inSameContainer:function(t){return!r||!e(t.target).is(".k-selected")},dropFilter:"> "+F,allowIcon:"insert-middle",orientation:"vertical",reorderDropCue:e('<div class="k-drop-hint k-drop-hint-h"><div class="k-drop-hint-start"></div><div class="k-drop-hint-line"></div></div>'),positionDropCue:function(e,t){var r=o.getOffset(t.children(R).eq(0)).left;e.css({transform:"translate(0,-50%)",left:r})},externalDraggable:function(e){var t=e.draggable;if(t)return t},change:function(e){t._triggerRowRorder(e)}})},_triggerRowRorder:function(e){var t=this,r={newIndex:"after"===e.position?e.newIndex+1:e.newIndex,oldIndex:e.oldIndex},l=e.element,n=t._checkBoxSelection||t.options.selectable&&!o.ui.Selectable.parseOptions(t.options.selectable).cell;r=n&&t.select().length>1?g(r,{rows:t.select()}):g(r,{row:l}),t.trigger(We,r)||t.reorderRows(n?t.select():l,r.newIndex)},reorderRowTo:function(e,t){var o=this,r=o.dataItem(e),l=e.index();t<0||t===l||o.trigger(We,{row:e,oldIndex:e.index(),newIndex:t})||o.dataSource.pushMove(t,[r])},reorderRows:function(e,t){var o=this,r=o.dataSource,l=o.tbody.children(F).length,n=o.dataItem(o.tbody.children(F).eq(t)),i=e.toArray().map((function(e){let t=o.dataItem(e);return t._isMoved=!0,t}));n?t=r.indexOf(n):(n=o.dataItem(o.tbody.children(F).eq(l-1)),t=r.indexOf(n)+1),t>=0&&(o._rowDropping=!0,r.pushMove(t,i),o._rowDropping=!1)},autoFitColumns:function(e){var t=this;e=e||t.columns;for(var o=0;o<e.length;o++){var r=e[o];r.columns?t.autoFitColumns(r.columns):t.autoFitColumn(r)}},autoFitColumn:function(t){var r,l,n,i,a,s,c,u,p,g,f=this,b=f.options,k=f.columns,v=f.lockedHeader?ir(f.lockedHeader.find(">table>thead")).filter(Co).length:0,C="col:not(.k-group-col):not(.k-hierarchy-col)",w="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if((t="number"==typeof t?k[t]:h(t)?m(Po(k),(function(e){return e===t}))[0]:m(Po(k),(function(e){return e.field===t}))[0])&&wo(t)){i=rr(k),c=t.minResizableWidth,r=_(t,i),(l=(n=(a=t.locked)?f.lockedHeader.children("table"):f.thead.parent()).find("[data-index='"+r+"']")).find("a.k-grid-column-menu, a.k-grid-filter-menu");var y=a?f.lockedTable:f.table,S=f.footer||e();f.footer&&f.lockedContent&&(S=a?f.footer.children(".k-grid-footer-locked"):f.footer.children(".k-grid-footer-wrap"));var x=S.find("table").first();f.lockedHeader&&!a&&(r-=v);for(var T=0;T<i.length&&i[T]!==t;T++)i[T].hidden&&r--;b.scrollable?(s=n.find(C).eq(r).add(y.children("colgroup").find(C).eq(r)).add(x.find("colgroup").find(C).eq(r)),a||(u=y.parent(),p=o.scrollLeft(u)),f._hasVirtualColumns()&&(r=_(t,f.virtualCols))):s=y.children("colgroup").find(C).eq(r);var H=n.add(y).add(x);$t.safari&&l.css("white-space","initial");var R=d(l);s.width(""),H.css("table-layout","fixed"),s.width(et),H.addClass("k-autofitting"),H.css("table-layout",""),g=d(l);var I=Math.ceil(Math.max(g,d(y.find("tr:not(.k-grouping-row)").eq(0).children(w).eq(r)),d(x.find(bt).eq(0).children(w).eq(r))))+1;if(c&&c>I&&(I=c),s.width(I),t.width=I,$t.safari&&l.css("white-space",""),b.scrollable){for(var E,A=n.find("col"),M=0,F=0,z=A.length;F<z;F+=1)if((E=A[F].style.width)&&-1==E.indexOf("%"))M+=parseInt(E,10);else{if(!A.eq(F).hasClass("k-group-col")){M=0;break}M+=parseInt(A.eq(F).width(),10)}M&&H.each((function(){this.style.width=M+mt}))}H.removeClass("k-autofitting"),p&&o.scrollLeft(u,p),f.trigger(Be,{column:t,oldWidth:R,newWidth:I}),f._applyLockedContainersWidth(),f._syncLockedContentHeight(),f._syncLockedHeaderHeight(),f._updateStickyColumns()}},reorderColumn:function(e,o,r){var l,n=this,i=go(o,n.columns),a=i?i.columns:n.columns,s=_(o,a),d=a[e],c=n.virtualScroll||{},u=!!d.locked,p=Ko(n.columns).length,h=m(rr(n.columns),(function(e){return e.groupHeaderColumnTemplate}));if(s!==e&&(o.locked||!u||1!=Qo(n.columns).length)&&(!o.locked||u||1!=p)){n._hideResizeHandle(),r===t&&(r=e<s);var g=[o];n._reorderHeader(g,d,r),n.lockedHeader&&(Go(n.thead),Go(n.lockedHeader)),d.columns&&(d=(d=rr(d.columns))[r?0:d.length-1]),o.columns&&(g=rr(o.columns)),n._reorderContent(g,d,r),l=(l=!!o.locked)!=u,o.locked=u,a.splice(r?e:e+1,0,o),a.splice(s<e?s:s+1,1),n._updateLockedCols(),n._updateCols(),n._templates(),n._updateColumnCellIndex(),n._updateColumnSorters(),h.length>0&&n._renderGroupRows(),n._updateTablesWidth(),n._applyLockedContainersWidth(),n._syncLockedHeaderHeight(),n._syncLockedContentHeight(),n._updateFirstColumnClass(),n._updateStickyColumns(),c.columns&&n.refresh(),l&&(u?n.trigger(Ve,{column:o}):n.trigger(qe,{column:o}))}},_updateColumnCellIndex:function(){var e=0;this.lockedHeader&&(e=Io(this.lockedHeader.find("thead"),Ko(this.columns))),Io(this.thead,Qo(this.columns),e)},lockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&!e.locked&&!e.hidden){e.sticky&&this.unstickColumn(t.indexOf(e));var o=Ko(t).length-1;this.reorderColumn(o,e,!1)}},unlockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&e.locked&&!e.hidden){var o=Ko(t).length;this.reorderColumn(o,e,!0)}},stickColumn:function(e){var t=this.columns;!(e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])||e.sticky||e.hidden||e.locked&&(this.unlockColumn(t.indexOf(e)),e.locked)||(e.sticky=!0,this._updateStickyColumns())},unstickColumn:function(e){var t=this.columns;(e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&e.sticky&&!e.locked&&!e.hidden&&(this._removeStickyAttributes([e]),this._removeStickyStyles(Yo(t)),e.sticky=!1,this._updateStickyColumns(),0===this._anyStickyColumns()&&(this._templates(),this._hasFilterRow()&&this._updateStickyFilterCells()))},cellIndex:function(t){var o=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(o=rr(Ko(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+o},_modelForContainer:function(t){(t=e(t)).is(bt)||"popup"===this._editMode()||(t=t.closest(bt));var r=t.attr(o.attr("uid"))||t.find("[ref='popup-edit-form']").attr(o.attr("uid"));return this.dataSource.getByUid(r)},_calculateColumnIndex:function(t){var o=this.cellIndex(t),r=0;return this._hasVirtualColumns()&&(r=(r=parseInt(e(t).closest(bt).find("td").first().attr("colspan"),10))>1?r-1:0),o+r},_editable:function(){let r=this,l=r.options.editable,n=o.support.mobileOS,i=!(!r._isMobile&&!n),s=n&&n.ios&&("chrome"===n.browser||"edge"===n.browser);if(r._isEditableEnabled=r._isEditableEnabled!==t?r._isEditableEnabled:!l.readonly,r._isEditableEnabled||r._removeEditableClickHandlers(),l&&r._isEditableEnabled){"incell"===r._editMode()?(r.table.add(r.lockedTable).on(je+V,A+">"+M,(function(t){let l=e(t.target);"incell"===r._editMode()&&l.hasClass("k-checkbox")&&l.prev().attr(o.attr("bind"))&&t.preventDefault()})),!1!==l.update&&(Kt&&r.wrapper.on($e+V,".k-edit-cell > input[type='checkbox']",(function(t){e(t.target).trigger("focus")})).on($e+V,".k-edit-cell",(function(t){e(t.target).is("input")||e(t.currentTarget).find("input[type='checkbox']").trigger("focus")})).on(je+V,"tr:not(.k-grouping-row) > td",(function(t){var o=r._editContainer;o&&o[0]&&(e.contains(o[0],t.target)||o[0]===t.target)?r._mousedownOnEditCell=!0:r._mousedownOnEditCell=!1})),r.editableUserEvents=new o.UserEvents(r.wrapper,{filter:"tr:not(.k-grouping-row) > td",allowSelection:!0,preventDefault:s,supportDoubleTap:i,fastTap:i,[i?"doubleTap":"tap"]:function(t){var o=e(t.target),l=r.lockedTable&&o.closest("table")[0]===r.lockedTable[0];r._mousedownOnEditCell=!1,o.hasClass("k-hierarchy-cell")||o.hasClass("k-detail-cell")||o.hasClass("k-group-cell")||o.hasClass("k-edit-cell")||o.has(".k-grid-remove-command").length||o.closest("tbody")[0]!==r.tbody[0]&&!l||e(t.target).is(":input")||(r.editable?r.editable.end()?(e(a()).trigger("blur"),r.closeCell(),r._requestInProgress||r.editCell(o)):r._scrollVirtualWrapper():r.editCell(o))}}),r.wrapper.on("focusin"+V,(function(){e.contains(this,a())||(clearTimeout(r.timer),r.timer=null)})).on("focusout"+V,(function(t){var o=!0;(Kt&&r._mousedownOnEditCell||r._virtualColScroll)&&(o=!1),r._mousedownOnEditCell=!1,o&&(r.timer=setTimeout((function(){!function(){let t=a(),o=r._editContainer;o&&o[0]&&!e.contains(o[0],t)&&o[0]!==t&&!e(t).closest(".k-animation-container").length&&(r.editable.end()?(r.closeCell(),r._toggleToolbarEditingItemsVisibility()):r._scrollVirtualWrapper())}()}),1))})))):!1!==l.update&&(r._editCommandClickHandler=r._editCommandClick.bind(r),r.wrapper.on($e+V,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command",r._editCommandClickHandler),r._isVirtualInlineEditable()&&r.wrapper.on("focusout"+V,"tr:not(.k-grouping-row) > td",(function(){r.editable&&!r.editable.end()&&r._scrollVirtualWrapper()}))),r._removeCommandClickHandler=r._removeCommandClick.bind(r),r.wrapper.on($e+V,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command",r._removeCommandClickHandler)}},_getLastSelectedItemModel:function(){const e=this;if(!e.options.selectable)return;const t=e.getSelectedData();if(!t||!t.length)return;const o=t[t.length-1];return e.dataSource.getByUid(o.uid)},_removeToolbarClick:function(e){e.event?(e.event.preventDefault(),e.event.stopPropagation()):e.preventDefault();const t=this,r=this._getLastSelectedItemModel();if(!r)return;const l=t.tbody.children("["+o.attr("uid")+"="+r.uid+"]");t.removeRow(l),t.one(te,(()=>{t._toggleToolbarEditingItemsVisibility()}))},_editToolbarClick:function(e){e.event?(e.event.preventDefault(),e.event.stopPropagation()):e.preventDefault();if("incell"===this._editMode())return;const t=this._getLastSelectedItemModel();t&&this.editRow(t)},_editCommandClick:function(t){let o=e(t.currentTarget);this._belongsToGrid(o)&&(t.preventDefault(),this.editRow(o.closest(bt)))},_removeCommandClick:function(t){let o=this,r=o.options.editable,l=e(t.currentTarget);o._belongsToGrid(l)&&(!1!==r.destroy?(t.preventDefault(),t.stopPropagation(),o.removeRow(l.closest(bt))):(t.stopPropagation(),o._confirmation()||t.preventDefault()),o._toggleToolbarEditingItemsVisibility())},editCell:function(t){t=e(t);let o=this,r=rr(o.columns)[o._calculateColumnIndex(t)],l=o._modelForContainer(t);if(o.closeCell(),l&&Hr(r,l)&&!r.command){if(o.trigger(O,{model:l}))return;o._attachModelChange(l),o._editContainer=t,o._shouldClearEditableState&&o._clearEditableState(),o.editable=t.addClass("k-edit-cell").kendoEditable({fields:nr(r,o._isAdaptive()?"auto":"none"),model:l,size:o.options.size,target:o,change:function(e){o.trigger(G,{values:e.values,container:t,model:l})&&e.preventDefault()},skipFocus:!(!o._isVirtualIncellEditable()&&!o._hasVirtualColumns()||!o._editableState)}).data("kendoEditable");let e=t.parent().addClass("k-grid-edit-row");!0===l.new&&(e.addClass("k-grid-add-row"),delete l.new),o.lockedContent&&(wr(e[0],o._relatedRow(e).addClass("k-grid-edit-row")[0]),e.hasClass("k-grid-add-row")&&o._relatedRow(e).addClass("k-grid-add-row"),o._syncLockedScroll()),o.trigger(q,{container:t,model:l}),o._toggleToolbarEditingItemsVisibility()}},enableEditing:function(){let e=this,t=e.wrapper.find(".k-grid-toolbar");if(!e._isEditableEnabled){e._isEditableEnabled=!0,e._editable();let o=t.find(".k-grid-add").getKendoButton(),r=t.find(".k-grid-edit-command").getKendoButton(),l=t.find(".k-grid-remove-command").getKendoButton(),n=t.find(".k-grid-cancel-changes").getKendoButton(),i=t.find(".k-grid-save-changes").getKendoButton(),a=t.find(".k-grid-cancel-command").getKendoButton(),s=t.find(".k-grid-save-command").getKendoButton();o&&o.bind("click",e._createClickHandler),r&&r.bind("click",e._editClickHandler),l&&l.bind("click",e._destroyClickHandler),n&&n.bind("click",e._cancelClickHandler),i&&i.bind("click",e._saveClickHandler),a&&a.bind("click",e._editCancelClickHandler),s&&s.bind("click",e._updateClickHandler)}e._toggleToolbarEditingItemsVisibility()},disableEditing:function(){let e=this;e._isEditableEnabled&&("incell"===e._editMode()?e.closeCell():e.cancelRow(),e._clearEditableState(),e._destroyEditable(),e.editableUserEvents&&(e.editableUserEvents.destroy(),e.editableUserEvents=null),e._removeEditableClickHandlers(),e._isEditableEnabled=!1,e._toggleToolbarEditingItemsVisibility())},_removeEditableClickHandlers:function(){let e=this,t=e.wrapper.find(".k-grid-toolbar");e.wrapper.off($e+V,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command",e._editCommandClickHandler),e.wrapper.off($e+V,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command",e._removeCommandClickHandler),t.off($e+V,".k-grid-add",e._createClickHandler),t.off($e+V,".k-grid-edit-command",e._editClickHandler),t.off($e+V,".k-grid-remove-command",e._destroyClickHandler);let o=t.find(".k-grid-add").getKendoButton(),r=t.find(".k-grid-edit-command").getKendoButton(),l=t.find(".k-grid-remove-command").getKendoButton(),n=t.find(".k-grid-cancel-changes").getKendoButton(),i=t.find(".k-grid-save-changes").getKendoButton(),a=t.find(".k-grid-cancel-command").getKendoButton(),s=t.find(".k-grid-save-command").getKendoButton();o&&o.unbind("click"),r&&r.unbind("click"),l&&l.unbind("click"),n&&n.unbind("click"),i&&i.unbind("click"),a&&a.unbind("click"),s&&s.unbind("click"),e._editCommandClickHandler=null,e._removeCommandClickHandler=null},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),r=e[0].offsetWidth>t[0].clientWidth?o.support.scrollbar():0;this.lockedContent.height(t[0].offsetHeight-r)},_syncLockedScroll:function(){this.lockedContent[0].scrollTop=this.content[0].scrollTop,this.virtualScrollable&&(this.lockedContent[0].scrollTop=this.wrapper.find(".k-virtual-scrollable-wrap")[0].scrollTop)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children("table"),t=this.thead.parent();this._adjustRowsHeight(e,t),function(e,t){if(e=e[0],t=t[0],e.rows.length!==t.rows.length){var o,r,l=e.offsetHeight,n=t.offsetHeight;l>n?(o=t.rows[t.rows.length-1],Bt.test(o.className)&&(o=t.rows[t.rows.length-2]),r=l-n):(o=e.rows[e.rows.length-1],Bt.test(o.className)&&(o=e.rows[e.rows.length-2]),r=n-l),o.style.height=o.offsetHeight+r+mt}}(e,t)}},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){let e=this;const t=e._editContainer&&e._editContainer.length&&e._editContainer.closest(".k-window").length?"kendoWindow":"kendoActionSheet";let o=function(){if(e.editable){let o=e.editView?e.editView.element:e._editContainer,r=e._editContainer.data(t);o&&(r&&(o=r.wrapper),o.off($e+V,".k-grid-cancel-command, button[ref-cancel-button], [ref-actionsheet-action-button]:not(.k-button-solid-primary)",e._editCancelClickHandler),o.off($e+V,".k-grid-save-command, button[ref-update-button], [ref-actionsheet-action-button].k-button-solid-primary",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,r&&r.destroy(),e._editContainer=null,e._destroyEditView(),e._editableIsClosing=null}};e.editable&&("popup"!==e._editMode()||e._isMobile?o():e._editableIsClosing?e._editContainer.data(t).bind("deactivate",o):(e._editableIsClosing=!0,e._editContainer.data(t).bind("deactivate",o).close())),e._confirmDialog&&(e._confirmDialog.close(),e._confirmDialog.destroy(),e._confirmDialog=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,o=e._modelForContainer(t);o&&o.unbind(J,e._modelChangeHandler)},closeCell:function(e){let t,o,l,n,i=this,a=i._editContainer;if(a&&(l=i._modelForContainer(a),!e||!i.trigger("cancel",{container:a,model:l}))){if(i.trigger(Q,{type:e?"cancel":"save",model:l,container:a}),a.removeClass("k-edit-cell"),t=rr(i.columns)[i._calculateColumnIndex(a)],n=i.editable&&i.editable.validatable&&i.editable.validatable.errors(),e&&l.dirtyFields&&l.dirtyFields[t.field]&&n.length&&delete l.dirtyFields[t.field],o=a.parent().removeClass("k-grid-edit-row"),o.hasClass("k-grid-add-row")&&o.removeClass("k-grid-add-row"),i.lockedContent){const e=i._relatedRow(o);e.removeClass("k-grid-edit-row"),e.hasClass("k-grid-add-row")&&e.removeClass("k-grid-add-row")}if(i._destroyEditable(),i._displayCell(a,t,l),i._shouldClearEditableState&&i._clearEditableState(),i.trigger("itemChange",{item:o,data:l,ns:r}),i.lockedContent){const e=o&&o.data("uid"),t=(i._cachedRowsHeight&&i._cachedRowsHeight[e])??"";wr(o.css(Xe,t)[0],i._relatedRow(o).css(Xe,t)[0])}}},_displayCell:function(e,t,r){var l={storage:{},count:0},n=g({},o.Template,this.options.templateSettings),i=o.template(this._cellTmpl(t,l),n);l.count>0&&(i=i.bind(l.storage)),e.empty().html(i(r))},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(o){var r,l,n,i=this,a=i._editMode();"incell"!==a&&i.cancelRow(),o=e(o),i.lockedContent&&(o=o.add(i._relatedRow(o))),o=o.hide(),i.dataSource._isGroupPaged()&&i._removeGroupIfEmpty(o),(r=i._modelForContainer(o))!=t&&r.hasOwnProperty("_isMoved")&&delete r._isMoved,r&&!i.trigger(W,{row:o,model:r})?(n=i.dataSource.options.schema,i._selectedIds&&n&&n.model&&(l=r[i._getSchemaIdField()],delete i._selectedIds[l]),i.dataSource.remove(r),"inline"!==a&&"popup"!==a||i.dataSource.sync()):"incell"===a&&i._destroyEditable()},_editMode:function(){let e="incell",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){let r,l=this;t instanceof n?r=t:(t=e(t),r=l._modelForContainer(t));let i,a=l._editMode();l.cancelRow(),r&&(t=l.tbody.children("["+o.attr("uid")+"="+r.uid+"]"),l._attachModelChange(r),"popup"===a?l._createPopupEditor(r):"inline"===a?l._createInlineEditor(t,r):"incell"===a&&e(t).children(R).each((function(){let t=e(this),o=rr(l.columns)[l._calculateColumnIndex(t)];if(r=l._modelForContainer(t),r&&(!r.editable||r.editable(o.field))&&o.field&&!o.selectable)return l.editCell(t),!1})),i=l.editView?l.editView.element:"popup"===a?l._editContainer.parent():l._editContainer,i&&(this._editCancelClickHandler||(this._editCancelClickHandler=this._editCancelClick.bind(this)),i.on($e+V,".k-grid-cancel-command, button[ref-cancel-button], [ref-actionsheet-action-button]:not(.k-button-solid-primary)",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=this._editUpdateClick.bind(this)),i.on($e+V,".k-grid-save-command, button[ref-update-button], [ref-actionsheet-action-button].k-button-solid-primary",this._editUpdateClickHandler)),l._toggleToolbarEditingItemsVisibility())},_editUpdateClick:function(t){t.preventDefault(),t.stopPropagation?t.stopPropagation():t.event&&t.event.stopPropagation&&t.event.stopPropagation();const o=e(t.currentTarget);o.is("[ref-update-button]")&&(o.addClass("k-disabled"),o.attr("aria-disabled",!0)),this.saveRow(),this._preventOnCloseEditableChanges="popup"===this._editMode(),this.one(te,(()=>{this._toggleToolbarEditingItemsVisibility()}))},_editCancelClick:function(t){var o=this,r=o.options.navigatable,l=o.editable.options.model,n=o.editView?o.editView.element:o._editContainer;if(t.preventDefault(),t.stopPropagation?t.stopPropagation():t.event&&t.event.stopPropagation&&t.event.stopPropagation(),!o.trigger("cancel",{container:n,model:l})){var i=o.items().index(e(o.current()).parent());o.cancelRow(),r&&(o._setCurrent(o.items().eq(i).children().filter(M).first()),Sr(o.table,!0)),this._toggleToolbarEditingItemsVisibility()}},_editFields:function(e,t){for(var o,r=[],l=0;l<e.length;l++)(o=e[l]).selectable||o.command||Hr(o,t)&&r.push(nr(o,this._isAdaptive()?"auto":"none"));return r},_createPopupEditor:function(t){var l,n,i,a,s,d,c,u,p,f,m,b,_,k=this,v="<div "+o.attr("uid")+'="'+t.uid+'" ref="popup-edit-form"><'+(k._isMobile?'ul class="k-edit-form-container k-listgroup k-listgroup-flush">':'div class="k-edit-form-container">'),w=rr(k.columns),y=o.guid(),S=k.options.editable,x=S.template,T=h(S)?S.window:{},H=g({},o.Template,k.options.templateSettings);const R=k._isAdaptive();if(!k.trigger(O,{model:t})){if(T=T||{},x)for(typeof x===rt&&(x=o.unescape(x)),v+=o.template(x,H)(t),i=0,a=w.length;i<a;i++)(l=w[i]).command&&(f=yr(l.command,"edit"))&&(n=f);else for(i=0,a=w.length;i<a;i++)(l=w[i]).selectable||(l.command?l.command&&(f=yr(l.command,"edit"))&&(n=f):k._isMobile&&(v+='<li class="k-item k-listgroup-item">',Hr(l,t)?(v+='<label class="k-label k-listgroup-form-row">',v+='<span class="k-item-title k-listgroup-form-field-label">'+(l.title&&(k.options.encodeTitles?Lr(l.title,!0):l.title)||l.field||"")+"</span>",v+='<div class="k-listgroup-form-field-wrapper" id="'+l.field+"_"+y+'" '+o.attr("container-for")+'="'+l.field+'"></div>',v+="</label>"):(b={storage:{},count:0},s=o.template(k._cellTmpl(l,b),H),b.count>0&&(s=s.bind(b.storage)),v+='<label class="k-label k-listgroup-form-row k-no-click">',v+='<span class="k-item-title k-listgroup-form-field-label">'+(l.title&&(k.options.encodeTitles?Lr(l.title,!0):l.title)||l.field||"")+"</span>",v+='<span class="k-no-editor k-listgroup-form-field-wrapper">'+s(t)+"</span>",v+="</label>"),v+="</li>"));if(n&&h(n)&&(h(n.text)&&(d=n.text.update,c=n.text.cancel),h(n.iconClass)&&(u=n.iconClass.update,p=n.iconClass.cancel),n.attr&&(m=n.attr)),k._isMobile){v+="</ul></div>";let e=C(k.options.messages.commands.cancel),t=C(k.options.messages.commands.update);k.editView=k.pane.append("<div data-"+o.ns+'role="view" class="k-grid-edit-form"><div data-'+o.ns+' class="k-appbar k-appbar-primary">'+o.html.renderButton(`<button class="k-header-cancel k-grid-cancel-command" title="${e}" aria-label="${e}"></button>`,{fillMode:"flat",icon:"chevron-left"})+'<span class="k-spacer"></span>'+`<span>${C(k.options.messages.commands.edit||"Edit")}</span><span class="k-spacer"></span>`+o.html.renderButton(`<button class="k-header-done k-grid-save-command" title="${t}" aria-label="${t}"></button>`,{fillMode:"flat",icon:"check"})+"</div><div data-"+o.ns+'role="content" class="'+Qt+'">'+v+"</div></div>"),_=k._editContainer=k.editView.element.find("[ref='popup-edit-form']")}else{let o=e(k._createButton({name:"update",text:d,attr:m,iconClass:u,size:"medium",skipCommandClass:!0})).attr("ref-update-button",""),r=e(k._createButton({name:"canceledit",text:c,attr:m,iconClass:p,size:"medium",skipCommandClass:!0})).attr("ref-cancel-button","");v+="</div>",_=k._editContainer=R?e(v).appendTo("body").eq(0).kendoActionSheet({modal:!0,adaptive:!0,title:t.id?"Edit record":"Add new record",fullscreen:k.smallMQL.mediaQueryList.matches,closeButton:!0,actionButtons:[{text:"Cancel",icon:"cancel"},{text:"Save",icon:"save",themeColor:"primary"}],open:function(e){e.sender.element.removeClass("k-popup"),k.editable.element.focus()},close:function(o){if(o.sender.element.trigger("focus"),k._preventOnCloseEditableChanges||!k.trigger("cancel",{container:_,model:t})){var r=k.items().index(e(k.current()).parent());k._preventOnCloseEditableChanges||(k._editableIsClosing=!0,k.cancelRow(!1,!0)),k.options.navigatable&&(k._setCurrent(k.items().eq(r).children().filter(M).first()),Sr(k.table,!0)),k._toggleToolbarEditingItemsVisibility()}else o.preventDefault()}}):e(v).appendTo(k.wrapper).eq(0).kendoWindow(g({modal:!0,resizable:!1,draggable:!0,title:k.options.messages.commands.edit||"Edit",_footerTemplate:()=>'<div class="k-actions k-actions-start k-actions-horizontal k-window-actions">'+o[0].outerHTML+r[0].outerHTML+"</div>",visible:!1,close:function(o){if(o.userTriggered){if(o.sender.element.trigger("focus"),k.trigger("cancel",{container:_,model:t}))return void o.preventDefault();var r=k.items().index(e(k.current()).parent());k._editableIsClosing=!0,k.cancelRow(),k._toggleToolbarEditingItemsVisibility(),k.options.navigatable&&(k._setCurrent(k.items().eq(r).children().filter(M).first()),Sr(k.table,!0))}}},T))}x||k._isMobile?(k.editable=k._editContainer.kendoEditable({fields:k._isMobile&&!x?k._editFields(w,t):null,model:t,clearContainer:!1,target:k,skipFocus:!0}).data("kendoEditable"),R&&k.editable.element.find(".k-edit-form-container").removeClass("k-edit-form-container")):(k.editable=new r.Form(k._editContainer.find(".k-edit-form-container"),{items:k._editFields(w,t),buttonsTemplate:()=>"",formData:t,size:k._isAdaptive()?"large":"medium"}).editable,k._editContainer.append(undefined),R&&k.editable.element.removeClass("k-edit-form-container")),k._openPopUpEditor(R),k.trigger(q,{container:_,model:t})}},_openPopUpEditor:function(e){var t=this;const o=e?"kendoActionSheet":"kendoWindow";var r=t._editContainer?t._editContainer.data(o):null,l=(t.options.editable||{}).window||{};this._isMobile?this.pane.navigate(this.editView,this._editAnimation):r&&(e||l.position?e&&r.fullscreen(t.smallMQL.mediaQueryList.matches):r.center(),r.open())},_createInlineEditor:function(t,r){var l,n,i,a=this,s=[];a.trigger(O,{model:r})||(a.lockedContent&&(t=t.add(a._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each((function(){if(n=e(this),!(l=rr(a.columns)[a._calculateColumnIndex(n)]).command&&Hr(l,r))s.push(nr(l,a._isAdaptive()?"auto":"none")),n.attr(o.attr("container-for"),l.field),n.empty();else if(l.command){var t,d,c,u,p;if(i=yr(l.command,"edit"))n.empty(),h(i)&&(h(i.text)&&(t=i.text.update,d=i.text.cancel),h(i.iconClass)&&(c=i.iconClass.update,u=i.iconClass.cancel),i.attr&&(p=i.attr)),e(a._createButton({name:"update",text:t,attr:p,iconClass:c,skipTabIndex:!0})+a._createButton({name:"canceledit",text:d,attr:p,iconClass:u,skipTabIndex:!0})).appendTo(n)}})),a._editContainer=t,a._editContainer.addClass("k-grid-edit-row"),!0===r.new&&(a._editContainer.addClass("k-grid-add-row"),delete r.new),a._shouldClearEditableState&&a._clearEditableState(),a.editable=new o.ui.Editable(a._editContainer,{target:a,fields:s,size:a.options.size,model:r,skipFocus:a._isVirtualInlineEditable()&&a._editableState&&!!a._editableState.field||a._hasVirtualColumns(),clearContainer:!1}),t.length>1&&(wr(t[0],t[1]),a._applyLockedContainersWidth(!0)),a.trigger(q,{container:t,model:r}))},cancelRow:function(e){var t,r=this,l=r._editContainer;if(l){if(!(t=r._modelForContainer(l))||e&&r.trigger("cancel",{container:l,model:t}))return;r._destroyEditable(),r.dataSource.cancelChanges(t),r._clearEditableState(),"popup"!==r._editMode()?r._displayRow(l):r._displayRow(r.tbody.find("["+o.attr("uid")+"="+t.uid+"]")),r._aria()}},saveRow:function(){var t,o=this,r=this._editContainer,l=this._modelForContainer(r),n=e.Deferred();return r&&this.editable?!(t=o.editable&&o.editable.end())||this.trigger(G,{container:r,model:l})?(t||o._scrollVirtualWrapper(),n.reject().promise()):(o._clearEditableState(),this.dataSource.sync()):n.resolve().promise()},_displayRow:function(t){var l,n,i,a=this,s=a._modelForContainer(t),d=t.hasClass(_e),c=t.hasClass("k-table-alt-row");s&&(a.lockedContent&&(l=e((c?a.lockedAltRowTemplate:a.lockedRowTemplate)(s)),o.applyStylesFromKendoAttributes(l,["display"]),a._relatedRow(t.last()).replaceWith(l)),n=e((c?a.altRowTemplate:a.rowTemplate)(s)),t.is(":visible")||n.hide(),o.applyStylesFromKendoAttributes(n,["display"]),a._anyStickyColumns()&&o.applyStylesFromKendoAttributes(n,["left","right"]),t.replaceWith(n),a.trigger("itemChange",{item:n,data:s,ns:r}),l&&l.length&&a.trigger("itemChange",{item:l,data:s,ns:r}),d&&(a.options.selectable||a._checkBoxSelection)&&a.select(n.add(l)),l&&wr(n[0],l[0]),(i=n.next()).hasClass("k-detail-row")&&i.is(":visible")&&o.ui.icon(n.find(".k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon"),{icon:"caret-alt-down"}))},_showMessage:function(t,r){var l=this;return l._isMobile?((l._confirmDialog=new o.ui.Confirm(e("<div />").appendTo(document.body),{modal:{preventScroll:!0},closable:!1,title:!1,content:t.title,messages:{okText:t.confirmDelete,cancel:t.cancelDelete},open:function(){l.content&&(l.content.data(ct,l.content.css(ct)),l.content.css(ct,"hidden"))},close:function(){l.content&&l.content.css(ct,l.content.data(ct))}})).result.done((function(){l._removeRow(r)})).fail((function(){var e=l._confirmDialog;e&&(e.close(),e.destroy())})),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,o=t.options.editable,r=!0===o||typeof o===rt?t.options.messages.editable.confirmation:o.confirmation;return h(o)&&typeof o.mode===rt&&typeof r!==ot&&typeof r!==rt&&!1!==r&&(r=t.options.messages.editable.confirmation),!1===r||null==r||(typeof r===ot&&(r=r(t._modelForContainer(e))),t._showMessage({confirmDelete:o.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:o.cancelDelete||t.options.messages.editable.cancelDelete,title:!0===r?t.options.messages.editable.confirmation:r},e))},cancelChanges:function(){var e=this;e._cachedRowsHeight&&(e._mapCachedRowsHeight("getByUid","id"),e._shouldMapHights=!0),e.dataSource.cancelChanges(),e._isVirtualEditable()&&e._virtualPageToTop((function(){e.virtualScrollable.scrollToTop()}))},saveChanges:function(){var e=this,t=e.editable&&e.editable.end();!t&&e.editable||e.trigger(ee)?t||e._scrollVirtualWrapper():e.dataSource.sync()},addRow:function(){var e,t,o=this,r=o.dataSource,l=o._editMode(),n=o.options.editable.createAt||"",i=r.pageSize(),a=r.view()||[],s=n.toLowerCase()===lt,d=o._isVirtualEditable();o.editable&&o.editable.end()||!o.editable?("incell"!=l&&o.cancelRow(),e=r.indexOf(a[0]),s&&(e+=a.length,i&&!r.options.serverPaging&&i<=a.length&&(e-=1)),e<0&&(e=r.page()>r.totalPages()?(r.page()-1)*i:0),o.options.navigatable&&"incell"==l&&o._removeCurrent(),d?o._virtualAddRow():((t=r.insert(e,{})).new=!0,o._editModel(t))):o._scrollVirtualWrapper()},_editModel:function(e){var t=this,r=t.options.editable.createAt||"",l=t._editMode();if(e){var n=e.uid,i=(t.lockedContent?t.lockedTable:t.table).find("tr["+o.attr("uid")+"="+n+"]"),a=i.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(t._firstEditableColumnIndex(i));"inline"===l&&i.length?t.editRow(i):"popup"===l?t.editRow(e):a.length&&t.editCell(a),"bottom"==r.toLowerCase()&&t.lockedContent&&(t.lockedContent[0].scrollTop=t.content[0].scrollTop=t.table[0].offsetHeight)}},_virtualAddRow:function(){var e=this,t=(e.options.editable.createAt||"").toLowerCase()===lt;e._clearEditableState(),t?e._virtualAddRowAtBottom():e._virtualAddRowAtTop()},_virtualAddRowAtTop:function(){var e,t=this,o=t.dataSource,r=t.virtualScrollable;1===o.page()?((e=o.insert(0,{})).new=!0,t._editModel(e),r.scrollToTop()):t._virtualPageToTop((function(){(e=o.insert(0,{})).new=!0,t._editModel(e),r.scrollToTop()}))},_virtualAddRowAtBottom:function(){var e,t=this,o=t.dataSource,r=t.virtualScrollable,l=o.total();o.at(l-1)instanceof n?((e=o.insert(l,{})).new=!0,t._virtualPageToBottom((function(){t._editModel(e),r.scrollToBottom()}))):t._virtualPageToBottom((function(){(e=o.insert(l,{})).new=!0,t._editModel(e),r.scrollToBottom()}))},_virtualPageToTop:function(e){this._virtualPage(0,this.dataSource.take(),(function(){e()}))},_virtualPageToBottom:function(e){var t=this.dataSource,o=t.take(),r=t.total(),l=r>o?r-o:0;this._virtualPage(l,o,(function(){e()}))},_virtualPage:function(e,t,o){var r=this;r._isVirtualEditable()&&(r.virtualScrollable._preventScroll=!0,r.virtualScrollable._page(e,t,o))},_firstEditableColumnIndex:function(e){var t,o,r,l=rr(this.columns),n=this._modelForContainer(e);for(o=0,r=l.length;o<r;o++)if(t=l[o],n&&(!n.editable||n.editable(t.field))&&!t.command&&t.field&&!0!==t.hidden)return o;return-1},_clickAdd:function(e){e.preventDefault&&e.preventDefault(),this.addRow(),this._toggleToolbarEditingItemsVisibility()},_clickCancel:function(e){e.preventDefault&&e.preventDefault(),this.cancelChanges(),this._toggleToolbarEditingItemsVisibility()},_clickExcel:function(t){var o=this,r=e.Deferred();t.preventDefault&&t.preventDefault(),o._isExport=!0,o._progress(!0),setTimeout((()=>{o.saveAsExcel(r),r.always((()=>{o._progress(!1),o._isExport=!1}))}),1)},_clickPdf:function(e){var t=this;e.preventDefault&&e.preventDefault(),t._isExport=!0,t._pdfInitialized=!0,t._progress(!0);var o=t.saveAsPDF();o?o.done((function(){t._progress(!1),t._isExport=!1,t._pdfInitialized=!1})):(t._progress(!1),t._isExport=!1,t._pdfInitialized=!1)},_clickSave:function(e){e.preventDefault&&e.preventDefault(),this.saveChanges(),this.one(te,(()=>{this._toggleToolbarEditingItemsVisibility()}))},_searchInput:function(e){var t=this,o=e.currentTarget;clearTimeout(t._searchTimeOut),t._searchTimeOut=setTimeout((function(){t._searchTimeOut=null;var e=t.options,r=e.search?e.search.fields:null,l={filters:[],logic:"or"},n=o.value;if(r||(r=lr(e.columns)),t.dataSource.options.endless&&(t.dataSource.options.endless=null,t._endlessPageSize=t.dataSource.options.pageSize),n)for(var i=0;i<r.length;i++)t._pushExpression(l.filters,r[i],n);else l={};t.dataSource.filter(l)}),300)},_pasteToolbarDropDown:function(){var e=this;e.wrapper.find(".k-grid-paste-action").length&&(e.pasteActionsDropDownList=e.wrapper.find(".k-grid-paste-action").kendoDropDownList({dataSource:[{value:"insert",text:"Paste (Insert)"},{value:"replace",text:"Paste (Replace)"}],dataTextField:"text",dataValueField:"value",_allowFilterPaste:!1}).data("kendoDropDownList"))},_pushExpression:function(e,t,r){var l=this,n=l.dataSource.options.serverFiltering,i={string:"contains",number:"gte",date:"gte",enums:"eq",boolean:"eq"},a=t.name||t,s=t.operator,d=l.dataSource.reader.model&&l.dataSource.reader.model.fields,c=d&&d[a],u=c&&c.parse,p={field:a,operator:s||i.string,value:r};(s||n)&&c&&o.isFunction(u)&&null!==u(r)&&g(p,{operator:s||i[c.type],value:u(r)}),n&&c&&o.isFunction(u)&&null===u(r)||e.push(p)},_hasTool:function(e){const t=this.wrapper.find(`.k-grid-toolbar ${e}`);return{present:t.length>0,tool:t}},_initToolbarItemsPopups:function(){const e=this,t=e._hasTool(".k-toolbar-button.k-grid-column-menu[ref-toolbar-tool]"),o=e._hasTool(".k-toolbar-button.k-grid-sort-tool[ref-toolbar-tool]"),r=e._hasTool(".k-toolbar-button.k-grid-filter-tool[ref-toolbar-tool]"),l=e._hasTool(".k-toolbar-button.k-grid-column-chooser[ref-toolbar-tool]"),n=e._hasTool(".k-toolbar-button.k-grid-group-tool[ref-toolbar-tool]");if(t.present&&e._globalColumnsMenu(t.tool),l.present&&e._columnChooserTool(l.tool),o.present&&(e._toggleBadge(o.tool,e.dataSource.sort()),e._sortToolbarTool(o.tool)),r.present&&(e._toggleBadge(r.tool,e.dataSource.filter()),e._filterToolbarTool(r.tool)),n.present){const t=e.dataSource.group();e._toggleBadge(n.tool,t&&t.length),e._groupToolbarTool(n.tool)}},_toolbar:function(){var t,r,l=this,n=l.wrapper,i=l.options.toolbar;if(i){if(l._createClickHandler=l._addClickHandler=l._clickAdd.bind(l),l._editClickHandler=l._editToolbarClick.bind(l),l._destroyClickHandler=l._removeToolbarClick.bind(l),l._editCancelClickHandler=l._editCancelClick.bind(l),l._updateClickHandler=l._editUpdateClick.bind(l),l._cancelClickHandler=l._clickCancel.bind(l),l._saveClickHandler=l._clickSave.bind(l),l._excelClickHandler=l._clickExcel.bind(l),l._pdfClickHandler=l._clickPdf.bind(l),l._serachHandler=l._searchInput.bind(l),(t=l.wrapper.find(".k-grid-toolbar")).length?l._attachToolbarClicks():(t=e('<div class="k-grid-toolbar k-toolbar" />').prependTo(n),typeof i===rt||v(i)?(typeof i===rt&&(i=o.template(i).bind(l)),t.html(i({grid:l})),l._attachToolbarClicks()):b(i)?(r=l._processItems(i),t.kendoToolBar({navigateOnTab:!l.options.navigatable,size:l.options.size,items:r})):h(i)&&t.kendoToolBar({navigateOnTab:!l.options.navigatable,size:l.options.size,items:l._processItems(i.items||[]),overflow:i.overflow})),t.on(at+V,".k-grid-search input",this._serachHandler),i.overflow&&"section"===i.overflow.mode){const e=t.data("kendoToolBar");e.bind("overflowOpen",(function(){const t=e.overflowSection.element.find(".k-toolbar-items-list");l._toggleToolbarEditingItemsVisibility(t?.children(to))}))}l._toggleToolbarEditingItemsVisibility()}},_toggleToolbarEditingItemsVisibility:function(t){const r=this,l=r.dataSource.hasChanges(),n=r.wrapper.find(".k-grid-toolbar");if(!n.length)return;let i;i=r.options.toolbar&&r.options.toolbar.overflow&&"scroll"===r.options.toolbar.overflow.mode?n.find(".k-toolbar-items").children(to):t||n.children(to);const a=r.options.toolbar&&r.options.toolbar.showInactiveTools||!1,s=r._editMode(),d=r._editContainer&&r._editContainer.length>0&&r._editContainer.is(":visible"),c=a?e=>{e.attr("aria-disabled",!0),e.addClass("k-disabled")}:e=>e.hide(),u=r.select(),p=u.length>0,h=p&&r._editContainer&&r._editContainer.length>0&&r._editContainer.is(":visible")&&r._editContainer[0].getAttribute(o.attr("uid"))!==u[u.length-1].getAttribute(o.attr("uid")),g=function({mode:e,hasSelected:t,hasChanges:o,editContainerVisible:r,differentSelectionThanEditing:l,_editableIsClosing:n,_isEditableEnabled:i,options:a}){const s=/\b(k-grid-edit-command|k-grid-remove-command|k-grid-save-changes|k-grid-cancel-changes|k-grid-cancel-command|k-grid-save-command)\b/,d=[];if(!i||!a.editable)return s;t||(d.push("k-grid-edit-command"),d.push("k-grid-remove-command")),t&&("incell"===e||"inline"===e&&!l)&&d.push("k-grid-edit-command"),o||(d.push("k-grid-save-changes"),d.push("k-grid-cancel-changes")),("inline"!==e||!r||r&&n)&&(d.push("k-grid-save-command"),d.push("k-grid-cancel-command"));let c="";return d.length?(c=d.join("|"),c=`\\b(${c})\\b`,new RegExp(c)):c}({mode:s,hasSelected:p,hasChanges:l,editContainerVisible:d,differentSelectionThanEditing:!h&&!1!==h||h,_editableIsClosing:r._editableIsClosing||!1,_isEditableEnabled:r._isEditableEnabled||!1,options:r.options});i.show().removeClass("k-disabled").attr("aria-disabled","false"),i.each((function(){const t=e(this),o=t.attr("class");t.hasClass(he)&&(t.removeClass(he),Sr(r.table,!0)),o&&g&&g.test(o)&&c(t)}))},_attachToolbarClicks:function(){var e=this.options.editable,t=this.wrapper.find(".k-grid-toolbar");e&&!1!==e.create&&t.on($e+V,".k-grid-add",this._createClickHandler).on($e+V,".k-grid-cancel-changes",this._cancelClickHandler).on($e+V,".k-grid-save-changes",this._saveClickHandler),e&&!1!==e.update&&t.on($e+V,".k-grid-edit-command",this._editClickHandler).on($e+V,".k-grid-save-command",this._updateClickHandler).on($e+V,".k-grid-cancel-command",this._editCancelClickHandler),!1!==e.destroy&&t.on($e+V,".k-grid-remove-command",this._destroyClickHandler),t.on($e+V,".k-grid-excel",this._excelClickHandler),t.on($e+V,".k-grid-pdf",this._pdfClickHandler)},_processItems:function(e){var r=this,l=r.options,n=[],i=this.options.messages.commands,a=!1;return e.map((e=>{var s,d,c,u,p="";if("string"==typeof e)s=e.toLowerCase(),(e={}).text=i[s]||s;else{s=e.name||e.text||"",ao[s.toLowerCase()]&&(s=s.toLowerCase()),e.text=""===e.text?"":e.text||i[s]||s}if(a||"search"!==s&&"columns"!==s||(a=!0,n.push({type:"spacer"})),"search"===s)d=Lr(e.text||i.search,!0),c=e.icon||e.iconClass||"search",p+=`<span class='k-searchbox k-input ${o.getValidCssClass("k-input-","size",r.options.size)} k-rounded-md k-input-solid k-grid-search'>`,p+=o.ui.icon({icon:c,iconClass:"k-input-icon"}),p+="<input autocomplete='off' placeholder='"+d+"' title='"+d+"' aria-label='"+d+"' class='k-input-inner' />",p+="</span>",n.push({name:"search",overflow:"never",template:p});else if("paste"===s&&l.allowPaste)n.push({template:"<input class='k-grid-paste-action' />"});else{if(!(s||h(e)&&e.template))throw new Error("Custom commands should have name specified");u=(e=g({type:"button"},ao[s],e)).className||"k-grid-"+(s||"").replace(/\s/g,""),e.attributes=r._processAttr(e.attr),delete e.attr,u&&(e.attributes.class===t&&(e.attributes.class=""),e.attributes.class+=" "+u),e.template&&delete e.type,r["_"+s+"ClickHandler"]&&(e.click=r["_"+s+"ClickHandler"]),"canceledit"===s&&(e.click=r._editCancelClickHandler),n.push(e)}})),n},_processAttr:function(e){var t={};return typeof e===rt&&e.length>0?e.split(" ").map((e=>{var o=e.split("=");2===o.length&&(t[o[0]]=o[1].replaceAll('"',"").replaceAll("'",""))})):h(e)&&(t=e),t},_createButton:function(r){var l,n,i=r.template||Pt,a=typeof r===rt?r:r.name||r.text,s=ao[a]?ao[a].className:"k-grid-"+(a||"").replace(/\s/g,""),d={className:r.skipCommandClass?"":s,text:a,attr:r.skipTabIndex?"":"tabindex=-1",iconClass:"",size:r.size||this.options.size},c=this.options.messages.commands;if(!(a||h(r)&&r.template))throw new Error("Custom commands should have name specified");if(h(r)){if((r=g(!0,{},r)).className&&_(d.className,r.className.split(" "))<0?r.className+=" "+d.className:r.className===t&&(r.className=d.className),r.className.indexOf("k-primary")>-1&&(r.className=r.className.replace("k-primary",""),r.themeColor="primary"),"edit"===a&&((r=g(!0,{},r)).text=h(r.text)?r.text.edit:r.text,r.iconClass=h(r.iconClass)?r.iconClass.edit:r.iconClass),r.attr){if(h(r.attr)&&(r.attr=io(r.attr)),r.attr instanceof Function){let e=r.attr(r);r.attr=io(e)}typeof r.attr===rt&&(n=r.attr.match(/class="(.+?)"/))&&_(n[1],r.className.split(" "))<0&&(r.className+=" "+n[1])}const e={text:c[a]};"edit"!==a&&"update"!==a||(e.themeColor="primary"),"destroy"===a&&(e.iconClass="k-i-x"),d=g(!0,d,ao[a],e,r)}else{const e={text:c[a]};"edit"!==a&&"update"!==a||(e.themeColor="primary"),"destroy"===a&&(e.iconClass="k-i-x"),d=g(!0,d,ao[a],e)}return l=o.template(i)(d),r.template?l:o.html.renderButton(e(l),d)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off($e+V,t._groupableClickHandler):t._groupableClickHandler=function(o){var r=e(this),l=r.closest(bt),n=t._groupRows?t._groupRows[t.wrapper.find(x+ze).index(l)]:{};r.is(L)?t.trigger("groupCollapse",{group:n,element:l})||t.collapseGroup(l):t.trigger("groupExpand",{group:n,element:l})||t.expandGroup(l),o.preventDefault(),o.stopPropagation()},t._isLocked()?t.lockedTable.on($e+V,".k-grouping-row "+B+", .k-grouping-row "+L,t._groupableClickHandler):t.table.on($e+V,".k-grouping-row "+B+", .k-grouping-row "+L,t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,l=t.wrapper,n=t.options.groupable,i=D+"["+o.attr("field")+"]",a=t.content?".k-grid-header:first "+i:"table:first>.k-grid-header "+i;if(n&&!1!==n.enabled){l.has("div.k-grouping-header")[0]||e("<div/>").addClass("k-grouping-header").prependTo(l),t.groupable&&t._destroyGroupable(),$t.chrome&&(l.find("div.k-grouping-header").css("touch-action",It),l.find(a).css("touch-action",It));let o=t.wrapper.children(".k-grid-header");o.addClass("k-grid-draggable-header"),o.attr("draggable",!0),t.groupable=new r.Groupable(l,g({},n,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:a,filter:a,size:t.options.size,allowDrag:t.options.reorderable,enableContextMenu:!!t.options.contextMenu,removeGroup:function(e){t._showUngroupedColumn(e)},change:function(e){t.trigger("group",{groups:e.groups})?e.preventDefault():(t._clearEditableState(),t._hideGroupedColumns(e.groups),t.dataSource.options.endless&&t._resetEndless())}})),t._addGroupableOptionsToHeader()}},_showUngroupedColumn:function(e){var t,o=rr(this.columns);for(t=0;t<o.length;t++)o[t].uid==e.colID&&o[t].hideOnGroup&&this.showColumn(o[t])},_hideGroupedColumns:function(e){if(e){var t,o=rr(this.columns),r=[];for(t=0;t<e.length;t++)e[t].colID&&r.push(e[t].colID);for(t=0;t<o.length;t++)r.indexOf(o[t].uid)>=0&&o[t].hideOnGroup&&this.hideColumn(o[t])}},_resetEndless:function(){var e=this;e.dataSource.options.endless=null,e._endlessPageSize=e.dataSource.options.pageSize,e.dataSource._skip=0,e.dataSource._pageSize=e.dataSource._take=e._endlessPageSize,e.dataSource._page=1},_addGroupableOptionsToHeader:function(){var e,t,r,l=Po(this.columns),n={},i=this._headerCells();for(r=0;r<l.length;r++)l[r].field,n[l[r].field]=l[r];for(r=0;r<i.length;r++)(t=n[(e=i.eq(r)).attr(o.attr(it))])&&t.groupable&&t.groupable.sort&&e.data(pt,t.groupable.sort)},_destroyGroupable:function(){var e=this;e.groupable&&e.groupable.element&&e.groupable.element.kendoGroupable("destroy"),e.groupable=null,e._removeGroupableOptionsFromHeader()},_removeGroupableOptionsFromHeader:function(){for(var e=this._headerCells(),t=0;t<e.length;t++)e.eq(t).removeData(pt)},_continuousItems:function(t,o){if(this.lockedContent){for(var r=this,l=r.table.add(r.lockedTable),n=e(t,l[0]),i=e(t,l[1]),a=o?Ko(rr(r.columns)).length:1,s=o?rr(r.columns).length-a:1,d=[],c=0;c<n.length;c+=a)k.apply(d,n.slice(c,c+a)),k.apply(d,[].splice.call(i,0,s));return d}},_selectable:function(){var t,r,l=this,n=[],i=l._isLocked(),a=l.options.selectable,s="skeleton"===l.options.loaderType;if(a&&!a.checkboxSelection){l.selectable&&l.selectable.destroy(),l._selectedIds={},a=o.ui.Selectable.parseOptions(a),t=a.multiple,r=a.cell,l._hasDetails()&&(n[n.length]=".k-detail-row"),(l.options.groupable||l._hasFooters()||l._groups())&&(n[n.length]=".k-grouping-row,.k-group-footer"),s&&(n[n.length]="[data-skeleton-row]"),""!==(n=n.join(","))&&(n=":not("+n+")");var d=l.table;i&&(d=d.add(l.lockedTable));var c=">"+(r?"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer):not([data-skeleton-row]) > td:not(.k-group-cell):not(.k-hierarchy-cell)":"tbody>tr"+n);l.selectable=new o.ui.Selectable(d,{allowPaste:l.options.allowPaste,filter:c,aria:!0,multiple:t,holdToDrag:!(!l._isMobile&&!o.support.mobileOS),toggleable:!(!l._isMobile&&!o.support.mobileOS),dragToSelect:l.options.selectable&&l.options.selectable.dragToSelect,changing:function(e){l.trigger(Y,{target:e.target,originalEvent:e.originalEvent})&&e.preventDefault()},change:function(e){var t;r||l._persistSelectedRows(),l._checkBoxSelection&&(t=l.selectable.value(),l._uncheckCheckBoxes(),l._checkRows(t),t.length&&t.length===l.items().length?l._toggleHeaderCheckState(!0):l._toggleHeaderCheckState(!1)),l._calculateAggregatesForSelected(),"incell"!==l._editMode()&&l._toggleToolbarEditingItemsVisibility(),e.event&&l.trigger(J,{cellAggregates:l._cellAggregates})},useAllItems:i&&t&&r,relatedTarget:function(t){if(!r&&i){for(var o,n=e(),a=0,s=t.length;a<s;a++)o=l._relatedRow(t[a]),_(o[0],t)<0&&(n=n.add(o));return n}},continuousItems:function(){return l._continuousItems(c,r)},ignoreOverlapped:l.options.selectable&&l.options.selectable.ignoreOverlapped,addIdToRanges:!0}),l.options.navigatable&&d.on("keydown"+V,(function(o){var n,a,s=l.current(),c=o.target,p={event:o};if(s)if(o.keyCode===u.SPACEBAR&&!o.shiftKey&&e.inArray(c,d)>-1&&!s.is(".k-edit-cell,.k-header")&&s.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(o.preventDefault(),o.stopPropagation(),((n=!(s=r?s:s.parent()).hasClass(_e)||l.selectable.value().length>1)||t&&s.hasClass(_e)&&o.ctrlKey)&&l.trigger(Y,{target:s,originalEvent:o}))return;if(i&&!r&&(s=s.add(l._relatedRow(s))),t)if(o.ctrlKey){if(s.hasClass(_e))return l._deselectCheckRows(s),l._calculateAggregatesForSelected(),void l.trigger(J,{cellAggregates:l._cellAggregates})}else l.selectable.clear();else l.selectable.clear();r||(l.selectable._lastActive=s),l.selectable.value(s),n&&(l._calculateAggregatesForSelected(),l.trigger(J,{cellAggregates:l._cellAggregates}))}else if(!r&&(e(c).is("td")||e(c).is("table")&&_(c,this._navigatableTables))&&(o.shiftKey&&o.keyCode==u.LEFT||o.shiftKey&&o.keyCode==u.RIGHT||o.shiftKey&&o.keyCode==u.UP||o.shiftKey&&o.keyCode==u.DOWN||o.keyCode===u.SPACEBAR&&o.shiftKey)){if(o.preventDefault(),o.stopPropagation(),s=s.parent(),l.trigger(Y,{target:s,originalEvent:o}))return;a=l.selectable.value(),i&&(s=s.add(l._relatedRow(s))),t?(l.selectable._lastActive||(l.selectable._lastActive=s),l.selectable.selectRange(l.selectable._firstSelectee(),s),function(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}(a,l.selectable.value())||l.trigger(J,p)):s.hasClass(_e)||(l.selectable.clear(),l.selectable.value(s),l._calculateAggregatesForSelected(),l.trigger(J,{cellAggregates:l._cellAggregates}))}}))}},_pasteReplaceHandler:function(t){var o,r,l,n,i,a=this,s=[];(r=a.select().first()).length&&(r.is(bt)&&(r=r.children("td").first()),o=t.split("\n").filter((e=>e)),l=r.closest("tr"),i=a.thead.find("th:eq("+r.index()+")").data("field"),n=l.data("uid"),s.push(n),l.nextAll(F).slice(0,o.length-1).each(((t,o)=>{s.push(e(o).data("uid"))})),a._executePaste(o,s,null,i))},_pasteInsertHandler:function(e){var t,o,r,l,n,i=this,a=i.dataSource;(o=i.select().first()).length&&(o.is(bt)&&(o=o.children("td").first()),t=e.split("\n").filter((e=>e)),r=o.closest("tr"),n=i.dataItem(r),l=a.indexOf(n)+1,i._executePaste(t,null,l,null))},_executePaste:function(e,t,o,r){var l,n,i,a,s,d=this,c=d.dataSource,u=t||!1,p=d._getSelectedRowUids(),h=d._getSelectedColumnFields(),g=[],f=Zo(d.columns).filter((e=>!e.selectable&&!e.draggable&!e.command)),m=r&&f.map((e=>e.field)).indexOf(r);if(1===e.length&&1===e[0].split("\t").length&&u)for(let t=0;t<p.length;t++){const o=p[t];l=c.getByUid(o),i=e[0].split("\t")[0];for(let e=0;e<h.length;e++)s=h[e],l&&i&&l.set(s,i);l&&l.dirty&&g.push(l)}else for(let r=0;r<e.length;r++){n=e[r].split("\t"),l=u?c.getByUid(t[r]):c.insert(o+r,{});for(let e=0;e<n.length;e++)i=n[e].replace(/\r/,""),(a=f[e+m||0])&&l&&i&&(s=a.field,l.set(s,i));l&&l.dirty&&g.push(l)}d.trigger(ae,{items:g,type:u?"replace":"insert"})},_pasteKeyboardHandler:function(t){var o,r,l,n=this,i=n.current(),a=t.originalEvent.clipboardData,s=n.pasteActionsDropDownList&&n.pasteActionsDropDownList.value()||"insert";e(t.target).is(".k-edit-cell input:visible")||a&&(t.preventDefault(),l=a.getData("text").trimEnd(),/\S/.test(l)||(l=" "),i&&i.length&&(r=i.index(),o=i.closest(bt).data("uid")),"replace"===s&&n._pasteReplaceHandler(l),"insert"===s&&n._pasteInsertHandler(l),r&&o&&(n._currentRowIndex=n.wrapper.find("tr[data-uid='"+o+"']").index(),n._restoreCurrent(r)))},_paste:function(){var e=this,t=e.options,o=t.selectable;if(t.allowPaste&&o){e.pasteHandler=e._pasteKeyboardHandler.bind(e);(e.content||e.table).on(ae+V,e.pasteHandler),e.options.toolbar&&e._pasteToolbarDropDown()}},_clipboard:function(){var e=this.options;if(e.selectable&&e.allowCopy){var t=this;e.navigatable||(t.table.attr(tt,0),t.table.add(t.lockedTable).on(je+V+" keydown"+V,".k-detail-cell",(function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()})).on(je+V,A+">"+M,Ir.bind(t))),t.copyHandler=t.copySelection.bind(t),t.updateClipBoardState=function(){t.areaClipBoard&&t.areaClipBoard.val(t.getTSV()).trigger("focus").select()};const o=t.content||t.table;t.bind("change",t.updateClipBoardState),o.on("keydown",t.copyHandler),t.clearAreaHandler=t.clearArea.bind(t),o.on("keyup",t.clearAreaHandler)}},copySelectionToClipboard:function(e){this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV(e)).trigger("focus").select(),document.execCommand("copy")},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||67!==t.keyCode||!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text||(this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV()).trigger("focus").select())},_createAreaClipBoard:function(){this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper))},getTSV:function(o){var r=this,l=r.select(),n="\t",i=r.options.allowCopy,a=r._isLocked()&&Ko(r.columns).length;e.isPlainObject(i)&&i.delimeter&&(n=i.delimeter);var s="";if(l.length){l.eq(0).is(bt)&&(l=l.find("td:not(.k-group-cell)")),l.filter(":visible");var d,c=[],u=this.columns.length,p=r._isLocked()&&Ko(r.columns).length,h=!0,g=[],f=Zo(this.columns);e.each(l,(function(t,o){if(o=e(o),d=r._getCellField(o,a),-1!==f.findIndex((e=>e.field===d))){var l=o.closest(bt).index(),n=o.index();n-=o.prevAll(":hidden").length,p&&h&&(h=e.contains(r.lockedTable[0],o[0])),r._groups()&&h&&(n-=r._groups()),n=h?n:n+p,d&&(g[n]=d),u>n&&(u=n);var i=o.text();c[l]||(c[l]=[]),c[l][n]=i}}));var m=c.length;if(c=e.each(c,(function(e,t){t&&(c[e]=t.slice(u),m>e&&(m=e))})),o&&g.length){c.splice(m,0,g.map((function(e){return function(e,t){return t.filter((function(t){return t.field===e}))[0].title||e}(e,f)})));var b=c.findIndex((function(e){return e!==t}));c[b]=c[b].slice(u)}e.each(c.slice(m),(function(e,t){s+=t?t.join(n)+"\r\n":"\r\n"}))}return s},clearArea:function(e){this.areaClipBoard&&e&&e.target===this.areaClipBoard[0]&&Sr(this.table,!0),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_adaptiveColumns:function(){var e=this;e._anyColumnHasMediaQuery()&&(e._setColumnsMediaVisibility(e.columns),e._attachColumnMediaResizeHandler())},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length},_columnsWithMediaQuery:function(){return So(this.columns)},_attachColumnMediaResizeHandler:function(){var t=this;t._detachColumnMediaResizeHandler(),t._columnMediaResizeHandler=t._onColumnMediaResize.bind(t),e(window).on(De+V,t._columnMediaResizeHandler)},_detachColumnMediaResizeHandler:function(){this._columnMediaResizeHandler&&e(window).off(De+V,this._columnMediaResizeHandler)},_onColumnMediaResize:function(){var e=this;e._setColumnsMediaVisibility(e.columns),e._setContentMediaWidth()},_setColumnsMediaVisibility:function(e){for(var t=e||[],o=0;o<t.length;o++)this._setColumnMediaVisibility(t[o])},_setColumnMediaVisibility:function(e){var t=this;xo(e.media)?t._setColumnsMediaVisibility(e.columns):vo(e)?(t._showColumnByMedia(e),e.hidden||t._setColumnsMediaVisibility(e.columns)):t._hideColumnByMedia(e)},_showColumnByMedia:function(e){e.hidden||this.showColumn(e),ko(e)},_hideColumnByMedia:function(e){var t=e.hidden;t||(e._hideByMedia=!0,this.hideColumn(e),e._hideByMedia=!1,e.hidden=t),ko(e)},_setContentMediaWidth:function(){var t,o,r=this,l=r.options,n=r._isLocked();if(l.scrollable&&(!0===l.resizable||l.resizable&&!0===l.resizable.columns)){n&&r.lockedFooter?t=r.lockedFooter.children("table"):r.footer&&(t=r.footer.find(">.k-grid-footer-wrap>table")),t&&t[0]||(t=e());var i=n?r.wrapper.find(".k-grid-header-locked").find("table"):r.wrapper.find(".k-grid-header").find("table"),a=n?r.lockedTable:r.table,s=i.find("th"),c=i.find("colgroup"),u=s.length,p=s.filter(Co).length,h=s.length-p,g=0;if(""!==i[0].style.width&&parseFloat(i[0].style.width)!==g){for(var f=i.css(Ze),m=0;m<u;m++)if(o=s[m],e(o)[0].style.display!==It&&!e(o)[0].classList.contains("k-hidden")){var b,_=Math.max(m,m-h),k=c.children()[_],v=k?k.style.width:"";""!==v?b=parseFloat(v):(i.css(Ze,et),b=d(s.eq(m)),i.css(Ze,f)),g+=b}a.css("width",g-1),i.css("width",g),t.css("width",g),r._updateStickyColumns()}}},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=this.hideMinScreenCols.bind(this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,o){for(var r=!1,l=0;l<e.length;l++){var n=e[l],i=n.minScreenWidth;i!==t&&null!==i&&(r=!0,i>o?this.hideColumn(n):this.showColumn(n)),!n.hidden&&n.columns&&(r=this._iterateMinScreenCols(n.columns,o)||r)}return r},_stickyColumns:function(){this._anyStickyColumns()&&this._setStickyColumns(!1)},_updateStickyColumns:function(){var e=this,t=m(rr(e.columns),(function(e){return e.groupHeaderColumnTemplate}));e._anyStickyColumns()&&(e._setStickyColumns(!0),e._templates(),t.length>0&&e._renderGroupRows(),e._hasFilterRow()&&e._updateStickyFilterCells())},_updateStickyFilterCells:function(){var t=this.thead.find(".k-filter-row").find("td:not(.k-group-cell,.k-hierarchy-cell)");t.length&&t.each((function(){var t=e(this),o=t.data("column");o.sticky?(h(o.stickyStyle)&&t.css({left:o.stickyStyle.left||"",right:o.stickyStyle.right||""}),t.addClass(Ae)):(t.css({left:"",right:""}),t.removeClass(Ae))}))},_anyStickyColumns:function(){return Yo(this.columns).length},_setStickyColumns:function(e){var t=this,o=Yo(t.columns),r=function(e){return m(e,(function(e){return e.sticky&&!e.locked&&wo(e)}))}(t.columns),l=t._calculateStickyWidths(r);t._removeStickyAttributes(o),t._setStickyClassAttributes(o),t._setStickyStyleAttributes(r,l,e),e&&t._setStickyStyles(r,l)},_calculateStickyWidths:function(e,t,o){var r,l,n,i,a=Nt?"right":"left",s=Nt?"left":"right",d={left:new Array(e.length).fill(t||0),right:new Array(e.length).fill(o||0)};for(r=0;r<e.length-1;r++)l=e[r],n=this._sumColumnWidth(l)+d[a][r],d[a][r+1]=n;for(r=e.length-1;r>0;r--)l=e[r],i=this._sumColumnWidth(l)+d[s][r],d[s][r-1]=i;return d},_setStickyClassAttributes:function(e,t){var o,r;for(o=0;o<e.length;o++)(r=e[o]).columns&&(!t&&o&&(t=o),this._setStickyClassAttributes(tr([r]),t)),t&&jo(r,"headerAttributes","class",Fe),jo(r,"attributes","class",Ee),jo(r,"headerAttributes","class",Ae),jo(r,"footerAttributes","class",Me)},_setStickyStyleAttributes:function(e,t,r){var l,n,i,a,s,d,c,u=this;for(l=0;l<e.length;l++)n=e[l],s={left:(i=t.left[l])+"px",right:(a=t.right[l])+"px"},n.columns&&(d=or([n]),c=u._calculateStickyWidths(d,i,a),u._setStickyStyleAttributes(d,c,r),r&&u._setStickyStyles(d,c)),jo(n,"attributes",o.attr("style-left"),s.left),jo(n,"attributes",o.attr("style-right"),s.right),jo(n,"headerAttributes",o.attr("style-left"),s.left),jo(n,"headerAttributes",o.attr("style-right"),s.right),jo(n,"footerAttributes",o.attr("style-left"),s.left),jo(n,"footerAttributes",o.attr("style-right"),s.right),n.stickyStyle=s},_removeStickyAttributes:function(e){var t,r,l=new RegExp("(\\s*"+Ee+")*","ig"),n=new RegExp("(\\s*"+Ae+")*","ig"),i=new RegExp("(\\s*"+Me+")*","ig"),a=new RegExp("(\\s*"+Fe+")*","ig");for(t=0;t<e.length;t++)(r=e[t]).columns&&this._removeStickyAttributes(tr([r])),Uo(r,"attributes","class",l),Uo(r,"attributes",o.attr("style-left"),"",!0),Uo(r,"attributes",o.attr("style-right"),"",!0),Uo(r,"headerAttributes","class",n),Uo(r,"headerAttributes","class",a),Uo(r,"headerAttributes",o.attr("style-left"),"",!0),Uo(r,"headerAttributes",o.attr("style-right"),"",!0),Uo(r,"footerAttributes","class",i),Uo(r,"footerAttributes",o.attr("style-left"),"",!0),Uo(r,"footerAttributes",o.attr("style-right"),"",!0)},_setStickyStyles:function(t,o){var r,l,n,i,a,s,d,c,u,p,h,g=this,f=rr(Qo(g.columns)),m=g.tbody.children(":not(.k-detail-row)");for(r=0;r<t.length;r++)if(i=t[r],s=o.left[r],d=o.right[r],a=f.indexOf(i),(c=g._getColumnHeader(i)).addClass(Ae),i.headerAttributes.class&&-1!==i.headerAttributes.class.indexOf(Fe)&&c.addClass(Fe),No(c,s,d),!i.columns)for(g.footer&&((u=g.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(a)).addClass(Me),No(u,s,d)),l=0;l<m.length;l++)(n=e(m[l])).hasClass(ze)?((p=n.find("."+i.groupHeaderColumnTemplateClass)).addClass(Ee),No(p,s,d)):((h=n.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(a)).addClass(Ee),No(h,s,d))},_removeStickyStyles:function(t){var o,r,l,n,i,a,s,d,c,u=this,p=rr(Qo(u.columns)),h=u.tbody.children(":not(.k-detail-row)");for(o=0;o<t.length;o++)if(n=t[o],i=p.indexOf(n),(a=u._getColumnHeader(n)).removeClass(Ae),a.removeClass(Fe),No(a,"",""),n.columns)u._removeStickyStyles(n.columns);else for(n.footerTemplate&&u.footer&&((s=u.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(i)).removeClass(Me),No(s,"","")),r=0;r<h.length;r++)(l=e(h[r])).hasClass(ze)?((d=l.find("."+n.groupHeaderColumnTemplateClass)).removeClass(Ee),No(d,"","")):((c=l.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(i)).removeClass(Ee),No(c,"",""))},_getColumnHeader:function(t){return e("#"+t.headerAttributes.id).length?e("#"+t.headerAttributes.id):e("#"+this._cellId)},_sumColumnWidth:function(e){return e.columns?this._sumCurrentWidths(rr([e])):this._sumCurrentWidths([e])},_sumCurrentWidths:function(e){var t,o,r,l=0,n=0,i=e.length;for(r=0;r<i;r++)t=e[r],o=this._getColumnHeader(t),!t.hidden&&vo(t)&&(l+=(n=o.is(":visible")?o.outerWidth():t.width)?parseInt(n,10):0);return l},_belongsToGrid:function(e){return this.wrapper[0]===e.closest(".k-grid")[0]},getSelectedData:function(){for(var e=this,t=e.selectable.selectedRanges(),o=Object.keys(t),r=e.selectable.selectedSingleItems(),l=[],n=Zo(e.columns),i=0;i<o.length;i++)l=l.concat(e._mapSelectionToData(t[o[i]],n,null,!0));return r.length&&(l=l.concat(e._mapSelectionToData(r,n,null,!0))),l},getSelectedDataByKeys:function(){var t,o,r=this,l=r.dataSource,n=r.selectedKeyNames(),i=Zo(r.columns),a={},s=function(e){var t={};if(e.field)return t[e.field]=o[e.field],t};for(let r=0;r<n.length;r++)t=n[r],(o=l.get(t))&&(a[o.uid]=e.extend.apply({},i.map(s)));return Object.keys(a).map((function(e){return a[e]}))},exportSelectedToExcel:function(e){if(!o.excel||!o.ooxml)throw new Error("The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.");var t,r=this,l=this.options.excel||{},n=Zo(r.columns),i=new o.excel.ExcelExporter({}),a={sheets:[{columns:Array.apply(0,Array(n.length)).map((function(){return{autoWidth:!0}})),rows:[],freezePane:{},filter:!1}]},s=r.selectable.selectedRanges(),d=Object.keys(s),c=r.selectable.selectedSingleItems(),u=[],p=r._isLocked()&&Ko(r.columns).length,h=Br.bind(r);for(t=0;t<d.length;t++)u=u.concat(r._mapSelectionToData(s[d[t]],n,Pr));if(u.length&&r._addRangeSelectionRows(a,i,u,e),(u=c.length?r._mapSelectionToData(c,n,Pr):[]).length&&(p&&(u=u.sort(h)),r._addSingleSelectionRows(a,i,u,e)),a.sheets[0].rows.length){var g=new o.ooxml.Workbook(a);g.options||(g.options={}),g.options.skipCustomHeight=!0,g.toDataURLAsync().then((function(e){o.saveAs({dataURI:e,fileName:a.fileName||l.fileName,proxyURL:l.proxyURL,forceProxy:l.forceProxy})}))}},_addSingleSelectionRows:function(e,t,o,r){var l,n=0,i=er(this.columns);const a=t._instance??t;for(n=0;n<o.length;n++)l=o[n],t.data=[l],this._setExporterColumns(a,i,l),this._createExportRows(e,a,r)},_addRangeSelectionRows:function(e,t,o,r){var l=er(this.columns);const n=t._instance??t;t.data=o,this._setExporterColumns(n,l,o[0]),this._createExportRows(e,n,r)},_createExportRows:function(e,t,o){const r=t._instance??t;e.sheets[0].rows=e.sheets[0].rows.concat(o?r._rows():r._dataRows(r.data,0))},_setExporterColumns:function(t,o,r){const l=t._instance??t;l.columns=l.options.columns=e.map(o.filter((function(e){return Object.keys(r).indexOf(e.field)>=0})),l._prepareColumn)},_mapSelectionToData:function(t,o,r,l){for(var n,i,a,s,d,c=this,u="TR"===t[0][0].nodeName,p={},h=function(e){var t={};if(e.field&&(!r||r(e)))return t[e.field]=n[e.field],t},g=c._isLocked()&&Ko(c.columns).length,f=0;f<t.length;f++)if(i=t[f],n=c.dataItem(u?i:i.parent()),u)p[n.uid]=e.extend.apply({},o.map(h));else{if(!(s=c._getCellField(i,g,l)))continue;if((a=p[n.uid])||(a=p[n.uid]={}),!(d=Ho(o,s))||r&&!r(d))continue;a[s]=n[s]}return Object.keys(p).map((function(e){return p[e].uid=e,p[e]}))},_getCellField:function(t,r,l){const n=this,i=r&&e.contains(n.lockedTable[0],t[0]),a=o.attr("field"),s=o.attr("index"),d=i?0:r;let c=0;return l&&(c=n._trailingColumns()),r?n.element.find(".k-grid-header-"+(i?"locked":"wrap")+" th["+s+"='"+(t.index()+d)+"']").attr(a):n.thead.find("th["+s+"='"+(t.index()-c)+"']").attr(a)},_relatedRow:function(t){var o=this.lockedTable;if(t=e(t),!o)return t;var r=t.closest(this.table.add(this.lockedTable)),l=r.find(">tbody>tr").index(t);return(r=r[0]===this.table[0]?o:this.table).find(">tbody>tr").eq(l)},_relatedCell:function(t){var o=this.lockedTable;if(t=e(t),!o)return t;var r=t.closest(this.table.add(this.lockedTable)),l=r.find(">tbody>tr>td").index(t);return(r=r[0]===this.table[0]?o:this.table).find(">tbody>tr>td").index(l)},clearSelection:function(){var e=this;e.selectable&&!e._checkBoxSelection&&e.selectable.clear(),e._checkBoxSelection?e._deselectCheckRows(e.select()):e.options.persistSelection?e._persistSelectedRows():e._selectedIds={}},select:function(e){var t=this,r=t.selectable,l=o.ui.Selectable.parseOptions(this.options.selectable).cell;return(e=t.table.add(t.lockedTable).find(e)).length?(r&&!r.options.multiple&&(r.clear(),e=e.first()),t._isLocked()&&(e=e.add(e.map((function(){return l?t._relatedCell(this):t._relatedRow(this)})))),r&&!t._checkBoxSelection?r.value(e):(t._checkRows(e),t.select().length===t.items().length&&t._toggleHeaderCheckState(!0)),void(l||t._persistSelectedRows())):r?r.value():t.items().filter("."+_e)},_initSelectableAggregates:function(){var e=this;e.options.selectable&&(e._selectableAggregatesOptions||(e._selectableAggregatesOptions=e._parseSelectableAggregatesOptions()),e._selectableAggregatesOptions.count&&(e._cellAggregates={count:0}))},_calculateAggregatesForSelected:function(){var r,l,n,i,a,s,d,c,u,h,g,f=this,m=f.options,b=f.getSelectedDataByKeys(),_=f.options.selectable,k=_.cellAggregates,v=Zo(f.columns).filter((e=>!e.selectable&&!e.draggable&!e.command)).length,C=lr(m.columns),w=o.ui.Selectable.parseOptions(_).cell,y=[],S=[],x=[];if(k){w&&(b=f.getSelectedData()),k=f._selectableAggregatesOptions;for(let e=0;e<b.length;e++){r=b[e];for(let e=0;e<C.length;e++)switch(l=r[C[e]],p(l)){case"number":y.push(l);break;case"date":S.push(l);break;case"boolean":x.push(l)}}var T;k.count&&(n=w?(T=f.select(),T.filter(((o,r)=>{const l=e(r),n=l.children(".k-select-checkbox").length>0,i=l.find("> .k-checkbox-wrap > .k-select-checkbox").length>0;return l.attr("[ref-grid-drag-cell]")===t&&!l.hasClass("k-command-cell")&&!n&&!i}))).length:b.length*v),y.length&&(a=k.max?y.reduce(((e,t)=>Math.max(e,t))):null,i=k.min?y.reduce(((e,t)=>Math.min(e,t))):null,s=k.sum?y.reduce(((e,t)=>e+t)):null,d=k.average?y.reduce(((e,t)=>e+t))/y.length:null),S.length&&(c=k.earliest?S.reduce(((e,t)=>new Date(Math.min(e,t)))):null,u=k.latest?S.reduce(((e,t)=>new Date(Math.max(e,t)))):null),x.length&&(h=k.isTrue?x.filter((e=>!0===e)).length:null,g=k.isFalse?x.filter((e=>!1===e)).length:null),f._cellAggregates={count:n,max:a,min:i,sum:s,average:d,earliest:c,latest:u,isTrue:h,isFalse:g},f.statusBar&&f._statusBar()}},_parseSelectableAggregatesOptions:function(){var e=this.options.selectable.cellAggregates,t={};if(b(e)){for(let o=0;o<e.length;o++)t[e[o]]=!0;return t}return{count:!0,min:!0,max:!0,sum:!0,average:!0,earliest:!0,latest:!0,isTrue:!0,isFalse:!0}},_toggleHeaderCheckState:function(e){var t=this;e?t.thead.add(t.lockedHeader).find("tr "+ve).prop("checked",!0).attr(Tt,!0).attr(kt,"Deselect all rows"):t.thead.add(t.lockedHeader).find("tr "+ve).prop("checked",!1).attr(Tt,!1).attr(kt,"Select all rows")},_uncheckCheckBoxes:function(){this.table.add(this.lockedTable).find("tbody "+ve).attr(Tt,!1).prop("checked",!1).attr(kt,"Select row")},_deselectCheckRows:function(t){var r=this,l=o.attr("range-selected");t=r.table.add(r.lockedTable).find(t),r._isLocked()&&(t=t.add(t.map((function(){return r._relatedRow(this)})))),t.each((function(){e(this).removeClass(_e).removeAttr(l).find(ve).attr(Tt,!1).prop("checked",!1).attr(kt,"Select row")})),r._toggleHeaderCheckState(!1),r._persistSelectedRows()},_checkRows:function(t){t.each((function(){e(this).addClass(_e).find(ve).prop("checked",!0).attr(kt,"Deselect row").attr(Tt,!0)}))},_persistSelectedRows:function(){var e,t,r,l=this,n=l.items(),i=l.dataSource.options.schema,a={};if(i&&i.model&&l._data&&(r=l._getSchemaIdField())){o.ui.Selectable.parseOptions(l.options.selectable).multiple||l._checkBoxSelection||(l._selectedIds={}),l.select().each((function(){t=l.dataItem(this),a[t[r]]=!0}));for(var s=0;s<n.length;s++)e=(t=l.dataItem(n[s]))[r],a[e]?l._selectedIds[e]=!0:delete l._selectedIds[e]}},selectedKeyNames:function(){var e=[];for(var t in this._selectedIds)e.push(t);return e.sort(),e},_updateCurrentAttr:function(t,o,r){var l,n,i=e(t).data("headerId");e(t).removeClass(he),this.table.removeAttr(Ht),i?(i=i.replace(this._cellId,""),e(t).attr(ft,i)):e(t).removeAttr(ft),(l=o.attr(ft))!=this._cellId&&o.data("headerId",l),l?n=l:o.attr(ft,this._cellId),r||o.addClass(he),this.table.attr(Ht,n||this._cellId),this._current=o},_scrollCurrent:function(){const t=this._current,o=this.options.scrollable;if(t&&o){var r=t.parent(),l=r.closest("table").parent(),n=l.is(".k-grid-content-locked,.k-grid-header-locked"),i=l.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),a=e(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0];if(i)if(this.virtualScroll){var s=Math.max(_(r[0],this._items(r.parent())),0);this.virtualScroll.rows?(this._rowVirtualIndex=this.virtualScrollable.itemIndex(s),this.virtualScrollable.scrollIntoView(r)):(this._rowVirtualIndex=s,this._scrollTo(this._relatedRow(r)[0],a))}else this._scrollTo(this._relatedRow(r)[0],a);this.lockedContent&&(this.lockedContent[0].scrollTop=a.scrollTop),n||this._scrollTo(t[0],a)}},_findGroupedItem:function(e,t,o){const r=this;let l;for(let n=0;n<e.length;n++){const i=e[n];if(i.field===o?i.value===t&&(l=i.items[0].uid&&i.items[0][o]?i.items[0]:r._findGroupedItem(i.items,t,o)):l=i.items[0].uid&&i.items[0][o]?i.items.find((e=>e[o]===t)):r._findGroupedItem(i.items,t,o),l)return l}},_findClosestGroupingRow:function(t,o,r){const l=this;let n=o||0,i=r||0;if(!(l.options.groupable&&l.dataSource.group().length>0)||!t)return{targetRow:t,rowsToTarget:n,hiddenGroupingRows:i};const a=e(t.previousSibling);if(a&&a.hasClass(ze)){let e={targetRow:a,rowsToTarget:n,hiddenGroupingRows:i};return"none"===a.css("display")&&(e=l._findClosestGroupingRow(a[0],n,i+1)),e}{const e=l._findClosestGroupingRow(a[0],n+1,i);if(e)return{targetRow:e.targetRow,rowsToTarget:e.rowsToTarget,hiddenGroupingRows:i}}},_checkItemAlreadyLoaded:function(e,t){const o=this.dataSource._ranges;let r;for(let l=0;l<o.length;l++){if(r=o[l].data.find((o=>o[t]===e)),r)return{loadedItem:r,page:l}}},scrollToItem:function(t,r){const l=this,n=l.options,i=l.dataSource,a=i.group(),s=i.pageSize(),d=l._getSchemaIdField(),c=n.scrollable,u=l.wrapper.find(".k-grid-content.k-auto-scrollable"),p=o._outerHeight(l.tbody.find(`tr:not(.${ze})`)),h=c&&c.virtual&&("rows"===c.virtual||!0===c.virtual);let g=n.groupable&&l.wrapper.find(`.${ze}:first-child`),f={},m=!1,b=0;if(l._scrolledItems&&(f=l._scrolledItems),h&&0===a.length&&(l.virtualScrollable._alwaysScrollTop=!0),!t||!d)return;const _=i.view();let k=_.find((e=>e[d]==t));if(a.length>0&&(k=l._findGroupedItem(_,t,d),b=o._outerHeight(g[0])),!k&&h)return l.virtualScrollable._programmaticallyScrolling&&"resolved"!==l.virtualScrollable._programmaticallyScrolling.state()||(l.virtualScrollable._programmaticallyScrolling=e.Deferred()),void(r&&"function"==typeof r&&r({success:e=>{let o=e;if(o="number"!=typeof o?Number(o):o,isNaN(o))return;const r=i.options.serverPaging;let n=S.floor(o/s);if(r){const e=l._checkItemAlreadyLoaded(t,d);e&&(n=e.page)}const a=u.find(bt),c=a[a.length-1].offsetTop,h=n*(s/a.length*c)+(o-n*s-1)*p;return l._scrollingUp=l.virtualScrollable.verticalScrollbar.scrollTop()>h,l._scrollOffset=h,l.virtualScrollable._scrollTo(h),l.virtualScrollable.verticalScrollbar.trigger(se),l.virtualScrollable._programmaticallyScrolling.done((()=>{l.scrollToItem(t)}))}}));const v=k&&k.uid;if(!v)return;let C=e(`[data-uid=${v}]`),{targetRow:w,rowsToTarget:y,hiddenGroupingRows:x}=l._findClosestGroupingRow(C[0]);if(!C||!w)return;a.length>0&&"none"===C.css("display")&&(C=w,m=!0);const T=m?x*b+p:0;let H=C[0].offsetTop-((y+a.length)*b-T),R=H;if(h){if(f&&f[t]){const e=Math.floor(l.virtualScrollable.verticalScrollbar.scrollTop()),o=Math.floor(f[t].scrollingDownOffset),r=Math.floor(f[t].scrollingUpOffset);if(e===r||e===o)return;l._scrollingUp=e>R,R=l._scrollingUp?r??R:o??R}l._scrollOffset&&(l._scrollingUp?(l._scrollOffset===H&&(l._scrollOffset+=p),R=H-l.virtualScrollable._scrollTop+l._scrollOffset):R+=l._scrollOffset),l.virtualScrollable._scrollTo(H,R),f[t]||(f[t]={}),l._scrollingUp?f[t]&&!f[t].scrollingUpOffset&&(f[t].scrollingUpOffset=R):f[t]&&!f[t].scrollingDownOffset&&(f[t].scrollingDownOffset=R)}else u.scrollTop(R);l.virtualScrollable&&(l._scrollOffset&&delete l._scrollOffset,l._scrollingUp&&delete l._scrollingUp),l._scrolledItems=f},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,o,r,l){var n=this._current;if(t=e(t),n&&t&&n.length&&t.length&&n.closest(".k-filter-row").length>0&&0===t.closest(".k-filter-row").length&&this._filterFocusable().attr(tt,-1),t.length&&(!n||n[0]!==t[0])){var i=t.parent(),a=i.children(R),s=parseInt(i.children().first().attr("colspan"),10);this._hasVirtualColumns()&&(this._virtualCellIndex=(s>1?s:0)+a.index(t)),this._updateCurrentAttr(n,t,l),r||this._scrollCurrent(),o||this.trigger(Ne,{element:t})}return t&&t.length&&(this._lastCellIndex=t.parent().children(".k-group-cell,"+E).index(t)),this._updateSelctCheckbox(n,t),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(he),this._current=null)},_updateSelctCheckbox:function(e,t){var o;t&&t.length&&((o=t.find(".k-select-checkbox")).length>0?o.trigger("focus"):e&&e.find(".k-select-checkbox").length>0&&Sr(this.table,!0))},_scrollTo:function(t,r){var l=t.tagName.toLowerCase(),n="td"===l||"th"===l,i=e(t).closest("table")[0],a=t[n?"offsetWidth":"offsetHeight"],s=r[n?"scrollLeft":"scrollTop"],d=r[n?"clientWidth":"clientHeight"],c="relative"===e(t).css("position")&&Nt&&n?Math.abs(i.offsetLeft-t.offsetLeft):t[n?"offsetLeft":"offsetTop"],u=c+a,p=0,h=0,g=0;Nt&&n&&($t.msie||$t.edge?h=i.offsetLeft:($t.mozilla||$t.webkit&&$t.version>85)&&(g=i.offsetLeft-o.support.scrollbar())),p=(s=Math.abs(s+h-g))>c?c:u>s+d?a<=d?u-d:c:s,p=Math.abs(p+h)+g,r[n?"scrollLeft":"scrollTop"]=p},_navigatable:function(){var t=this;if(t.options.navigatable){var r=t.table.add(t.lockedTable),l=t.thead.parent().add(e(">table",t.lockedHeader)),n=r;t.options.scrollable&&(n=n.add(l)),this._navigatableTables=n,this._headertables=l,n.off(je+V+" focus"+V+" focusout"+V+" keydown"+V),l.find("a.k-link").attr("tabIndex",-1),r.on("keydown"+V,".k-detail-cell",(function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()})),n.on(o.support.touch?"touchstart"+V:je+V,A+">"+M,Ir.bind(t)).on("focus"+V,t._tableFocus.bind(t)).on("focusout"+V,t._tableBlur.bind(t)).on("keydown"+V,t,t._tableKeyDown.bind(t)),t._filterFocusable().on("focus",t._filterFocus.bind(t))}},_filterFocus:function(t){var o=t.target.closest("th");this._filterFocusable().attr(tt,0),this._setCurrent(o),e(o).removeClass(he)},_tableFocus:function(){var e=this.current(),t=this.lockedTable?this.lockedTable:this.table;e&&e.is(":visible")?e.addClass(he):this._virtualColScroll?this._setCurrent(t.find(A).first().children(M).first(),!0,!0):this._setCurrent(t.find(A).first().children(M).first()),this.table.attr(tt,0)},_tableBlur:function(){var e=this.current();e&&e.removeClass(he)},_findCellIndex:function(e,t,o){var r,l;if(o)for(l=t;l>=0&&(r=l,e[l].hidden);l--);else for(l=t;l<e.length&&(r=l,e[l].hidden);l++);return r},_scrollToColumn:function(e,r){if(this._virtualCellIndex===t)return!1;var l=this,n=l._virtualCellIndex,i=rr(Qo(l.columns)),a=0;e==(Nt?u.LEFT:u.RIGHT)&&n!==i.length-1?n=l._findCellIndex(i,n+1):e==(Nt?u.RIGHT:u.LEFT)&&n?n=l._findCellIndex(i,n-1,!0):e==u.HOME?n=l._findCellIndex(i,0):e==u.END&&(n=l._findCellIndex(i,i.length-1,!0));for(var s=0;s<n;s++)a+=i[s].width;l._virtualCellIndex=n,r&&(r.preventDefault(),r.stopPropagation());let d=l.content;return l._hasVirtualRows()&&l._hasVirtualColumns()&&(d=l.virtualScrollable.wrapper),o.scrollLeft(d,a),!0},_tableKeyDown:function(t){let o=this.current(),r=o&&o.closest(".k-grid-table")[0],l=this.virtualScroll||{},n=this.virtualScrollable&&this.virtualScrollable.fetching(),i=e(t.target),a=!t.isDefaultPrevented()&&(!i.is(":button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon")||this._isFocusableGridElement(o));if(t.altKey&&t.keyCode==u.DOWN)return this.current().find(".k-grid-filter-menu, .k-grid-column-menu").click(),void t.stopImmediatePropagation();if(n)t.preventDefault();else if((!l.columns||o&&document.body.contains(o[0])||!this._scrollToColumn(t.keyCode,t))&&(o||(o=e(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(A).first().children(M).first()),o.length)){var s=!1;t.isDefaultPrevented()||t.keyCode!==u.F10||(s=this._focusToolbar()),a&&t.keyCode==u.UP&&(s=this._moveUp(o,t.shiftKey,t.ctrlKey)),a&&t.keyCode==u.DOWN&&(s=this._moveDown(o,t.shiftKey,t.ctrlKey)),a&&t.keyCode==(Nt?u.LEFT:u.RIGHT)&&(s=this._moveRight(o,t.altKey,t.shiftKey,t.ctrlKey,r)),a&&t.keyCode==(Nt?u.RIGHT:u.LEFT)&&(s=this._moveLeft(o,t.altKey,t.shiftKey,t.ctrlKey,r)),a&&t.keyCode==u.PAGEDOWN&&(s=this._handlePageDown()),a&&t.keyCode==u.PAGEUP&&(s=this._handlePageUp()),a&&t.keyCode==u.HOME&&(s=this._handleHome(o,t.ctrlKey)),a&&t.keyCode==u.END&&(s=this._handleEnd(o,t.ctrlKey)),a&&t.keyCode==u.SPACEBAR&&(s=this._handleSpaceKey(o,t.ctrlKey)),t.keyCode!=u.ENTER&&t.keyCode!=u.F2||(s=this._handleEnterKey(o,r,i)),t.keyCode==u.ESC&&(s=this._handleEscKey(o,r)),t.keyCode==u.TAB&&(s=this._handleTabKey(o,r,t.shiftKey,i)),s&&(t.preventDefault(),t.stopPropagation())}},_focusToolbar:function(){var e=this.wrapper.find(".k-grid-toolbar [tabindex=0]");return e.length>0&&(e.first().addClass(".k-focus").trigger("focus"),!0)},_focusFocusable:function(e,t,o,r,l){const n=this._isFocusableGridElement(t)&&t.find(me);this._containerHasActiveElement(e)&&1!==e.find(me).length||!t.length||(Sr(this.table,!0),this._setCurrent(t,o,r),1!==n.length||n.is("table")||(n.trigger("focus"),l?.preventDefault()))},_containerHasActiveElement:function(e){return e.find(a()).length},_isFocusableGridElement:function(e){return!!e&&(e.is(be)||e.has(be).length)},_moveLeft:function(t,o,r,l,n){var i,a,s=t.parent(),d=s.parent();return o?s.hasClass(ze)?this.collapseGroup(s):this.collapseRow(s):l&&t.is(x+He)&&this.options.reorderable?this._moveColumn(t,!0):(a=d.find(A).index(s),(i=this._prevHorizontalCell(d,t,a))[0]||this._containerHasActiveElement(t)||(r?this.lockedTable?(i=this._relatedRow(s),e.contains(this.lockedTable[0],s[0])&&(i=i.prevAll(F).first()),i=i.children(R).last()):i=this._tabNext(t,n,!0):(d=this._horizontalContainer(d),(i=this._prevHorizontalCell(d,t,a))[0]!==t[0]&&Sr(this.table,!0))),this._focusFocusable(t,i)),!0},_moveRight:function(t,o,r,l,n){var i,a,s=t.parent(),d=s.parent();return o?s.hasClass(ze)?this.expandGroup(s):this.expandRow(s):l&&t.is(x+He)&&this.options.reorderable?this._moveColumn(t,!1):(a=d.find(A).index(s),(i=this._nextHorizontalCell(d,t,a))[0]||this._containerHasActiveElement(t)||(r?this.lockedTable?(i=this._relatedRow(s),e.contains(this.table[0],s[0])&&(i=i.nextAll(F).first()),i=i.children(R).first()):i=this._tabNext(t,n,!1):(d=this._horizontalContainer(d,!0),(i=this._nextHorizontalCell(d,t,a))[0]!==t[0]&&Sr(this.table,!0))),this._focusFocusable(t,i)),!0},_moveUp:function(e,t,o){var r,l,n,i,a=e.parent().parent();t?(r=(r=e.parent()).prevAll(F).first(),r=e.parent().is(F)?r.children().eq(e.index()):r.children(R).last()):o&&e.parent().is(F)&&this._hasReorderableRows()?(l=e.index(),r=(r=e.parent()).prevAll(F).first(),n=this.tbody.children(F).index(r),i=this.tbody.children(F).index(e.parent()),n>=0&&!this.trigger(We,{oldIndex:i,newIndex:n,row:e.parent()})&&(this.reorderRows(e.parent(),n),r=this.tbody.children(F).eq(n).children().eq(l))):(r=this._prevVerticalCell(a,e))[0]||(this._lastCellIndex=0,a=this._verticalContainer(a,!0),(r=this._prevVerticalCell(a,e)).is(":hidden")&&(r=r.nextAll().not(":hidden").first()),r[0]&&Sr(this.table,!0));var s=this._lastCellIndex||0;return this._focusFocusable(e,r),this._lastCellIndex=s,!0},_moveDown:function(e,t,o){var r,l,n,i,a=e.parent().parent();t?(r=(r=e.parent()).nextAll(F).first(),r=e.parent().is(F)?r.children().eq(e.index()):r.children(R).first()):o&&e.parent().is(F)&&this._hasReorderableRows()?(l=e.index(),r=(r=e.parent()).nextAll(F).first(),n=this.tbody.children(F).index(r),i=this.tbody.children(F).index(e.parent()),n>=0&&!this.trigger(We,{oldIndex:i,newIndex:n,row:e.parent()})&&(this.reorderRows(e.parent(),n+1),r=this.tbody.children(F).eq(n).children().eq(l))):(r=this._nextVerticalCell(a,e))[0]||(this._lastCellIndex=0,a=this._verticalContainer(a),(r=this._nextVerticalCell(a,e))[0]&&Sr(this.table,!0));var s=this._lastCellIndex||0;return this._focusFocusable(e,this._findVisibleCell(r)),this._lastCellIndex=s,!0},_moveColumn:function(t,o){var r=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+":visible"),l=yo(Lo(this.columns)),n=r.index(e(t)),i=o?-1:1,a=l[n],s=Bo(l,this.columns,n,n+i);s>=0&&(this.reorderColumn(s,a,o),this.trigger(Pe,{newIndex:s,oldIndex:n,column:a}))},_handleHome:function(e,t){const o=this;let r=e.parent();const l=r.parent(),n=o.lockedTable&&o.lockedTable.children("tbody")[0]===l[0],i=l[0]===o.tbody[0];let a;const s=o._hasVirtualColumns(),d=o._hasVirtualRows(),c=0===(d?o.virtualScrollable.wrapper:o.content).scrollLeft();return s&&d&&t?(o._focusVirtualCell(!0,s&&!c),!0):s?(c?o._setCurrent(o.table.find(F).first().children(M).first()):o._forceScrollVirtualColumn(u.HOME,t),!0):d&&t?(o._focusVirtualCell(!0),!0):(t?a=o.lockedTable?o.lockedTable.find(F).first().children(M).first():o.table.find(F).first().children(M).first():(i||n)&&(i&&this.lockedTable&&(r=o._relatedRow(r)),a=r.children(R).first()),a&&a.length?(o._setCurrent(a),!0):void 0)},_setCurrentVirtualCell:function(e){const t=this;e?this._setCurrent(t.table.find(F).first().children(M).first()):this._setCurrent(t.table.find(F).last().children(M).last())},_forceScrollVirtualColumn:function(e,t,o){const r=this;o?(r._shouldFocusInLastRow=!t,r._shouldFocusInFirstRow=t):e===u.HOME?r._shouldFocusInFirstRow=t:r._shouldFocusInLastRow=t,r.one(te,(function(){o&&r.one(te,(function(){r._setCurrentVirtualCell(t)})),r._shouldFocusInLastRow&&(r.content.scrollTop(r.content[0].scrollHeight),delete r._shouldFocusInLastRow),r._shouldFocusInFirstRow&&(r.content.scrollTop(0),delete r._shouldFocusInFirstRow)})),r._scrollToColumn(e)},_focusVirtualCell:function(e,t){const o=this,r=this.virtualScrollable.verticalScrollbar,l=Math.ceil(r.scrollTop()+r.innerHeight())>=r[0].scrollHeight,n=0===this.virtualScrollable.verticalScrollbar.scrollTop(),i=e?n:l,a=e?u.HOME:u.END;if(i)t?o._forceScrollVirtualColumn(a,e,!0):o._setCurrentVirtualCell(e);else{0===o.dataSource.group().length&&(o.virtualScrollable._alwaysScrollTop=!0);const l=e?0:r[0].scrollHeight;o.one(te,(function(){t?o._forceScrollVirtualColumn(a,e,!0):(o._setCurrentVirtualCell(e),o._shouldFocusInLastRow&&delete o._shouldFocusInLastRow,o._shouldFocusInFirstRow&&delete o._shouldFocusInFirstRow)})),r.scrollTop(l),r.trigger(se)}},_handleEnd:function(e,t){const o=this;let r=e.parent();const l=r.parent(),n=o.lockedTable&&o.lockedTable.children("tbody")[0]===l[0],i=l[0]===o.tbody[0];let a;const s=o._hasVirtualColumns(),d=o._hasVirtualRows(),c=d?o.virtualScrollable.wrapper:o.content,p=c.scrollLeft()+c.innerWidth()>=c[0].scrollWidth;return s&&d&&t?(o._focusVirtualCell(!1,s&&!p),!0):s?(p?o._setCurrent(o.table.find(F).last().children(M).last()):o._forceScrollVirtualColumn(u.END,t),!0):d&&t?(o._focusVirtualCell(!1),!0):(t?a=o.table.find(F).last().children(M).last():(i||n)&&(!i&&this.lockedTable&&(r=o._relatedRow(r)),a=r.children(R).last()),a&&a.length?(o._setCurrent(a),!0):void 0)},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,o,r,l){const n=this.options.editable&&"incell"==this._editMode();let i,s=e(a()).closest(".k-edit-cell");const d=l.is(me),c=!l.is("table"),u=t.find(me).length>1,p=this._isFocusableGridElement(t),h=!Mr(t);if(!s[0]&&d&&c&&u&&p&&h)return l.is(":last-child")&&!r||l.is(":first-child")&&r?(Sr(this.table,!0),!0):((l=r?l.prev(me):l.next(me)).trigger("focus"),!0);if(!n||t.is("th")||(this.options.scrollable?this._headertables.filter(o).length:this.thead.filter(l).length)){if(t.parent().hasClass("k-filter-row")){if(i=this._filterFocusable(),!r&&i[i.length-1]===document.activeElement)return i.first().trigger("focus"),!0;if(r&&i[0]===document.activeElement)return i.last().trigger("focus"),!0}return!1}return s[0]&&s[0]!==t[0]&&(t=s),s=this._tabNext(t,o,r),s[0]!==t[0]&&(!!s.length&&(this._handleEditing(t,s,s.closest("table")),!0))},_handleEscKey:function(t){const o=a(),r="incell"==this._editMode();if(!Mr(t))return!t.has(o).length||this._isFocusableGridElement(t)&&1===t.find(me).length?!!t.parent().hasClass("k-filter-row")&&(this._filterFocusable().attr(tt,-1),Sr(this.table,!0),!0):(Sr(this.table,!0),!0);if(r)this.closeCell(!0);else{var l=e(t).parent().index();o&&o.blur(),this.cancelRow(!0),l>=0&&this._setCurrent(this.items().eq(l).children(M).first())}return Sr(this.table,!0),!0},_toggleCurrent:function(e,t,o){var r=e.parent();return!e.is(".k-command-cell")&&(!r.is(".k-filter-row")&&((r.is(x+ze)||!(t||!o))&&(r.find(".k-icon,.k-svg-icon").first().click(),!0)))},_handleSpaceKey:function(t,r){var l=this;if(r&&l.groupable&&t.hasClass(He)){var n=l.groupable.descriptors(),i=t.attr(o.attr("field")),a=l.groupable.aggregates();return l.groupable._canDrag(t)?n.push({field:i,dir:"asc",aggregates:a||[]}):n=e.grep(n,(function(e){return e.field!==i})),l.dataSource.group(n),!0}},_handleEnterKey:function(t,o,r){var l,n=this.options.editable&&!1!==this.options.editable.update,i=r.closest("td"),s=this._hasDetails();if(r.is("table")||e.contains(t[0],r[0])||(t=i),t.is("th"))return l=t.find(".k-link"),!(t.has(e(a())).length>0)&&(l.length?l.click():t.parent().hasClass("k-filter-row")?(this._filterFocusable().attr(tt,0),t.find(":kendoFocusable").first().trigger("focus")):t.find(ve).trigger("focus"),!0);if(this._toggleCurrent(t,n,s))return!0;var d=t.find(":kendoFocusable").first();return d[0]&&!t.hasClass("k-edit-cell")&&t.hasClass("k-focus")?(d.trigger("focus"),!0):!(!n||r.is(":button,.k-button,textarea"))&&(i[0]||(i=t),this._handleEditing(i,!1,o),!0)},_nextHorizontalCell:function(e,t,o){if(!t.nextAll(R).length){var r=e.find(A);if(-1==r.index(t.parent())){if(t.hasClass(He)){var l=[];return Wo([Ko(this.columns)[0]],sr(r.eq(0).children(":visible").first()),l,0,0),l[o]?l[o][0]:t}return t.parent().hasClass("k-filter-row")?r.last().children(R).first():this._findVisibleCell(r.eq(o).children(R+",[hidden]").first())}}return this._findVisibleCell(t.nextAll(R+",[hidden]").eq(0))},_prevHorizontalCell:function(e,t,o){var r=t.prevAll(R);if(!r.length){var l=e.find(A);if(-1==l.index(t.parent())){if(t.hasClass(He)){var n=[],i=Ko(this.columns);return Wo([i[i.length-1]],sr(l.eq(0).children().last()),n,0,0),n[o]?n[o][0]:t}return t.parent().hasClass("k-filter-row")?l.last().children(R).last():l.eq(o).children(R).last()}}r=t.prevAll(R+",[hidden]");let a=this._findVisibleCell(r.first());return a.is(".k-group-cell")?a.next(R):a},_currentDataIndex:function(e,o){var r=o.attr("data-index");if(!r)return t;var l=Ko(this.columns).length;return l&&!e.closest(_t).hasClass("k-grid-content-locked")[0]?r-l:r},_findVisibleCell:function(e){var t,o=e.index(),r=e.closest("tr").index();if(e.is("[hidden]")){t=e.prevAll(":not([hidden])").first();var l=e.prevUntil(":not([hidden])","[hidden]").length;if(!t.attr("colspan")||t.attr("colspan")>1&&t.attr("colspan")<=l+1){if(0===(t=e.prevAll("[hidden]").last()).length)return e.closest("tr").prevAll().find(`td:nth-of-type(${o+1}):visible`).last();for(;!(t.attr("rowspan")||t.attr("rowspan")>1&&t.attr("rowspan")!=r-t.closest("tr").index()||Math.abs(t.index()-o)==t.attr("colspan"));)if(0===(t=t.closest("tr").prevAll().find("td, th").eq(o).first()).length){t=e;break}}}else t=e;return t},_prevVerticalCell:function(t,o){var r,l=o.parent(),n=t.children(A),i=n.index(l),a=this._currentDataIndex(t,o);if(a||o.hasClass(He))return(r=ar(o)).eq(r.length-2);if(a=Math.max(l.children(E).index(o),this._lastCellIndex||0),l.hasClass("k-filter-row")){let e=n.last().children(".k-group-cell").length;return ir(t).filter(Co).eq(Math.max(0,a-e))}if(-1==i){if(this._hasVirtualColumns()&&(a=this._virtualCellIndex),!(l=t.find("tr.k-filter-row:visible"))[0]){(this._hasDetails()||o.parent().find(".k-hierarchy-cell").length)&&a&&a--;let e=0;return o.parent().is(".k-table-group-row")&&(e=n.last().children(".k-group-cell").length),ir(t).eq(Math.max(0,a-e))}this._hasDetails()&&a--}else l=0===i?e():n.eq(i-1);if((r=l.children(E)).length>a){let e=r.eq(a);return e.is(".k-group-cell")&&(e=e.nextAll("td").not(".k-group-cell").not(":hidden").first()),this._findVisibleCell(e)}return r.eq(0)},_nextVerticalCell:function(e,o){var r,l,n,i=l=o.parent(),a=e.children(A),s=a.index(i),d=this._currentDataIndex(e,o),c=this.virtualScroll||{};if(-1!=s&&d===t&&o.hasClass(He))return sr(o).eq(1);d=d?parseInt(d,10):i.children(E).index(o),d=Math.max(d,this._lastCellIndex||0),-1==s?(i=a.eq(0),c.columns&&(n=parseInt(i.children().first().attr("colspan"),10),d=this._virtualCellIndex-(n>1?n:0)),(this._hasDetails()||i.find(".k-hierarchy-cell").length)&&d++,i.hasClass("k-table-group-row")&&(d+=l.children(".k-group-cell").length)):i=a.eq(s+o[0].rowSpan);let u=(r=i.children(".k-group-cell,"+E)).eq(0);return r.length>d&&(u=r.eq(d)),u.is(".k-group-cell")&&(u=u.nextAll("td").not(".k-group-cell").not(":hidden").first()),u},_verticalContainer:function(e,t){var o=e.parent(),r=this._navigatableTables.length,l=Math.floor(r/2),n=_(o[0],this._navigatableTables);return t&&(l*=-1),((n+=l)>=0||n<r)&&(o=this._navigatableTables.eq(n)),o.find(t?">thead":">tbody")},_filterFocusable:function(){return this.wrapper.find(".k-filter-row").find(".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible")},_horizontalContainer:function(e,t){var o=this._navigatableTables.length;if(o<=2)return e;var r=e.parent(),l=_(r[0],this._navigatableTables);return l+=t?1:-1,!t||2!=l&&l!=o?!t&&(1==l||l<0)?e:this._navigatableTables.eq(l).find("thead, tbody"):e},_tabNext:function(e,t,o){var r=!0,l=o?e.prevAll(R).first():e.nextAll(":visible").first();if(!l.length){if(l=e.parent(),this.lockedTable&&(r=o&&t==this.lockedTable[0]||!o&&t==this.table[0],l=this._relatedRow(l)),r){if(this._hasVirtualColumns())return e;l=l[o?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible").first()}l=o?l.children(R).last():l.children(R).first()}return l},_handleEditing:function(t,o,r){var l,n,i=this,s=e(a()),d=i._editMode(),c=$t.msie,u=i._editContainer,p=i.options.editable&&!1!==i.options.editable.update;if(r=e(r),n="incell"==d?t.hasClass("k-edit-cell"):t.parent().hasClass("k-grid-edit-row"),i.editable){if(e.contains(u[0],s[0])&&(s.trigger("blur"),c&&s.trigger("blur")),!i.editable)return void Sr(i.table);if(!i.editable.end())return"incell"==d?i._setCurrent(u):i._setCurrent(u.children().filter(R).first()),void((l=u.find(":kendoFocusable").first()[0])&&l.focus());"incell"==d?i.closeCell():(i.saveRow(),n=!0)}o&&i._setCurrent(o),Sr(i.table,!0),p&&((!n&&!o||o)&&(d===st?e(i.current()).hasClass("k-hierarchy-cell")||i.editCell(i.current()):i.editRow(i.current().parent())),i._toggleToolbarEditingItemsVisibility())},_wrapper:function(){var e=this,t=e.table,r=e.options.height,l=e.options.width,n=e.element;n.is(_t)||(n=n.wrap("<div/>").parent()),e.wrapper=n.addClass("k-grid "+o.getValidCssClass("k-grid-","size",e.options.size)),r&&(e.wrapper.css(Xe,r),t.css(Xe,et)),l&&e.wrapper.css(Ze,l),e._initMobile()},_initContextMenu:function(){var e=this,t=e.options,o=h(t.contextMenu)&&b(t.contextMenu.groups)?{items:t.contextMenu.groups}:{items:eo},l=h(t.contextMenu)&&b(t.contextMenu.body)?{items:t.contextMenu.body}:{items:Xt},n=h(t.contextMenu)&&b(t.contextMenu.head)?{items:t.contextMenu.head}:{items:Zt},i=h(t.contextMenu)?t.contextMenu:{};l=g({},{messages:t.messages,target:e.tbody,filter:".k-table-td",action:e._action.bind(e),states:e._buildStates()},i,l),n=g({},{messages:t.messages,target:e.thead,filter:".k-table-th",action:e._action.bind(e),states:e._buildStates()},i,n),e.groupable&&(o=g({},{showOn:"click",target:e.groupable.groupContainer,filter:".k-groupable-context-menu",messages:t.messages,action:e._action.bind(e),states:e._buildStates()},i,o)),e.tbodyContextMenu=new r.grid.ContextMenu("<ul></ul>",l),e.theadContextMenu=new r.grid.ContextMenu("<ul></ul>",n),e.groupsContextMenu=!!e.groupable&&new r.grid.ContextMenu("<ul></ul>",o)},_buildStates:function(){var t=this;return{isEditable:t.options.editable,isSelectable:t.options.selectable,isSortable:t.options.sortable,isRowReorderable:h(t.options.reorderable)?t.options.reorderable.rows:t.options.reorderable,isGroupable:t.options.groupable,allowPaste:t.options.allowPaste,alwaysDisabled:!1,hasSelection:()=>!!this.select()&&this.select().length>0,isSorted:()=>!(this.dataSource.sort()&&this.dataSource.sort().length>0),canMoveGroupPrev:t=>e(t).closest(".k-chip").index()>0,canMoveGroupNext:t=>{var o=e(t).closest(".k-chip-list").children().length-1;return e(t).closest(".k-chip").index()<o}}},_action:function(e){var t=e.command,o=g({grid:this},e.options);return new r.grid.commands[t](o).exec()},_initMobile:function(){var e=this.options,t=this;if(this._isMobile="auto"!==t.options.adaptiveMode&&!0===e.mobile&&o.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile,this._isMobile){var r=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+o.ns+'stretch="true" data-'+o.ns+'role="view" data-'+o.ns+'init-widgets="false"></div>').parent();this.pane=this._createPane(r),this.view=this.pane.view(),e.height?this.pane.element.parent().css(Xe,e.height):this.pane.element.parent().css(Xe,this.wrapper[0].style.height),this._editAnimation="slide",t.wrapper.on("transitionend"+V,(function(e){e.stopPropagation()})),t.wrapper.on("contextmenu"+V,"th a",(function(e){return e.preventDefault(),!1})),this.view.bind("showStart",(function(){t._isLocked()&&(t._updateTablesWidth(),t._applyLockedContainersWidth(),t._syncLockedContentHeight(),t._syncLockedHeaderHeight(),t._syncLockedFooterHeight())}))}},_createPane:function(e){return o.Pane.wrap(e,{viewEngine:{viewOptions:{renderOnInit:!0,wrap:!1,wrapInSections:!0,detachOnHide:!1,detachOnDestroy:!1}}})},_initLoader:function(t){var o=this,r={size:"medium",messages:{exporting:"Exporting..."}};r=e.extend({},r,t);const l=e("<div></div>").kendoLoader(r).data("kendoLoader");o.loader=l,o._loaderContainer=I.u.bind(o)},_tbody:function(){var t,o=this.table;(t=o.find(">tbody")).length||(t=e("<tbody/>").appendTo(o)),t.addClass("k-table-tbody"),this.tbody=t},_scrollable:function(){var t,r,l,n=this,i=n.options,a=i.scrollable,s=!0!==a&&a.virtual?function(e){var t;if("string"==typeof e)return"true"===(t=e.toLowerCase())?{rows:!0}:{rows:t.indexOf("rows")>-1,columns:t.indexOf("columns")>-1};if(!0===e)return{rows:!0}}(a.virtual):null,d=!o.support.kineticScrollNeeded||s&&s.rows?o.support.scrollbar():0;if(a){(t=n.wrapper.children(".k-grid-header"))[0]||(t=e('<div class="k-grid-header" />').insertBefore(n.table)),t.css(Nt?"padding-left":"padding-right",a.virtual?d+1:d),(r=e('<table role="none" class="k-grid-header-table k-table"/>')).addClass(o.getValidCssClass("k-table-","size",i.size)),r.width(n.table[0].style.width),r.append(n.thead),t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(r)),n.content=n.table.parent(),n.virtualScroll=s,n.content.is(".k-virtual-scrollable-wrap, ."+Yt)&&(n.content=n.content.parent()),n.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(n.content=n.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),n.content.parent().hasClass("k-grid-container")||n.content.wrap("<div class='k-grid-container' />").parent(),s&&s.rows&&!n.virtualScrollable&&n._createVirtualScrollable(),s&&s.columns&&n.table.add(n.thead.parent()).css({width:qo(Zo(Jo(n.columns)))}),l=t.children(".k-grid-header-wrap"),n.scrollables=l.add(n.content);var c=n.wrapper.find(".k-grid-footer");if(c.length&&(n.scrollables=n.scrollables.add(c.children(".k-grid-footer-wrap"))),l.off("scroll"+V).on("scroll"+V,(function(e){n._scrollLeft!==this.scrollLeft&&o.scrollLeft(n.scrollables.not(e.currentTarget),this.scrollLeft)})),s&&s.rows)n.content.find(">.k-virtual-scrollable-wrap").off("scroll"+V).on("scroll"+V,(function(){var e=this.scrollLeft!=n._scrollLeft;n._scrollLeft=this.scrollLeft,o.scrollLeft(n.scrollables,this.scrollLeft),n.lockedContent&&(n.lockedContent[0].scrollTop=this.scrollTop),s.columns&&e&&n.refresh()}));else{var u=a.endless,p=n.dataSource.options.pageSize;u&&(n._endlessPageSize=p),n.content.off("scroll"+V).on("scroll"+V,(function(e){var t=this.scrollLeft!=n._scrollLeft;n._scrollLeft=this.scrollLeft,o.scrollLeft(n.scrollables.not(e.currentTarget),n._scrollLeft),n.lockedContent&&e.currentTarget==n.content[0]&&(n.lockedContent[0].scrollTop=this.scrollTop),u&&this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!n._endlessFetchInProgress&&n._endlessPageSize<n.dataSource.total()&&(n._skipRerenderItemsCount=n._endlessPageSize,n._endlessPageSize=n._endlessPageSize+p,n.dataSource.options.endless=!0,n._endlessFetchInProgress=!0,n.dataSource.pageSize(n._endlessPageSize)),s&&s.columns&&t&&(n._virtualColScroll=!0,n._cacheEditableState(),n.refresh(),n._restoreEditableState(),n._virtualColScroll=!1),n.rowResizer&&n.rowResizer.css("left",e.currentTarget.scrollLeft+"px")}));var h=n.content.data("kendoTouchScroller");h&&h.destroy(),(h=o.touchScroller(n.content))&&h.movable&&(n.touchScroller=h,h.movable.bind("change",(function(e){o.scrollLeft(n.scrollables,-e.sender.x),n.lockedContent&&n.lockedContent.scrollTop(-e.sender.y)})),n.one(te,(function(e){e.sender.wrapper.addClass("k-grid-backface")})))}}},_createVirtualScrollable:function(){var e=this;e.virtualScrollable&&e.virtualScrollable.destroy(),e.virtualScrollable=new ro(e.content,{dataSource:e.dataSource,itemHeight:function(){return e._averageRowHeight()},page:function(){e._restoreEditableState()},scroll:function(){e._focusEditable()},loadStart:function(){e._progress(!0)},loadEnd:function(){e._progress(!1)}}),e.virtualScrollable.bind(ie,e._onVirtualPaging.bind(e))},_onVirtualPaging:function(){var e=this;e._cacheEditableState(),e._isVirtualIncellEditable()&&(e._shouldClearEditableState=!1,e.closeCell(),e._shouldClearEditableState=!0)},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable()},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===dt},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===st},_isVirtualPopupEditable:function(){return this.virtualScrollable&&"popup"===this._editMode()},_hasVirtualColumns:function(){return!!(this.virtualScroll||{}).columns},_hasVirtualRows:function(){return!!(this.virtualScroll||{}).rows},_scrollVirtualWrapper:function(){var e=this,t=e.virtualScrollable;(e._isVirtualInlineEditable()||e._isVirtualIncellEditable())&&(t._isScrolledToBottom()?t._scrollWrapperToBottom():t._isScrolledToTop()&&t._scrollWrapperToTop())},_scrollVirtualWrapperOnColumnResize:function(){var e=this.virtualScrollable;e&&e._scrollWrapperOnColumnResize()},_restoreEditableState:function(){var t,o,r=this,l=r._editableState||{},n=l.model,i=r.dataSource,a=r._isVirtualInlineEditable(),s=r._isVirtualIncellEditable(),d=r._hasVirtualColumns();(a||s||d)&&n&&i._getByUid(n.uid,i.view())&&(r._editMode()===dt?(r._shouldClearEditableState=!1,r.editRow(n),d||r._focusEditable()):r._editMode()===st&&(t=r.tbody.children(lo("uid",n.uid)),(o=e(t).children(lo(it,l.field)))[0]&&(r._shouldClearEditableState=!1,r.editCell(o),d||r._focusEditable()))),r._shouldClearEditableState=!0},_focusEditable:function(){var e=this,t=(e._editableState||{}).field,o=e._editContainer;o&&o.length&&!y(o[0],a())&&e._canFocusEditable()&&(e._isVirtualInlineEditable()||e._hasVirtualColumns()?o.find(lo(nt,t)).find(me).eq(0).trigger("focus"):(e._isVirtualIncellEditable()||e._hasVirtualColumns())&&o.find(me).eq(0).trigger("focus"))},_canFocusEditable:function(){var e=this;return(e._isVirtualIncellEditable()||e._isVirtualInlineEditable()||e._hasVirtualColumns())&&(Ar((e.virtualScrollable||{}).wrapper,e._editContainer)||Ar(e.content,e._editContainer))},_cacheEditableState:function(){var t,r,l,n=this,i=n._editContainer,s=i?n._modelForContainer(i):null,d=n._isVirtualInlineEditable(),c=n._isVirtualIncellEditable(),u=n._hasVirtualColumns();(d||c||u)&&s&&(n._clearEditableState(),t=e(a()),i&&t[0]&&y(i[0],t[0])&&(t.change(),(r=o.widgetInstance(t,o.ui))&&v(r.value)&&t.is(at)&&(l=t.val(),t.is("[type='checkbox'")&&(l=t.is(":checked")),r.value(l),r.trigger(J))),n._editMode()===dt?n._editableState={model:s,field:t.closest("["+o.attr(nt)+"]").attr(o.attr(nt))}:n._editMode()===st&&(n._editableState={model:s,field:i.attr(o.attr(it))}))},_clearSortClasses:function(){var e=this,t=e.content||e.table,o=e.lockedContent;t&&t.find(z).removeClass(Te),o&&o.find(z).removeClass(Te)},_clearEditableState:function(){var e=this;(e.virtualScrollable||e.virtualScroll&&e._hasVirtualColumns())&&(e._editableState=null)},_destroyVirtualScrollable:function(){var e=this;e._clearEditableState(),e.virtualScrollable&&e.virtualScrollable.element&&e.virtualScrollable.destroy(),e.virtualScrollable=null},_destroyRowResizing:function(){this.rowResizing&&(this.rowResizing.destroy(),this.rowResizing=null),this.rowResizer&&(this._detachRowResizerEvents(),this.rowResizer.off(Je+V),this.rowResizer=null,this._clearCachedRowsHeight())},_renderNoRecordsContent:function(){var t=this;if(t.options.noRecords){var r=t.table.parent().children("."+Ce);r.length&&r.remove(),t.dataSource&&t.dataSource.view().length||(r=e(t.noRecordsTemplate({grid:t})),o.applyStylesFromKendoAttributes(r,["margin","position"]),r.insertAfter(t.table))}},_setContentWidth:function(t){var r,l=this,n="k-grid-content-expander",i='<div class="'+n+'"></div>',a=l.resizable;l.options.scrollable&&l.wrapper.is(":visible")&&(r=l.table.parent().children("."+n),l._setContentWidthHandler=l._setContentWidth.bind(l),l.dataSource&&l.dataSource.view().length?r[0]&&(r.remove(),a&&a.unbind("resize",l._setContentWidthHandler)):(r[0]||(r=e(i).appendTo(l.table.parent()),a&&a.bind("resize",l._setContentWidthHandler)),l.thead&&(r.width(l.thead.width()),isNaN(parseFloat(t,10))||o.scrollLeft(l.content,t))),l._applyLockedContainersWidth(!0),l._syncLockedContentHeight(),l.lockedHeader&&0===l.table[0].clientWidth&&(l.table[0].style.width="1px"))},_applyLockedContainersWidth:function(e){if(this.options.scrollable&&this.lockedHeader){let t,r=this.thead.parent(),l=r.parent(),n=this.wrapper[0].clientWidth,i=this._groups(),a=o.support.scrollbar(),s=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),c=r.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),u=Oo(s),p=Oo(c);i>0&&e&&(u+=d(this.lockedHeader.find(".k-group-cell").first())*i),u>=n&&(u=n-3*a),this.lockedHeader.add(this.lockedContent).width(u),l[0].style.width=l.parent().width()-u-2+mt,r.add(this.table).width(p),this.virtualScrollable&&!Ut&&(n-=a),this.content[0].style.width=n-u-1+mt,this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(u),t=this.footer.find(".k-grid-footer-wrap"),t[0].style.width=l[0].clientWidth+mt,t.children().first().width(p))}},_setContentHeight:function(){var e,t,r,l=this,n=l.options,i=l.wrapper.children(".k-grid-header"),a=o.support.scrollbar(),s=(n.scrollable||{}).height;if(n.scrollable&&l.wrapper.is(":visible")){s&&""===l.content[0].style.height&&(l.content[0].style.height=s),e=l.wrapper.innerHeight(),e-=c(i),l.pager&&l.pager.element.is(":visible")&&(e-=c(l.pager.element)),n.groupable&&(e-=c(l.wrapper.children(".k-grouping-header"))),n.toolbar&&(e-=c(l.wrapper.children(".k-grid-toolbar"))),l.footerTemplate&&(e-=c(l.wrapper.children(".k-grid-footer"))),l.statusBar&&(e-=c(l.wrapper.children(".k-selection-aggregates")));((t=l.wrapper)[0].style.height||(r=t.height(),t.height(et),r!=t.height()?(t.height(""),1):(t.height(""),0)))&&(e>2*a?(l.lockedContent&&(a=l.table[0].offsetWidth>l.table.parent()[0].clientWidth?a:0,l.lockedContent.height(e-a)),l.content.height(e)):l.content.height(2*a+1))}},_averageRowHeight:function(){var e=this,t=e._items(e.tbody,!0).length,o=e._rowHeight;if(0===t)return o;e._rowHeight||(e._rowHeight=o=c(e.table)/t,e._sum=o,e._measures=1);var r=c(e.table)/t;return o!==r&&(e._measures++,e._sum+=r,e._rowHeight=e._sum/e._measures),o},_dataSource:function(){var e,o=this,r=o.options,n=r.dataSource;n=b(n)?{data:n}:n,h(n)&&(g(n,{table:o.table,fields:o.columns}),e=r.pageable,h(e)&&e.pageSize!==t&&(n.pageSize=e.pageSize)),o.dataSource&&o._refreshHandler?o.dataSource.unbind(J,o._refreshHandler).unbind(T,o._progressHandler).unbind(pe,o._requestEndHandler).unbind(H,o._errorHandler).unbind(ut,o._sortHandler):(o._refreshHandler=o.refresh.bind(o),o._progressHandler=o._requestStart.bind(o),o._requestEndHandler=o._requestEnd.bind(o),o._errorHandler=o._error.bind(o),o._sortHandler=o._clearSortClasses.bind(o)),o.dataSource=l.create(n).bind(J,o._refreshHandler).bind(T,o._progressHandler).bind(pe,o._requestEndHandler).bind(H,o._errorHandler).bind(ut,o._sortHandler)},_error:function(){this._progress(!1),this._requestInProgress=!1},_requestStart:function(){this._progress(!0),this._requestInProgress=!0},_requestEnd:function(){this._requestInProgress=!1},_modelChange:function(t){var l,n,i,a,s,d,c,u,p,h=this,g=h.tbody,f=t.model,m=h.tbody.find("tr["+o.attr("uid")+"="+f.uid+"]"),b=m.hasClass("k-table-alt-row"),_=h._items(g).index(m),k=h.lockedContent;if(k&&(l=h._relatedRow(m)),m.add(l).children(".k-edit-cell").length&&!h.options.rowTemplate)m.add(l).children(":not(.k-group-cell,.k-hierarchy-cell)").each((function(){n=e(this),(i=rr(h.columns)[h._calculateColumnIndex(n)]).field===t.field&&(n.hasClass("k-edit-cell")?n.addClass("k-dirty-cell"):h._displayCell(n,i,f))}));else if(!m.hasClass("k-grid-edit-row")){d=e().add(m),k&&(a=(b?h.lockedAltRowTemplate:h.lockedRowTemplate)(f),d=d.add(l),l.replaceWith(a)),a=(b?h.altRowTemplate:h.rowTemplate)(f);let t=e(a);for(o.applyStylesFromKendoAttributes(t,["display"]),m.replaceWith(t),a=h._items(g).eq(_),k&&(m=m.add(l),l=h._relatedRow(a)[0],wr(a[0],l),a=a.add(l)),((s=h.options.selectable)||h._checkBoxSelection)&&m.hasClass(_e)&&h.select(a),u=d.children(":not(.k-group-cell,.k-hierarchy-cell)"),c=a.children(":not(.k-group-cell,.k-hierarchy-cell)"),_=0,p=h.columns.length;_<p;_++)i=h.columns[_],n=c.eq(_),s&&u.eq(_).hasClass(_e)&&n.addClass(_e);h.trigger("itemChange",{item:a,data:f,ns:r})}},_pageable:function(){var t,r=this,l=r.options.pageable,n=r.options.size,i=r.options.navigatable;if(l){(t=r.wrapper.children("div.k-grid-pager")).length||(t=e('<div class="k-pager k-grid-pager"/>')),"top"===l.position?t.prependTo(r.wrapper).addClass("k-grid-pager-top"):t.appendTo(r.wrapper),r.pager&&r.pager.destroy();let a=r.options.adaptiveMode;"auto"===r.options.adaptiveMode&&l&&"object"==typeof l&&l.adaptiveMode&&(a=l.adaptiveMode),"object"==typeof l&&l instanceof o.ui.Pager?r.pager=l:r.dataSource._groupPaging?r.pager=new jt(t,g({},l,{dataSource:r.dataSource,navigatable:i,size:n,adaptiveMode:a})):r.pager=new o.ui.Pager(t,g({},l,{dataSource:r.dataSource,navigatable:i,size:n,adaptiveMode:a})),r.pager.bind("pageChange",(function(e){r.trigger("page",{page:e.index})&&e.preventDefault()})),r._togglePagerVisibility()}},_statusBar:function(){var t=this,o=t.options,r=t.wrapper,l=o.statusBarTemplate,n="";l&&(t.statusBar?t.statusBar.html(l({aggregates:t._cellAggregates})):(n+='<div class="k-selection-aggregates k-grid-selection-aggregates">',n+=l({aggregates:t._cellAggregates}),n+="</div>",o.scrollable?t.statusBar=e(n).insertAfter(r.find(".k-grid-container")):t.statusBar=e(n).insertAfter(r.find(".k-grid-table"))))},_rerenderGroupFooterTemplate:function(e){const t=this,r=e.uid,l=t.groupFooterTemplate,n=t.lockedGroupFooterTemplate,i=t._groupRows.find((t=>t.value===e[t.field])),a=t.options.scrollable;let s=t.tbody;if(a&&(s=t.wrapper.find(".k-grid-container")),!i)return;const d=(e,o)=>{const r=e.nextAll(".k-group-footer").first();if(r&&r.length){const e=o(t._groupData(i,!1,!1));r.replaceWith(e)}},c=s.find("tr["+o.attr("uid")+"="+r+"]");if(c.length>1){d(c.first(),n)}d(c.last(),l)},_footer:function(){var t,r=this,l=r.dataSource.aggregates(),n="",i=r.footerTemplate,a=r.options,s=r.footer||r.wrapper.find(".k-grid-footer");if(i)if(n=e(r._wrapFooter(i(l))),o.applyStylesFromKendoAttributes(n,["display","left","right"]),s.length){var d=n;s.replaceWith(d),s=r.footer=d}else a.scrollable?(r.statusBar?r.footer=n.insertBefore(r.statusBar):a.pageable&&"top"!==a.pageable.position?r.footer=n.insertBefore(r.wrapper.children("div.k-grid-pager")):r.footer=n.appendTo(r.wrapper),s=r.footer):s=r.footer=n.insertAfter(r.tbody);else s&&!r.footer&&(r.footer=s);if(s.length&&(a.scrollable&&(t=s.attr(tt,-1).children(".k-grid-footer-wrap"),r.scrollables=e(r.scrollables.filter((function(){return!e(this).is(".k-grid-footer-wrap")})).toArray()).add(t)),r._footerWidth&&s.find("table").css("width",r._footerWidth),t)){var c=o.scrollLeft(r.content);!0!==a.scrollable&&r.virtualScroll&&r.virtualScroll.rows&&(c=o.scrollLeft(r.wrapper.find(".k-virtual-scrollable-wrap"))),o.scrollLeft(t,c)}r.lockedContent&&(r._appendLockedColumnFooter(),r._applyLockedContainersWidth(),r._syncLockedFooterHeight())},_wrapFooter:function(t){var r,l=this,n="",i=o.support.mobileOS?0:o.support.scrollbar();return l.options.scrollable?((r=(n=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table class="k-table k-grid-footer-table"><tfoot class="k-table-tfoot">'+t+"</tfoot></table></div></div>")).find("table")).addClass(o.getValidCssClass("k-table-","size",l.options.size)),l._appendCols(r),n.css(Nt?"padding-left":"padding-right",i),n):'<tfoot class="k-grid-footer k-table-tfoot">'+t+"</tfoot>"},_actionsheetFooterActionsTemplate:function(e){let t="";return e.forEach((e=>{const r=e.command,l=e.text;t+=o.html.renderButton(`<button data-command=${r}>${l}</button>`,e)})),t},_isAdaptive:function(){const e=this;return"auto"===e.options.adaptiveMode&&(e.smallMQL.mediaQueryList.matches||e.mediumMQL.mediaQueryList.matches)},_toolPopup:function(e){return e.popup&&e.popup.wrapper},_filterToolbarTool:function(t){const r=this,l=rr(r.columns),n=r.options,i=e=>{const t=r._isAdaptive()?"[ref-actionsheet-action-button]":"[ref='clear-filter']";return r._toolPopup(e)?.find(t)},a=r._toolbarOptionsForTool("filter");const s=t.data("kendoColumnMenu");s&&(s.wrapper.off("click"+V),s.element.off("click"+V),s.destroy());const d=!(!n.filterable||!1===r.options.columnMenu.filterable)&&g(!0,{pane:r.pane},n.filterable);if(!d)return;const c={dataSource:r.dataSource,columns:!1,sortable:!1,filterable:d,hideAutoSizeColumn:!0,owner:r,adaptiveMode:r.options.adaptiveMode,encodeTitles:r.options.encodeTitles,componentType:"modern",_actionsheet:{actionButtons:oo(r.options.messages).filter,title:"Filter by",closeButton:!0,ref:"filter-view"},closeCallback:function(e){e.removeClass(_e);const o=r._toolPopup(t);o.length&&o.find(".k-focus").removeClass("k-focus"),t.element.focus()},init:function(e){if(t.wrapper.attr("ref","filter-tool"),!r._showAdaptiveView)for(var o=0,i=l.length;o<i;o++){const e=l[o],i=e.field;if(!(n.filterable&&!1!==e.filterable))continue;const a=t.wrapper.find(`.k-columns-item[data-field="${i}"]`);r._initFilterMenuForColumn(e,a)}},contentTemplate:function({isAdaptive:e}){let t="";for(let e=0;e<l.length;e++){const o=l[e];n.filterable&&!1!==o.filterable&&!o.command&&(t+='<div class="k-columnmenu-item-wrapper">',t+=`<div class="k-columnmenu-item-content k-columns-item" ref="filter" tabindex="0" data-field="${o.field}" data-index=${o.index||e||0}></div>`,t+="</div>")}return a&&!a.clearButton||e||(t+='<div class="k-actions k-actions-stretched k-actions-horizontal k-column-menu-footer">',t+=o.html.renderButton(`<button ref="clear-filter">${oo(r.options.messages).filter[0].text}</button>`,{icon:"filter-clear"}),t+="</div>"),t},filtering:function(e){r.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(r._clearEditableState(),r.dataSource.options.endless&&r._resetEndless())}};(t=t.kendoColumnMenu(c).data("kendoColumnMenu")).element.bind("click"+V,(function(o){t.popup&&t.popup._closing||(e(o.currentTarget).addClass(_e),i(t)?.toggleClass("k-disabled",!t.dataSource._filter))}));const u=function(e){const o=t.dataSource._filter,l=e.field;let n,a=!e.filter;const s=o&&o.filters;if(a&&s&&s.length&&!s.find((e=>e.filters&&e.filters.length?e.filters[0].field===l:e.field===l)))return;const d=t.wrapper.find(`.k-columns-item[data-field='${l}']`),c=d?.closest(".k-expander")?.find(".k-columnmenu-item");o&&o.filters.length?n=a?s.filter((e=>e.field!==l)).length>0:!a:a||(n=!0),d.length&&d.data("kendoExpansionPanel").toggle(!1),i(t)?.toggleClass("k-disabled",!n),r._toggleColumnMenuFilterIndicator(c,!a),r._toggleBadge(t.element,n)};r.unbind("filter",u),r.bind("filter",u),t.bind("open",(function(){const e=r._toolPopup(t);if(e.length){e.focus();const o=i(t),l=t.dataSource._filter&&t.dataSource._filter.filters;l&&l.length&&l.forEach((e=>{const o=e.field||e.filters[0].field,l=t.wrapper.find(`.k-columns-item[data-field='${o}']`),n=l?.closest(".k-expander")?.find(".k-columnmenu-item");r._toggleColumnMenuFilterIndicator(n,!0)})),o.length&&(o.off("mousedown"+V),o.on("mousedown"+V,(function(){r.dataSource.filter([]),r._toggleBadge(t.element,!1),t.wrapper.find(".k-columnmenu-indicators").remove(),o.toggleClass("k-disabled",!0),t.popup.close()})))}}))},_initFilterMenuForColumn:function(e,t){const o=this;let r,l=o._hasFilterMenu();if(t.length){r=t.data("kendoFilterMenu"),r&&r.destroy(),r=t.data("kendoFilterMultiCheck"),r&&r.destroy();var n=e.filterable,i=g({},l,n,{appendToElement:!0,componentType:"modern",dataSource:o.dataSource,values:e.values,format:e.format,title:e.title||e.field,pane:o.pane,adaptiveMode:o.options.adaptiveMode,change:function(e){o.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(o._clearEditableState(),o.dataSource.options.endless&&o._resetEndless())}});return n&&n.messages&&(i.messages=g(!0,{},l.messages,n.messages)),n&&n.dataSource&&(i.forceUnique=!1,i.checkSource=n.dataSource),n&&n.multi?t.kendoFilterMultiCheck(i).data("kendoFilterMultiCheck"):t.kendoFilterMenu(i).data("kendoFilterMenu")}},_toolbarOptionsForTool:function(e){const t=this.options;let o=[];return Array.isArray(t.toolbar)?o=t.toolbar:t.toolbar&&t.toolbar.items&&(o=t.toolbar.items),g({},ao[e],o.find((t=>t.name===e)))},_groupToolbarTool:function(t){const r=this,l=r.options,n=e=>{const t=r._isAdaptive()?"[ref-actionsheet-action-button]:not('.k-button-solid-primary')":"[ref='clear-group']";return r._toolPopup(e)?.find(t)};let i,a;if(!(l.groupable&&!1!==l.groupable.enabled||r.dataSource._groupPaging))return;i=t.data("kendoColumnMenu"),i&&(i.wrapper.off("click"+V),i.element.off("click"+V),i.destroy());const s=r._toolbarOptionsForTool("group");s.reorderButtons=!0;const d=({isAdaptive:t,isFirstItem:r,isLastItem:l})=>`<span class="k-group-menu-item-actions">\n                ${s.reorderButtons?`<span class="k-group-menu-item-action k-group-menu-item-up-action ${r?"k-disabled":""}" ${r?"aria-disabled=true":"aria-disabled=false"}>\n                    ${o.ui.icon(e("<span></span>"),{icon:"chevron-up",size:t?"large":"medium"})}\n                </span>\n                <span class="k-group-menu-item-action k-group-menu-item-down-action ${l?"k-disabled":""}" ${l?"aria-disabled=true":"aria-disabled=false"}>\n                    ${o.ui.icon(e("<span></span>"),{icon:"chevron-down",size:t?"large":"medium"})}\n                </span>`:`<span class="k-group-menu-item-action k-group-menu-item-drag-action">\n                    ${o.ui.icon(e("<span></span>"),{icon:"handle-drag-dots",size:t?"large":"medium"})}\n                    </span>`}\n                </span>`,c=(t,l,n)=>{const i=r._isAdaptive();return`<div class="k-group-menu-item" data-field="${t.field}" data-index="${n&&n.index||t.index||"0"}" tabindex="0">\n                ${n&&n.renderIndicator?d({isAdaptive:i,isFirstItem:n.isFirstItem,isLastItem:n.isLastItem}):""}\n                        <span class="k-group-item-text">${t.title||t.field||""}</span>\n                        <span class="k-spacer"></span>\n                        <span class="k-group-menu-item-actions">\n                            <span class="k-group-menu-item-action ${l.actionClass}">\n                                ${o.ui.icon(e("<span></span>"),{...l,size:i?"large":"medium"})}\n                            </span>\n                        </span>\n                    </div>`};a={dataSource:r.dataSource,columns:!1,sortable:!1,filterable:!1,hideAutoSizeColumn:!1,owner:r,adaptiveMode:r.options.adaptiveMode,encodeTitles:r.options.encodeTitles,componentType:"modern",_actionsheet:{actionButtons:oo(r.options.messages).group,title:"Group by",ref:"group-view",closeButton:{icon:"check",themeColor:"primary"}},init:function(e){const o=t.wrapper.find(".k-group-menu");o.attr("ref","group-tool"),t._showAdaptiveView?(o.unwrap(),o.removeClass("k-group-menu-md").addClass("k-group-menu-lg")):t.wrapper.removeClass("k-column-menu"),o.find(".k-group-menu-item").on("click"+V,".k-group-menu-item-remove-action, .k-group-menu-item-add-action",(function(e){r._groupItemClickHandler(e,t,{itemTemplate:c,indicator:d})})),r._syncGroupingTool(e,t,r.dataSource.group(),{itemTemplate:c,indicator:d})},closeCallback:function(e){e.removeClass(_e);const o=r._toolPopup(t);o.length&&o.find(".k-focus").removeClass("k-focus"),t.element.focus()},contentTemplate:({columns:e})=>{const t=r._isAdaptive();let l="<div class=\"k-group-menu k-group-menu-md\"><div class='k-group-menu-item-wrap'>";return e.forEach((e=>{xr(r,e)&&!e.command&&(l+=c(e,{icon:"plus-circle",actionClass:"k-group-menu-item-add-action"}))})),l+="</div>",s&&!s.clearButton||t||(l+=`<div class="k-actions k-actions-stretched k-actions-horizontal k-column-menu-footer">\n                                     ${o.html.renderButton(`<button ref="clear-group">${oo(r.options.messages).group[0].text}</button>`,{icon:"x"})}\n                                </div>`),l+="</div>",l}};let u=r.dataSource.group()||[];t=t.kendoColumnMenu(a).data("kendoColumnMenu");const p=function(e){const o=this,r=e.groups||o.dataSource.group()||[],l=n(t),i=u.length>r.length?u:r;o._syncGroupingTool(e,t,i,{itemTemplate:c,indicator:d}),o._toggleBadge(t.element,r.length>0),l?.toggleClass("k-disabled",!r.length),u=r};r.unbind("group",p),r.bind("group",p),t.element.on("click"+V,(function(o){t.popup&&t.popup._closing||e(o.currentTarget).addClass(_e)})),t.bind("open",(function(){const e=n(t);e.length&&(e.off("mousedown"+V),e.on("mousedown"+V,(function(){r.dataSource.group([]),r.groupable.trigger(J,{groups:[]}),r._toggleBadge(t.element,!1),e?.toggleClass("k-disabled",!0),t.popup.close()}))),e?.toggleClass("k-disabled",!r.dataSource.group().length)}))},_toggleReorderButtonsDisabledState:function(e,t,o){const r="k-disabled";if(!e.length)return;const l=e.find(".k-group-menu-item-actions .k-group-menu-item-up-action");if(l.length){t&&!l.hasClass(r)?(l.addClass(r),l.attr("aria-disabled",!0)):!t&&l.hasClass(r)&&(l.removeClass(r),l.attr("aria-disabled",!0));const e=l.next();e.length&&(o&&!e.hasClass(r)?(e.addClass(r),e.attr("aria-disabled",!0)):!o&&e.hasClass(r)&&(e.removeClass(r),e.attr("aria-disabled",!0)))}},_syncGroupingTool:function(t,o,r,l){const n=this,i=t.groups||n.dataSource.group()||[],a=()=>o._showAdaptiveView?n._toolPopup(o):o.wrapper,s="k-group-menu-item-wrap",d=()=>a()?.find(`.${s}`),c=".k-group-menu-item",u=a();let p=d();if(o._draggableInstance&&o._triggeredReordering)delete o._triggeredReordering;else if(p&&p.length&&(r.forEach(((t,r)=>{const a=u.find(c+`[data-field='${t.field}']`),h=a.data("index"),g=a.find(".k-icon")?.attr("class").includes("plus-circle")?"remove":"add",f="remove"===g,m=`k-group-menu-item-${g}-action`,b=a.parent();p=d();let _=!(!i||!i.length)&&i[0]?.field===t.field,k=!(!i||!i.length)&&i[i.length-1].field===t.field;n._toggleReorderButtonsDisabledState(a,_,k);const v=!i.find((e=>e.field===t.field));if(!v&&b.is("[ref='group-container']"))return;let C;if(p&&2===p.length)C=f?p.first():p.last();else{C=e(`<div class="${s}" ${f?'ref="group-container':""}"></div>`);const t=f?"prepend":"append",o=p.first().parent(),r=o.find("[ref='clear-group']");r.length&&!f?r.parent().before(C):o.length&&o[t](C)}const w=n.columns[h],y=!v&&i.length>1,S={renderIndicator:y,index:h,isFirstItem:_,isLastItem:k},x=e(l.itemTemplate(w,{icon:f?"x-circle":"plus-circle",actionClass:m},S));a.remove();if(2===p.length&&!b.children().length&&(b.data("kendoReorderable")&&b.data("kendoReorderable")?.destroy(),b.remove()),f){if(y){const e=C.children().first();1===e.find(".k-group-menu-item-actions")?.length&&e.prepend(l.indicator({isAdaptive:n._isAdaptive(),isFirstItem:!0,isLastItem:!1}))}C.append(x)}else{const e=C.find(c+`[data-index="${h+1}"]`);if(1===i.length){b.children().first().find(".k-group-menu-item-actions:first-of-type").remove()}e.length?e.before(x):C.append(x)}C.find(x).on("click"+V,".k-group-menu-item-remove-action, .k-group-menu-item-add-action",(function(e){n._groupItemClickHandler(e,o)}))})),p=d(),p&&p.length)){const t=p.first().find(".k-group-menu-item-drag-action"),r=p.first().find(".k-group-menu-item-up-action, .k-group-menu-item-down-action"),l=p.first(),i=l.is("[ref='group-container']")&&l?.length,a=t.length,s=r.length;i&&s?r.each((function(){const t=e(this);t.unbind("click"+V),t.bind("click"+V,(e=>n._buttonClickReorderHandler(e,o)))})):i&&a&&(n._groupToolDraggableInstance(o,l),n._groupToolReorderableInstance(o,l))}},_buttonClickReorderHandler:function(t,o){t.preventDefault(),t.stopPropagation();const r=".k-group-menu-item",l=e(t.currentTarget),n=l.closest(r),i=l.hasClass("k-group-menu-item-up-action")?"before":"after",a="before"===i?n.prev(r):n.next(r),s={element:n,target:a,position:i};this._handleGroupReordering(s,o)},_groupToolDraggableInstance:function(t,r){const l=this._isMobile;t._draggableInstance=r.kendoDraggable({holdToDrag:l,showHintOnHold:l,preventOsHoldFeatures:l,group:"group-item-draggable",autoScroll:!0,filter:".k-group-menu-item-drag-action",hint:function(t){return e('<div class="k-reorder-clue k-drag-clue">'+o.ui.icon({icon:"cancel",iconClass:"k-drag-status"})+"</div>")},clickMoveClick:!1,cursorOffset:{top:0,left:0}}).data("kendoDraggable")},_groupToolReorderableInstance:function(t,o){const r=this,l=".k-group-menu-item";o&&o.data("kendoReorderable")&&o.data("kendoReorderable").destroy(),o.kendoReorderable({smartPosition:!1,draggable:t._draggableInstance,dragOverContainers:function(t,o){e(l).eq(o);return!0},dropFilter:"> "+l,allowIcon:"insert-middle",orientation:"vertical",reorderDropCue:e('<div class="k-drop-hint k-drop-hint-h"><div class="k-drop-hint-start"></div><div class="k-drop-hint-line"></div></div>'),positionDropCue:function(e){e.css({transform:"translate(0,-50%)"})},externalDraggable:function(e){var t=e.draggable;if(t)return t},change:function(e){r._handleGroupReordering(e,t)}})},_handleGroupReordering:function(e,t){const o=e.element,r=e.target,l="before"===e.position?"insertBefore":"insertAfter",n=this.groupable.descriptors();let i,a;o[l](r);for(let e=0;e<n.length;e++){const t=n[e];if(t.field===o.data("field")&&(i=e),t.field===r.data("field")&&(a=e),i&&a)break}if((i||0===i)&&(a||0===a)){const o=n.splice(i,1)[0];let r=a-1<0?0:a-1;"after"===e.position&&(r+=1),n.splice(r,0,o),t._triggeredReordering=!0,this.dataSource.group(n),this.groupable.trigger(J,{groups:n})}},_groupItemClickHandler:function(t,o){const r=this,l=e(t.currentTarget).closest(".k-group-menu-item"),n="remove"===(e(t.currentTarget).find(".k-icon")?.attr("class").includes("plus-circle")?"remove":"add"),i=l.data("index");let a=r.groupable.descriptors();const s=r.columns[i];n?a.push({field:s.field,dir:"asc",aggregates:r.groupable.aggregates()||[],colID:s.uid,compare:s.sortable&&s.sortable.compare||r.groupable.sort&&r.groupable.sort.compare}):a=a.filter((e=>e.field!==s.field)),r.dataSource.group(a),r.groupable.trigger(J,{groups:a})},_sortToolbarTool:function(r){const l=this,n=l.options,i="k-columnmenu-indicators",a=l._isAdaptive(),s=e=>{const t=l._isAdaptive()?"[ref-actionsheet-action-button]:not('.k-button-solid-primary')":"[ref='clear-sort']";return l._toolPopup(e)?.find(t)};let d,c;const u=l._toolbarOptionsForTool("sort");d=r.data("kendoColumnMenu"),d&&(d.wrapper.off("click"+V),d.element.off("click"+V),d.destroy());const p=!1!==n.columnMenu.sortable&&!1!==n.sortable&&g({},n.sortable,{allowUnsort:!1});if(!p)return;c={dataSource:l.dataSource,columns:!1,sortable:p,filterable:!1,hideAutoSizeColumn:!0,owner:l,adaptiveMode:l.options.adaptiveMode,encodeTitles:l.options.encodeTitles,componentType:"modern",_actionsheet:{actionButtons:oo(l.options.messages).sort,title:"Sort by",ref:"sort-view",closeButton:{icon:"check",themeColor:"primary"}},init:function(e){r.wrapper.attr("ref","sort-tool")},closeCallback:function(e){e.removeClass(_e);const t=l._toolPopup(r);t.length&&t.find(".k-focus").removeClass("k-focus"),r.element.focus()},sort:function(e){const t=e.preventClose;r._preventClose="multiple"===l.options.sortable.mode||t,l.trigger("sort",{sort:e.sort})?e.preventDefault():(l._clearEditableState(),l.dataSource.options.endless&&l._resetEndless())},contentTemplate:function({columns:e,isAdaptive:t}){let r='<div class="k-columnmenu-item-wrapper">';return e.forEach((e=>{!1===e.sortable||e.command||(r+=`<div class="k-columnmenu-item" tabindex="0" data-field="${e.field}">${e.title||e.field||""}</div>`)})),r+="</div>",u&&!u.clearButton||t||(r+='<div class="k-actions k-actions-stretched k-actions-horizontal k-column-menu-footer">',r+=o.html.renderButton(`<button ref="clear-sort">${oo(l.options.messages).sort[0].text}</button>`,{icon:"x"}),r+="</div>"),r}},r=r.kendoColumnMenu(c).data("kendoColumnMenu");const h=function(e){const o=e.sender.dataSource._sortFields,n=Array.isArray(e.sort),a=e.sort.field,d=e.sender.options.sortable&&("multiple"===e.sender.options.sortable.mode||"mixed"===e.sender.options.sortable.mode);let c,u=e.sort.dir===t;c=n?e.sort.length:o&&Object.keys(o).length?!u||u&&Object.keys(o).length-1>0:!u,l._toggleBadge(r.element,c);const p=r.wrapper.find(`.k-columnmenu-item[data-field='${a}']`);let h=p.find("."+i);u?h.remove():(d||(h=r.wrapper.find("."+i)),h.length&&h.remove(),p.append(l._renderIndicator(`sort-${e.sort.dir}-small`))),s(r)?.toggleClass("k-disabled",!c)};l.unbind("sort",h),l.bind("sort",h),r.bind("open",(function(){const t=l._toolPopup(r);if(t.length){t.focus();const o=s(r),n=t.find(".k-columnmenu-item");o.length&&(o.off("mousedown"+V),o.on("mousedown"+V,(function(){l.dataSource.sort([]),l._toggleBadge(r.element,!1),s(r)?.toggleClass("k-disabled",!0),r.wrapper.find(".k-columnmenu-indicators").remove(),r.close()}))),n.length&&(t.off("click"+V),t.on("click"+V,".k-columnmenu-item",(function(t){const o=e(t.currentTarget),n=o.data("field"),a=l._toggleColumnMenuSortIndicator(o),s=l.options.sortable&&"mixed"===l.options.sortable.mode,d=t.originalEvent.ctrlKey;r.field=n,r._sortHandler({item:o,allowUnsort:a,allowSelectedState:!1,isMixed:s,hasCtrlKey:d}),l._toggleSortIndexes(l.dataSource._sortFields&&Object.keys(l.dataSource._sortFields).length>1,r,i)})))}})),r.element.on("click"+V,(function(t){if(r.popup&&r.popup._closing)return;e(t.currentTarget).addClass(_e);const o=r.dataSource._sortFields,n=o&&Object.keys(o).length,d=Object.keys(o).length>1;n&&Object.keys(o).forEach((e=>{const t=r.wrapper.find(`.k-columnmenu-item[data-field='${e}']`),n=t.find("."+i);n.length&&n.remove(),t.append(l._renderIndicator(`sort-${o[e].dir}-small`))})),l._toggleSortIndexes(d,r,i,a),s(r)?.toggleClass("k-disabled",!n)}))},_toggleSortIndexes:function(t,o,r){if(!(this.options.sortable&&this.options.sortable.showIndexes))return;const l=o.wrapper.find(`.${r}`);let n=o.dataSource&&o.dataSource._sortFields;l.length&&(t?l.each(((t,o)=>{const r=e(o).closest(".k-columnmenu-item").data("field"),l=n[r],i=e(o).parent().find(".k-sort-index");i.length?i.text(l.index):l.index?e(o).append(`<span class='k-sort-index'>${l.index}</span>`):e(o).append(`<span class='k-sort-index'>${t+1}</span>`)})):o.wrapper.find(".k-sort-index").remove())},_columnChooserTool:function(t){const o=this,r="column-chooser";const l=t.data("kendoColumnMenu");l&&(l.wrapper.off("click"+V),l.element.off("click"+V),l.destroy());const n={dataSource:o.dataSource,columns:o.columns,sortable:!1,filterable:!1,hideAutoSizeColumn:!0,owner:o,adaptiveMode:o.options.adaptiveMode,encodeTitles:o.options.encodeTitles,messages:{reset:o.options.messages.clearButtons?o.options.messages.clearButtons.columnChooserReset:"Reset",apply:o.options.messages.applyButtons?o.options.messages.applyButtons.columnChooserApply:"Apply"},componentType:"modern",contentTemplate:function(e){return(0,e._defaultContents()[r])(e)},_actionsheet:{actionButtons:oo(o.options.messages)[r],title:"Column visibility",subtitle:"Selected fields are visible",closeButton:!0,ref:`${r}-view`},init:function(e){t.wrapper.attr("ref",r+"-tool"),t._showAdaptiveView?t.popup._content.find(`[ref='${r}']`).unwrap():t.wrapper.removeClass("k-column-menu")},closeCallback:function(e){e.removeClass(_e);const r=o._toolPopup(t);r.length&&r.find(".k-focus").removeClass("k-focus"),t&&t._showAdaptiveView&&t._applyColumnVisibility(),t.element.focus()}};(t=t.kendoColumnMenu(n).data("kendoColumnMenu")).element.bind("click",(function(o){t.popup&&t.popup._closing||e(o.currentTarget).addClass(_e)})),t.bind("open",(function(){const e=o._toolPopup(t);e.length&&e.find(".k-checkbox")?.first()?.focus()}))},_toggleBadge:function(t,o){const r=t.closest(".k-badge-container"),l=r.length&&r.find(".k-badge"),n=t.data("overflow");if(!l.length&&o){t.wrap(`<div class='k-badge-container' ${n?"data-overflow="+n:""}></div>`).parent().append(e("<span></span>").kendoBadge({round:"full",position:"edge",align:"top end",themeColor:"primary",cutoutBorder:!0}))}else!o&&l.length&&(l.remove(),t.unwrap(".k-badge-container"))},_toggleColumnMenuFilterIndicator:function(e,t){const o=this,r=e.find(".k-columnmenu-indicators"),l=e.find(".k-spacer");if(t&&l.length){if(r&&r.length)return;l.before(o._renderIndicator("filter"))}else r&&r.length&&r.remove()},_toggleColumnMenuSortIndicator:function(e){const t=this,o=e.find(".k-columnmenu-indicators");let r,l=e.find(".k-sort-index").length?"before":"append";if(o&&o.length){const e=o.find(".k-icon");e.length&&e.hasClass("k-svg-i-sort-desc-small")?(o.remove(),r=!0):(e.remove(),o[l](t._renderIndicator("sort-desc-small")),r=!1)}else e[l](t._renderIndicator("sort-asc-small")),r=!1;return r},_renderIndicator:function(t){return e("<span class='k-columnmenu-indicators'></span>").append(o.ui.icon(e("<span></span>"),{icon:t}))},_globalColumnsMenu:function(e){var t,o,r=this,l=rr(r.columns),n=r.options.columnMenu;if(n){"boolean"==typeof n&&(n={}),r._setColumnsMediaVisibility(l);let i=!(!n.autoSize&&!n.clearAllFilters);(t=e.data("kendoColumnMenu"))&&t.destroy();let a={toggleable:i,expanded:n.expanded||!0,animation:!1,hideExpanderIndicator:!i};o={dataSource:r.dataSource,columns:n.columns,sortable:!1,filterable:!1,clearAllFilters:n.clearAllFilters,messages:n.messages,hideAutoSizeColumn:!0,owner:r,closeCallback:function(){e.trigger("focus")},init:function(e){r._isAdaptive()&&e.sender.popup.wrapper.find(".k-expanded [ref=columns-visibility]").data("handler").toggle(!1),r.trigger(j,{field:e.field,container:e.container})},open:function(e){r.trigger(K,{field:e.field,container:e.container})},pane:"auto"!==r.options.adaptiveMode&&r.pane,autoSize:n.autoSize,encodeTitles:r.options.encodeTitles,componentType:"modern",adaptiveMode:"auto",columnsExpanderOptions:a},e.kendoColumnMenu(o)}},_columnMenu:function(){var e,r,l,n,i,a,s=this,d=rr(s.columns),c=s.options,u=c.columnMenu,p=m(s.columns,(function(e){return e.columns!==t})).length>0,h=m(s.columns,(function(e){return!1!==e.lockable})).length>0,f=m(s.columns,(function(e){return!0===e.stickable})).length>0,b=this._isMobile,_=function(e){s.trigger(j,{field:e.field,container:e.container})},k=function(e){s.trigger(K,{field:e.field,container:e.container})},v=function(){Sr(s.table,!0)},C=function(e){s.trigger(Oe,{column:e.column})},w=function(e){s.trigger(Ge,{column:e.column})},y=function(e){s.trigger("sort",{sort:e.sort})?e.preventDefault():(s._clearEditableState(),s.dataSource.options.endless&&s._resetEndless())},S=function(e){s.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(s._clearEditableState(),s.dataSource.options.endless&&s._resetEndless())};if(u){"boolean"==typeof u&&(u={}),s._setColumnsMediaVisibility(d);for(var T=0,H=(a=ir(s.thead)).length;T<H;T++){r=d[T];var R=a.eq(T);if(!1!==r.columnMenu&&!r.command&&(r.field||R.attr("data-"+o.ns+"field"))){(e=R.data("kendoColumnMenu"))&&e.destroy(),n=!1!==r.sortable&&!1!==u.sortable&&!1!==c.sortable&&g({},c.sortable,{compare:(r.sortable||{}).compare}),i=!(!c.filterable||!1===r.filterable||!1===u.filterable)&&g(!0,{pane:s.pane},c.filterable,r.filterable),r.filterable&&r.filterable.dataSource&&(i.forceUnique=!1,i.checkSource=r.filterable.dataSource),i&&(i.format=r.format);const t="auto"!==s.options.adaptiveMode&&u.adaptiveMode||s.options.adaptiveMode;l={dataSource:s.dataSource,values:r.values,columns:u.columns,sortable:n,filterable:i,messages:u.messages,owner:s,adaptiveMode:t,adaptiveTitle:r.title||r.field,closeCallback:v,init:_,open:k,stick:C,unstick:w,pane:"auto"!==s.options.adaptiveMode&&s.pane,sort:y,filtering:S,filter:b?":not(.k-column-active)":"",autoSize:u.autoSize,hasLockableColumns:Ko(d).length>0&&h&&!p,hasStickableColumns:f&&!p,encodeTitles:s.options.encodeTitles,componentType:u.componentType,appendTo:x+Jt,reorderable:!0===c.reorderable||c.reorderable&&c.reorderable.columns,groupable:s.options.groupable&&!1!==s.options.groupable.enabled&&!1!==r.groupable},R.kendoColumnMenu(l)}}}},_headerCells:function(){return e(this.thead).find("th").filter((function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")}))},_hasFilterMenu:function(){var e=this.options.filterable;return(!e||typeof e.mode!=rt||-1!=e.mode.indexOf("menu"))&&e},_filterable:function(){var e,t,r,l=this,n=rr(l.columns),i=function(e){l.trigger($,{field:e.field,container:e.container})},a=function(){Sr(l.table,!0)},s=function(e){l.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(l._clearEditableState(),l.dataSource.options.endless&&l._resetEndless())},d=function(e){l.trigger(U,{field:e.field,container:e.container})},c=l._hasFilterMenu();if(c&&!l.options.columnMenu)for(var u=0,p=(t=ir(l.thead)).length;u<p;u++)if(r=t.eq(u),!1!==n[u].filterable&&!n[u].command&&(n[u].field||r.attr("data-"+o.ns+"field"))){(e=r.data("kendoFilterMenu"))&&e.destroy(),(e=r.data("kendoFilterMultiCheck"))&&e.destroy();var h=n[u].filterable,f=g({},c,h,{dataSource:l.dataSource,values:n[u].values,format:n[u].format,closeCallback:a,title:n[u].title||n[u].field,init:i,open:d,pane:l.pane,change:s,appendTo:x+Jt,adaptiveMode:l.options.adaptiveMode});h&&h.messages&&(f.messages=g(!0,{},c.messages,h.messages)),h&&h.dataSource&&(f.forceUnique=!1,f.checkSource=h.dataSource),h&&h.multi?r.kendoFilterMultiCheck(f):r.kendoFilterMenu(f)}},_filterRow:function(){var t=this;if(t._hasFilterRow()){var r,n=rr(t.columns),i=t.options.filterable,a=t.thead.find(".k-filter-row"),s=function(e){t.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(t._clearEditableState(),t.dataSource.options.endless&&t._resetEndless())};this._updateHeader(t._groups());for(var d=0;d<n.length;d++){var c,u=n[d],p=t.options.filterable.operators,h=!1,f=e("<td class='k-table-td' title='"+t.options.messages.filterCellTitle+"'/>"),m=u.field;if(u.hidden&&f.hide(),a.append(f),m&&!1!==u.filterable){var b=u.filterable&&u.filterable.cell||{};(c=t.options.dataSource)instanceof l&&(c=t.options.dataSource.options);var _=g(!0,{},i.messages);if(u.filterable&&g(!0,_,u.filterable.messages),!1===b.enabled){f.html("&nbsp;");continue}b.dataSource&&(c=b.dataSource,h=!0),u.filterable&&u.filterable.operators&&(p=u.filterable.operators),r={column:u,dataSource:t.dataSource,suggestDataSource:c,customDataSource:h,field:m,messages:_,size:t.options.size,values:u.values,template:b.template,delay:b.delay,inputWidth:b.inputWidth,suggestionOperator:b.suggestionOperator,minLength:b.minLength,dataTextField:b.dataTextField,operator:b.operator,operators:p,showOperators:b.showOperators,change:s,adaptiveMode:t.options.adaptiveMode},e("<span/>").attr(o.attr("field"),m).appendTo(f).kendoFilterCell(r)}else f.html("&nbsp;");f.data("column",u)}this._filterFocusable().attr(tt,-1)}},_sortable:function(){var e,t,r,l=this,n=rr(l.columns),i=l.options.sortable,a=function(e){l.trigger("sort",{sort:e.sort})?e.preventDefault():l._clearEditableState()};if(i){for(var s=ir(l.thead),d=0,c=s.length;d<c;d++)!1!==(e=n[d]).sortable&&!e.command&&e.field&&((t=(r=s.eq(d)).data("kendoColumnSorter"))&&t.destroy(),r.attr("data-"+o.ns+"field",e.field).kendoColumnSorter(g({},i,e.sortable,{dataSource:l.dataSource,aria:!0,filter:":not(.k-column-active)",change:a})));s=null}},_columns:function(t){var r,l,n,i=this,a=i.table,s=a.find("col"),d=i.element.find("thead tr"),c=i.options.dataSource;if(t=t.length?t:f(a.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),(function(t,r){var l=(t=e(t)).attr(o.attr("sortable")),n=t.attr(o.attr("filterable")),i=t.attr(o.attr("type")),a=t.attr(o.attr("groupable")),d=t.attr(o.attr("field")),c=t.attr(o.attr("title")),u=t.attr(o.attr("column-menu")),p=t.attr(o.attr("menu"));return d||(d=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:d,type:i,title:c,sortable:"false"!==l,filterable:"false"!==n,groupable:"false"!==a,menu:"false"!==p,columnMenu:"false"!==u,template:t.attr(o.attr("template")),width:s.eq(r).css(Ze)}})),r=!(i.table.find("tbody tr").length>0&&(!c||!c.transport)),i.options.scrollable){var u=t;if(l=Ko(t),t=Qo(t),l.length>0&&0===t.length)throw new Error("There should be at least one non locked column");!function(e,t){var o,r,l=0,n=e.find("th:not(.k-group-cell)");for(o=0,r=t.length;o<r;o++)t[o].locked&&(n.eq(o).insertBefore(n.eq(l)),n=e.find("th:not(.k-group-cell)"),l++)}(i.element.find("tr:has(th)").first(),u),t=l.concat(t)}if(d.length&&t.length&&i._updateColumnIDs(t,d.first()),i.columns=ho(t,r),e.grep(rr(i.columns),(function(e){return e.selectable})).length&&(i._selectedIds={},i._checkBoxSelection=!0,i.wrapper.on($e+V,"tbody > tr "+ve,i._checkboxClick.bind(i)),i.wrapper.on($e+V,"thead > tr "+ve,i._headerCheckboxClick.bind(i))),(n=e.grep(rr(i.columns),(function(e){return e.draggable}))).length){i._hasDragHandleColumn=!0;for(var p=0;p<n.length;p++)n[p].headerAttributes=e.extend({"aria-label":i.options.messages.dragHandleLabel},n[p].headerAttributes)}i._foreignKeyBindings(Po(i.columns))},_foreignKeyBindings:function(e){for(var t,o=e.length,r=0;r<o;r++)(t=e[r]).dataSource&&this._fetchForeignKeyValues(t)},_fetchForeignKeyValues:function(t){var o=this,r=e.Deferred();o._hasBoundForeignKey=!0,t.dataSource=l.create(t.dataSource),o._foreignKeyPromises||(o._foreignKeyPromises=[]),o._foreignKeyPromises.push(r),t.dataSource.fetch().then((function(){var e=t.dataSource.data();t.values=e.map((function(e){return{value:e[t.dataValueField],text:e[t.dataTextField]}})),r.resolve()}))},_updateColumnIDs:function(e,t){if(e.length){for(var o,r=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),l=0;l<e.length;l++)(o=r.eq(l).attr(ft))&&(e[l].headerAttributes=g(e[l].headerAttributes,{id:o}));this._updateColumnIDs(tr(e),t.next())}},_headerCheckboxClick:function(t){var o=this,r=e(t.target),l=r.prop("checked");o._belongsToGrid(r)&&(o.trigger(Y,{target:r,originalEvent:t})?t.preventDefault():(l?o.select(o.items()):o.clearSelection(),o._calculateAggregatesForSelected(),o.trigger(J,{cellAggregates:o._cellAggregates})))},_checkboxClick:function(t){var o=this,r=e(t.target).closest(bt),l=!r.hasClass(_e);o._belongsToGrid(r)&&(o.trigger(Y,{target:r,originalEvent:t})?t.preventDefault():(l?o.select(r):o._deselectCheckRows(r),o._calculateAggregatesForSelected(),o.trigger(J,{cellAggregates:o._cellAggregates})))},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(t,r,l,n){var i,a,s,d,c,u,p=this,h=g({},o.Template,p.options.templateSettings),f=(h.paramName,r.length),m={storage:{},count:0},b=p._hasDetails(),_=p._groups(),k=o.attr("field");let v;return t||(v=t=>{var h=f?` ${o.attr("uid")}="${o.getter("uid")(t)}"`:"",v=`<tr class="${l?"k-table-row k-table-alt-row ":"k-table-row "}k-master-row"${h}>`;for(_>0&&!n&&(v+=no(_)),b&&(v+='<td class="k-hierarchy-cell k-table-td" aria-expanded="false">'+o.ui.icon(e(`<a href="#" ${kt}="${gt}" tabindex="-1"></a>`),{icon:"caret-alt-"+(Nt?"left":"right")})+"</td>"),i=0;i<f;i++){let e;s=r[i],a=s.template,d=s.field,u={},p._editMode()&&d&&(s.attributes=s.attributes||{},p.virtualScroll&&(s.attributes[k]=d),e=p._dirtyCellTemplate(d)(t)),s.colSpan&&s.colSpan>0&&(s.attributes||{})[o.attr("style-display")]?s.attributes=ur(s.attributes):!s.colSpan&&s.hidden&&(s.attributes=cr(s.attributes)),s.command&&(s.attributes=s.attributes||{},void 0!==(c=s.attributes.class)?c.indexOf("k-command-cell")<0&&(s.attributes.class+=" k-command-cell"):s.attributes.class="k-command-cell"),s.draggable&&(s.attributes=s.attributes||{},void 0!==s.attributes.class?s.attributes.class.indexOf("k-drag-cell")<0&&(s.attributes.class+=" k-drag-cell"):s.attributes.class="k-drag-cell",s.attributes["ref-grid-drag-cell"]||(s.attributes["ref-grid-drag-cell"]=!0),void 0===s.attributes[kt]&&(s.attributes[kt]=p.options.messages.dragHandleLabel),void 0!==s.attributes.style?s.attributes.style.indexOf("cursor: move;")<0&&(s.attributes.style+=" cursor: move;"):s.attributes.style="cursor: move;"),s._attributesFunction&&(u=s._attributesFunction(t));let l=g({},s.attributes,u);e&&(l.class=l.class||"",l.class+=e);let n=io(l),h="";s.colSpan&&(s.colSpan>1&&(h+=" "+o.attr("virtual")),h+=` colSpan="${s.colSpan}"`),v+=Fo(`<td${n}${h}>`),v+=s.selectable?o.template(qt)({size:o.getValidCssClass("k-checkbox-","size",p.options.size)}):p._cellTmpl(s,m)(t),v+="</td>"}return v+="</tr>"}),t=o.template(t||v,h),m.count>0?t.bind(m.storage):t},_dirtyCellTemplate:function(e){return t=>{if(e&&t&&t.dirty&&t.dirtyFields){return("["===e.charAt(0)?o.getter(e)(t.dirtyFields):t.dirtyFields[e])?" k-dirty-cell":""}return""}},_headerCellText:function(e){var t=g({},o.Template,this.options.templateSettings),r=e.headerTemplate,l=typeof r,n=e.title&&(this.options.encodeTitles?Lr(e.title):e.title)||Lr(e.field||"");return l===ot?n=o.template(r,t)({}):l===rt&&(n=r),n},_cellTmpl:function(e,t){var r,l,n=this,i=g({},o.Template,n.options.templateSettings),a=e.template,s=e.field,d=e.format,c=typeof a,u=e.values;return e.command?b(e.command)?t=>{let o="";for(r=0,l=e.command.length;r<l;r++)e.command[r].visible?o+=e.command[r].visible(t)?n._createButton(e.command[r]):"":o+=n._createButton(e.command[r]);return o}:()=>n._createButton(e.command):e.selectable?qt:e.draggable?Gt:r=>{let l=n._dirtyIndicatorTemplate(s)(r);if(c===ot)t.storage["tmpl"+t.count]=a,l+=a(r),t.count++;else if(c===rt)l+=o.template(a,i)(r);else if(u&&u.length&&h(u[0])&&"value"in u[0]&&s){var p=hr(u)[i.useWithBlock?o.getter(s)(r):s];l+=C(null!=p?p:"")}else{let t="";s&&(t=null==(s=o.getter(s)(r))?"":s),d&&(t=o.format(d.replace(zt,"$1"),t)),l+=e.encoded?C(t):t}return l}},_dirtyIndicatorTemplate:function(e){return t=>{if(e&&t&&t.dirty&&t.dirtyFields){return("["===e.charAt(0)?o.getter(e)(t.dirtyFields):t.dirtyFields[e])?'<span class="k-dirty"></span>':""}return""}},_virtualCols:function(t){var r,l=this,n=e.map(t,(function(e){return e.hidden?0:parseInt(e.width,10)})),i=l.virtualScrollable?o.scrollLeft(l.content.find(">.k-virtual-scrollable-wrap")):o.scrollLeft(l.content),a=d(l.content),s=qo(t),c=[],u=0,p=0,h=0,g=0,f=0;for(g=0;g<t.length;g++){if(r=g<n.length-1?n[g+1]:0,!(f+n[g]+2*r<i)){u=1+h;break}n[g]&&h++,f+=n[g]}h=0,f=0;for(var m=t.length-1;m>=0;m--){if(!(f+3*n[m]<s-a-i)){p=1+h;for(var b=g;b<=m;b++)t[b].locked||(c.push(t[b]),t[b].colSpan&&delete t[b].colSpan);c[0].colSpan=u,c[c.length-1].colSpan=p;break}n[m]&&h++,f+=n[m]}return c[0].hidden&&c[0].colSpan--,l.virtualCols=c,c},_templates:function(){var t=this,o=t.options,r=t.dataSource,l=r.group(),n=t.footer||t.wrapper.find(".k-grid-footer"),i=r.aggregate(),a=rr(t.columns),s=rr(Ko(t.columns)),d=o.scrollable?rr(Qo(t.columns)):a,c=(t.virtualScroll||{}).columns?t._virtualCols(d):d,u=m(yo(s),(function(e,t){return e.groupHeaderColumnTemplate&&0!==t})),p=m(yo(c),(function(e){return e.groupHeaderColumnTemplate}));if(o.scrollable&&s.length){if(o.rowTemplate||o.altRowTemplate)throw new Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(o.rowTemplate,c,!1,!0),t.altRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,c,!0,!0),t.lockedRowTemplate=t._tmpl(o.rowTemplate,s),t.lockedAltRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,s,!0)}else t.rowTemplate=t._tmpl(o.rowTemplate,c),t.altRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,c,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(o.detailTemplate||(()=>""))),(t._group&&!w(i)||!w(i)&&!n.length||m(a,(function(e){return e.footerTemplate})).length)&&(t.footerTemplate=t._footerTmpl(a,i,"footerTemplate","k-footer-template k-table-row")),l&&m(a,(function(e){return e.groupFooterTemplate})).length&&(i=e.map(l,(function(e){return e.aggregates})),t.groupFooterTemplate=t._footerTmpl(c,i,"groupFooterTemplate","k-group-footer k-table-row",s.length),o.scrollable&&s.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(s,i,"groupFooterTemplate","k-group-footer k-table-row"))),l&&(u.length||p.length)?(i=e.map(l,(function(e){return e.aggregates})),t.groupHeaderColumnTemplate=t._groupHeaderTmpl(yo(c),i,"groupHeaderColumnTemplate","k-table-group-row k-grouping-row k-table-row",s.length,p),o.scrollable&&s.length&&(t.lockedGroupHeaderColumnTemplate=t._groupHeaderTmpl(yo(s),i,"groupHeaderColumnTemplate","k-table-group-row k-grouping-row k-table-row",0,u))):(t.groupHeaderColumnTemplate=null,t.lockedGroupHeaderColumnTemplate=null),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t,r,l,n='<div class="{0}">{1}</div>',i=this.options.scrollable&&!this.wrapper[0].style.height?` ${o.attr("style-margin")}="0 auto" ${o.attr("style-position")}="static"`:"",a={storage:{},count:0},s=e.extend({},o.Template,this.options.templateSettings);s.paramName;let d;if("function"===(r=typeof(t=this.options.noRecords.template?this.options.noRecords.template:o.format('<div class="k-grid-norecords-template"{1}>{0}</div>',this.options.messages.noRecords,i)))){let e=a.storage["tmpl"+a.count]=t;a.count++,d=t=>o.format(n,Ce,e(t))}else"string"===r&&(d=this.options.noRecords.template?o.format(n,Ce,t):()=>o.format(n,Ce,t));return l=o.template(d,s),a.count>0&&(l=l.bind(a.storage)),l},_footerTmpl:function(e,t,r,l,n){var i,a,s,d,c,u=this,p=g({},o.Template,u.options.templateSettings),h=p.paramName,f={},m=0,b={},_=u._groups(),k=u.dataSource._emptyAggregates(t);let v=o.template((t=>{let v='<tr class="'+l+'">';for(_>0&&!n&&(v+=no(_)),u._hasDetails()&&(v+='<td class="k-hierarchy-cell k-table-td">&nbsp;</td>'),i=0,a=e.length;i<a;i++)c=e[i],s=c[r],d=typeof s,v+=Fo("<td"+io(c.footerAttributes)+">"),s?(d!==ot&&(b=k[c.field]?g({},p,{paramName:h+"['"+c.field+"']"}):{},s=o.template(s,b)),f["tmpl"+m]=s,v+=s(t),m++):v+="&nbsp;",v+="</td>";return v+="</tr>",v}),p);return m>0?v.bind(f):v},_groupHeaderTmpl:function(e,t,r,l,n,i){var a,s,d,c,u,p,f=this,m=g({},o.Template,f.options.templateSettings),b=m.paramName,k="",v={},C=0,w={},y=f.dataSource._emptyAggregates(t),S=i.length?_(i[0],e):-1;if(!(S<0)){return k=o.template((t=>{var _='<tr data-group-uid="'+t.uid+'" class="'+l+'">';if(!n)for(var k=0;k<t.groupCells;k++)_+='<td class="k-table-td k-group-cell">&nbsp;</td>';if(f._hasDetails()&&(_+='<td class="k-table-td k-hierarchy-cell">&nbsp;</td>'),S<1&&i.length<=1&&!n)return _+=n?"":Fr(e.length)(t);for(S<1?(S=n?0:1,_+=n?"":Fr(S)(t)):_+=n?function(e){return'<td class="k-table-td" colspan="'+e+'">'+`<p class="k-reset">&nbsp;</p></td>${new Array(e).join("<td hidden group-header-spanned-hidden></td>")}`}(S):Fr(S)(t),a=S,s=e.length;a<s;a++){if(u=e[a],d=u[r],c=typeof d,u.sticky){let e="";if((p=u.groupHeaderColumnTemplateClass||"")||(p=u.groupHeaderColumnTemplateClass="group-header-column-template-"+o.guid()),h(u.stickyStyle)){e=`${u.stickyStyle.left?`${o.attr("style-left")}="${u.stickyStyle.left}"`:""} ${u.stickyStyle.right?`${o.attr("style-right")}="${u.stickyStyle.right}"`:""}`}_+=`<td class="k-table-td ${Ee} ${p}" ${e}>`}else _+="<td class='k-table-td'>";d?(c!==ot&&(w=y[u.field]?g({},m,{paramName:b+"['"+u.field+"']"}):{},d=o.template(d,w)),v["tmpl"+C]=d,_+=v["tmpl"+C](t),C++):_+="&nbsp;",_+="</td>"}return _+="</tr>"}),m),C>0?k.bind(v):k}},_detailTmpl:function(e){var t=this,r=g({},o.Template,t.options.templateSettings),l=(r.paramName,{}),n=0,i=t._groups(),a=yo(rr(t.columns)).length,s=typeof e;let d=o.template((t=>{let d='<tr role="row" class="k-detail-row k-table-row">';return i>0&&(d+=no(i)),d+=`<td role="gridcell" class="k-hierarchy-cell k-table-td"></td><td role="gridcell" class="k-table-td k-detail-cell"${a?` colspan="${a}"`:""}>`,s===ot?(l["tmpl"+n]=e,d+=e(t),n++):d+=o.template(e,r)(t),d+="</td></tr>",d}),r);return n>0?d.bind(l):d},_hasDetails:function(){return null!==this.options.detailTemplate||(this._events[N]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,o=t&&typeof t.mode==rt&&-1!=t.mode.indexOf(Et),r=this.columns,l=e.grep(r,(function(e){return!1===e.filterable}));return r.length&&l.length==r.length&&(o=!1),o},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&Ko(t.columns).length)throw new Error("Having both detail template and locked columns is not supported");t.table.on($e+V,".k-hierarchy-cell "+B+", .k-hierarchy-cell "+L,(function(o){var r=e(this);return t._toggleDetails(r),o.preventDefault(),!1}))},_toggleDetails:function(t,r){var l,n,i,a=this,s=t.closest("td.k-hierarchy-cell"),d=t.is(B),c=t.closest("tr.k-master-row"),u=c.attr(St),p=a.detailTemplate,h=a._hasDetails(),g=d?ht:gt,f=!!d;d?o.ui.icon(t,{icon:"caret-alt-down"}):o.ui.icon(t,{icon:"caret-alt-"+(Nt?"left":"right")}),t.attr(kt,g),s.attr(xt,f),(l=c.next()).hasClass("k-hidden")&&l.removeClass("k-hidden"),h&&!l.hasClass("k-detail-row")&&(n=a.dataItem(c),l=e(p(n)).addClass(c.hasClass("k-table-alt-row")?"k-table-alt-row":"").insertAfter(c),(u||0===u)&&l.attr(St,Number(u)+1),a.trigger(N,{masterRow:c,detailRow:l,data:n,detailCell:l.find(".k-detail-cell")})),a.trigger(d?oe:re,{masterRow:c,detailRow:l}),r?(i=d,e(l)[0].style.display=i?"":It):l.toggle(d)},dataItem:function(t){if(!(t=e(t)[0]))return null;var o,r,l=this.tbody.children(),n=/k-grouping-row|k-detail-row|k-group-footer/,i=t.sectionRowIndex;for(r=i,o=0;o<i;o++)n.test(l[o].className)&&r--;return this._data[r]},expandRow:function(t,o){var r=e(t).find("> td "+B);r.length&&this._toggleDetails(r,o)},collapseRow:function(t,o){var r=e(t).find("> td "+L);r.length&&this._toggleDetails(r,o)},_createHeaderCells:function(r,l){var n,i,a,s,d,c,u=this,p="",h=u.options.columnMenu,g=(u.options.sortable,u._hasFilterMenu()),f=u.options.messages,m=rr(u.columns),b=u.dataSource.group();for(n=0,s=r.length;n<s;n++){i=r[n].column||r[n],a=u._headerCellText(i),d=i.title,c="";let s=_(i,m),k="";i.selectable?(k+="<th scope='col'"+io(i.headerAttributes),l&&!r[n].colSpan&&(k+=" rowspan='"+l+"'"),s>-1&&(k+=o.attr("index")+"='"+s+"'"),k+=">"+(a=i.headerTemplate?a:o.template(Ot)({size:o.getValidCssClass("k-checkbox-","size",u.options.size)}))+"</th>"):i.draggable?(k+="<th class='k-header' ref-grid-drag-cell scope='col'"+io(i.headerAttributes),l&&!r[n].colSpan&&(k+=" rowspan='"+l+"'"),s>-1&&(k+=o.attr("index")+"='"+s+"'"),k+=">"+(a=i.headerTemplate?a:"")+"</th>"):i.command?(k+="<th scope='col'"+io(i.headerAttributes),l&&!r[n].colSpan&&(k+=" rowspan='"+l+"'"),s>-1&&(k+=o.attr("index")+"='"+s+"'"),k+=">"+(a&&"&nbsp;"!==a?o.template(Wt)({text:a}):a)+"</th>"):(i.field&&(c=o.attr("field")+"='"+i.field+"' "),k+="<th scope='col' "+c,h&&i.field&&!1!==i.menu?k+=" aria-haspopup='menu'":g&&!1!==i.filterable&&!i.command&&(k+=" aria-haspopup='dialog'"),l&&!r[n].colSpan&&(k+=" rowspan='"+l+"'"),r[n].colSpan>1?(k+='colspan="'+(r[n].colSpan-Vo(i.columns))+'" ',k+=o.attr("colspan")+"='"+r[n].colSpan+"'"):1===r[n].colSpan&&(k+=o.attr("colspan")+"='"+r[n].colSpan+"'"),d&&(d=d&&(u.options.encodeTitles?Lr(d,!0):d),k+=o.attr("title")+'="'+d+'" '),i.groupable!==t&&(k+=o.attr("groupable")+"='"+i.groupable+"' "),!xr(u,i)||i.headerAttributes&&i.headerAttributes.title||(k+="title='",k+=Tr(b,i.field)?f.ungroupHeader:f.groupHeader,k+="' "),i.aggregates&&i.aggregates.length&&(k+=o.attr("aggregates")+"='"+i.aggregates+"'"),s>-1&&(k+=o.attr("index")+"='"+s+"'"),k+=io(i.headerAttributes),k+=">"+(a=o.template(Wt)({text:a}))+"</th>"),u.options.resizable?p+=e(k).attr("data-resizable",(!1!==i.resizable).toString()).addClass("k-table-th")[0].outerHTML:p+=e(k).addClass("k-table-th")[0].outerHTML}return p},_appendLockedColumnContent:function(){var t,r,l,n,i,a=this.columns,s=this.table.find("colgroup"),d=s.find(z),c=e(),u=0,p=0;for(t=0,r=a.length;t<r;t++)if(a[t].locked)if(wo(a[t])){for(n=1,a[t].columns&&(n=rr(a[t].columns).length-Vo(a[t].columns)),n=n||1,i=0;i<n;i++)c=c.add(d.eq(t+p+i-u));p+=n-1}else u++;l=e('<div class="k-grid-content-locked"><table class="k-grid-table k-table"><colgroup></colgroup><tbody class="k-table-tbody"></tbody></table></div>'),s.detach(),l.find("colgroup").append(c),s.insertBefore(this.table.find("tbody")),this.lockedContent=l.insertBefore(this.content),this.lockedTable=l.children("table"),this.lockedTable.addClass(o.getValidCssClass("k-table-","size",this.options.size))},_appendLockedColumnFooter:function(){var t,r,l=this,n=l.footer,i=n.find(".k-footer-template>td"),a=n.find(".k-grid-footer-wrap>table>colgroup>col"),s=e('<div class="k-grid-footer-locked"><table class="k-grid-footer-table k-table"><colgroup></colgroup><tfoot class="k-table-tfoot"><tr class="k-footer-template k-table-row"></tr></tfoot></table></div>'),d=l._groups(),c=e(),u=e();for(s.find("table").addClass(o.getValidCssClass("k-table-","size",this.options.size)),c=c.add(i.filter(".k-group-cell")),t=0,r=rr(Ko(l.columns)).length;t<r;t++)c=c.add(i.eq(t+d));for(u=u.add(a.filter(".k-group-col")),t=0,r=yo(rr(Xo(l.columns))).length;t<r;t++)u=u.add(a.eq(t+d));c.appendTo(s.find(bt)),u.appendTo(s.find("colgroup")),l.lockedFooter=s.prependTo(n)},_appendLockedColumnHeader:function(t){var r,l,n,i,a,s,d,c,u,p=this,h=this.columns,g=[],f=0,m=e(),b=p._hasFilterRow(),_=0,k=e(),v=0,C=e();i=p.thead.prev().find(z),d=p.thead.find(bt).first().find(".k-header:not(.k-group-cell,.k-hierarchy-cell)"),c=p.thead.find(".k-filter-row").find("td:not(.k-group-cell,.k-hierarchy-cell)");var w=0;for(r=0,n=h.length;r<n;r++){if(h[r].locked){if(u=d.eq(r),v=rr(h[r].columns||[]).length,wo(h[r])){var y=null;h[r].columns&&(y=v-Vo(h[r].columns)),y=y||1;for(var S=0;S<y;S++)m=m.add(i.eq(r+w+S-f));w+=y-1}Wo([h[r]],sr(u),g,0,0),v=v||1;for(var x=0;x<v;x++)k=k.add(c.eq(_+x));_+=v}h[r].columns&&(f+=Vo(h[r].columns)),wo(h[r])||f++}if(g.length){for(l='<div class="k-grid-header-locked"><table class="k-grid-header-table k-table"><colgroup></colgroup><thead class="k-table-thead">',l+=new Array(g.length+1).join("<tr class='k-table-row'></tr>"),(s=e(l+=(b?'<tr class="k-filter-row k-table-row"></tr>':"")+"</thead></table></div>")).find(".k-grid-header-locked").css("width","1px"),s.find("table").addClass(o.getValidCssClass("k-table-","size",p.options.size)),(i=s.find("colgroup")).append(p.thead.prev().find("col.k-group-col").add(m)),a=s.find("thead tr:not(.k-filter-row)"),r=0,n=g.length;r<n;r++)C=To(g[r]),a.eq(r).append(p.thead.find(bt).eq(r).find(".k-group-cell").add(C));var T=Go(this.thead);return g.length<T&&function(e,t){for(var o,r=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),l=0;l<r.length;l++)(o=r[l].rowSpan)>1&&(r[l].rowSpan=o-t||1)}(s,T-g.length),s.find(".k-filter-row").append(p.thead.find(".k-filter-row .k-group-cell").add(k)),this.lockedHeader=s.prependTo(t),this.thead.find(".k-group-cell").remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);o.destroy(e),e.off(V).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,r,l=this,n=l.columns,i=l._hasDetails()&&n.length,a=l._hasFilterRow(),s="",d=l.table.find(">thead"),c=l.element.find("thead").first().length>0,u=l.options.messages.expandCollapseColumnHeader;if(d.length||(d=e("<thead/>").insertBefore(l.tbody)),d.addClass("k-table-thead"),l.lockedHeader&&l.thead?((r=l.thead.find("tr:has(th):not(.k-filter-row)").html("")).remove(),r=e(),l._removeLockedContainers()):r=c?l.element.find("thead").first().find("tr:has(th):not(.k-filter-row)"):l.element.find("tr:has(th)").first(),r.length){for(t=0;t<n.length;t++){let e=_(n[t],rr(n)),o=ir(r.parent()).filter("th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(e);o.addClass("k-table-th");const l=o[0],i=l?.childNodes||[];1===i.length&&3===i[0].nodeType&&o.html(Wt({text:Lr(o.text())})),n[t].hidden&&e>=0&&(l.style.display=It)}l._updateHeadersAttr(tr(n))}else if(!(r=d.children().first()).length){var p=[{rowSpan:1,cells:[],index:0}];for(l._prepareColumns(p,n),t=0;t<p.length;t++)s+="<tr class='k-table-row'>",i&&(s+='<th class="k-hierarchy-cell k-table-th" scope="col">'+u+"</th>"),s+=l._createHeaderCells(p[t].cells,p[t].rowSpan),s+="</tr>";r=e(s),o.applyStylesFromKendoAttributes(r,["display","left","right"])}if(a){var h=e("<tr/>");h.addClass("k-filter-row k-table-row"),(i||r.find(".k-hierarchy-cell").length)&&h.prepend('<td class="k-table-td k-hierarchy-cell">&nbsp;</td>');var g=(l.thead||d).find(".k-filter-row");g.length&&(o.destroy(g),g.remove()),d.append(h)}r.children().length?i&&!r.find(".k-hierarchy-cell")[0]&&r.prepend('<th class="k-hierarchy-cell k-table-th" scope="col">'+(u||"&nbsp;")+"</th>"):(s="",i&&(s+='<th class="k-hierarchy-cell k-table-th" scope="col">&nbsp;</th>'),s+=l._createHeaderCells(n),r.html(s));const f=r.find("th");var m;f.addClass(He),f.length>0&&d.attr(Rt,At),l.options.scrollable||d.addClass("k-grid-header"),r.find("script").remove().end().prependTo(d),l.thead&&l._destroyColumnAttachments(),l.thead=d,l._sortable(),l._filterable(),l._filterRow(),l._scrollable(),l._columnMenu();var b=this.options.scrollable&&Ko(this.columns).length;b&&(m=l._appendLockedColumnHeader(l.thead.closest(".k-grid-header")),l._appendLockedColumnContent(),l.lockedContent.on("DOMMouseScroll"+V+" mousewheel"+V,l._wheelScroll.bind(l)),o.support.touch&&(l._lockedContentUserEvents=new o.UserEvents(l.lockedContent,{move:function(e){l.content.scrollTop(l.content.scrollTop()+-e.y.delta),e.preventDefault()}})),l._updateLockedCols()),l._updateCols(),l._updateColumnCellIndex(),l._updateFirstColumnClass(),l._resizable(),l._draggable(),l._reorderable(),l._updateHeader(l._groups()),l._updateStickyColumns(),b&&(m&&l._syncLockedHeaderHeight(),l._applyLockedContainersWidth())},_retrieveFirstColumn:function(t,o){var r=e();if(o.length&&t[0]){for(var l=t[0];l.columns&&l.columns.length;)l=l.columns[0],o=o.filter(":not(:first)");r=r.add(o)}return r},_updateFirstColumnClass:function(){var t=this,o=t.columns||[];if(!(t._hasDetails()&&o.length)&&!t._groups()){var r=t.thead.find(">tr:not(.k-filter-row):not(:first)");o=Qo(o);var l=t._retrieveFirstColumn(o,r);t._isLocked()&&(r=t.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),o=Ko(t.columns),l=l.add(t._retrieveFirstColumn(o,r))),l.each((function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))}},_prepareColumns:function(e,t,o,r){for(var l=r||e[e.length-1],n=e[l.index+1],i=0,a=0;a<t.length;a++){var s={column:t[a],colSpan:0};l.cells.push(s),t[a].columns&&t[a].columns.length&&(n||(n={rowSpan:0,cells:[],index:e.length},e.push(n)),s.colSpan=t[a].columns.length,this._prepareColumns(e,t[a].columns,s,n),i+=s.colSpan-1,l.rowSpan=e.length-l.index)}o&&(o.colSpan+=i)},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.content;this.virtualScroll&&this.virtualScroll.rows&&(t=this.virtualScrollable.verticalScrollbar);var r=t.scrollTop(),l=o.wheelDeltaY(e);l&&(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&l<0||t[0].scrollTop>0&&l>0)&&e.preventDefault(),t.scrollTop(r+-l))}},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?pr(e,Zo(Jo(this.columns)),this._hasDetails(),0):pr(e,Zo(yo(this.columns)),this._hasDetails(),0)},_updateColumnSorters:function(){var e,t,o=this,r=ir(o.thead),l=rr(o.columns);if(o.options.sortable)for(var n=0,i=r.length;n<i;n++)!1!==(e=l[n]).sortable&&!e.command&&e.field&&(t=r.eq(n).data("kendoColumnSorter"))&&t.refresh()},_updateHeadersAttr:function(e){if(e.length){for(var t=0;t<e.length;t++){if(e[t].headerAttributes)this.element.find("[id='"+e[t].headerAttributes.id+"']").attr("headers",e[t].headerAttributes.headers)}this._updateHeadersAttr(tr(e))}},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&pr(e=e||this.lockedHeader.find("table").add(this.lockedTable),Zo(Xo(this.columns)),this._hasDetails(),this._groups())},_appendCols:function(e,t){t?pr(e,Zo(Jo(this.columns)),this._hasDetails(),0):pr(e,Zo(yo(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,r,l=this;for(t in e=e.toJSON(),r=!(l.table.find("tbody tr").length>0&&(!l.dataSource||!l.dataSource.transport)),e)l.columns.push({field:t,encoded:r,headerAttributes:{id:o.guid()}});l._thead(),l._templates()}},_setRowCachedHeight:function(t,o){var r,l=this._cachedRowsHeight[o];return l&&((r=e(t))[0].style.height=l+"px",t=r.prop("outerHTML")),t},_rowsHtml:function(e,t){var o,r,l,n=this,i="",a=t.rowTemplate,s=t.altRowTemplate,d=n._cachedRowsHeight;for(o=0,r=e.length;o<r;o++)n._skipRerenderItemsCount>0?n._skipRerenderItemsCount--:(l=o%2?s(e[o]):a(e[o]),d&&(l=n._setRowCachedHeight(l,e[o].uid)),i+=l),n._data.push(e[o]);return i},_groupData:function(e,t,o){var r=this._groupAggregatesDefaultObject||{},l=e.items,n=g({},r,e.aggregates),i=g({},{field:e.field,value:e.value,items:l,aggregates:n},e.aggregates[o?o.field:e.field]),a={};if(!t)for(var s in n)a[s]=g({},n[s],{group:{field:e.field,value:e.value,items:l}});return g({},a,i)},_removeGroupIfEmpty:function(e){for(var t,o,r=this.dataSource._group.length,l=0;l<r;l++)t=+(e=e.prev()).attr("data-group-item-count"),o=+e.attr("data-sub-group-count"),1!=t&&1!=o||e.hide()},_groupRowHtml:function(e,t,r,l,n,i,a,s){var d,c,u,p=this,h="",f=null!=p.lockedContent,b=e.field,k=m(rr(p.columns),(function(e){return e.field==b}))[0]||{},v=yo(p.columns)[0],C=v?v.groupHeaderColumnTemplate:null,w=k.groupHeaderTemplate?k.groupHeaderTemplate:C,y=(k.title&&(p.options.encodeTitles?Lr(k.title,!0):k.title)||Lr(b,!0))+": "+gr(e.value,k.format,k.values,k.encoded),S=e.currentItems||e.items,x=p._groups(),T=n.groupFooterTemplate,H=n.groupHeaderColumnTemplate,R=p.dataSource._isGroupPaged(),I=!R||p.dataSource._groupsState[e.uid];if(p.options.editable&&e.items&&e.items[0]&&e.items[0].isNew&&e.items[0].isNew()&&(I=!0),(n.groupFooterTemplate||n.groupHeaderColumnTemplate||k.groupHeaderTemplate)&&(u=p._groupData(e,!1,!(k.groupHeaderTemplate||!yo(p.columns)[0].groupHeaderColumnTemplate)&&yo(p.columns)[0])),w&&!i&&(y=typeof w===ot?w(u):o.template(w)(u)),p._skipRerenderItemsCount?l(t,r,y,I,e.uid,R):e.excludeHeader?e.excludeHeader=!!f&&!s:h+=function(e,t,o,r,l,n,i,a,s,d){var c;c=e?e(g({},l,{groupCells:n,colspan:r,text:i,expanded:a,isRtl:Nt,uid:s.uid})):t(o,n,i,a,s.uid,d,Nt);return c}(H,l,t,x-r,u,r,y,I,e,R),I)if(e.hasSubgroups)for(d=0,c=S.length;d<c;d++)h+=p._groupRowHtml(S[d],i?t:t-1,r+1,l,n,i,a&&d===S.length-1,s);else h+=p._rowsHtml(S,n);return T&&(a?_(e.value,p._skippedGroups)||p._skippedGroups.push(e.value):(p._skippedGroups.length&&p._skippedGroups[0]===e.value&&p._skippedGroups.shift(),p._skipRerenderItemsCount||(h+=T(u)))),h},collapseGroup:function(t){var r,l,n,i,a,s=this,d=t,c=this.options.groupable.showFooter?0:1,u=e();if(r=(t=e(t)).find(".k-group-cell").length,this.dataSource._isGroupPaged()){var p,h=t.attr("data-group-uid"),g=s.dataSource._getGroupByUid(h),f=s.dataSource._calculateGroupsTotal([g],!0);return s.dataSource._groupsState[h]=!1,p=s.dataSource._calculateGroupsTotal([g],!0),s.dataSource._serverGroupsTotal-=f-p,s._progress(!0),void s.dataSource.range(s.dataSource._currentRangeStart,s.dataSource.take(),(function(){s._progress(!1)}),"collapseGroup")}this._isLocked()&&(t.closest(_t).hasClass("k-grid-content-locked")?u=this.tbody.children(bt).eq(t.index()).nextAll(bt):(u=t.nextAll(bt),t=this.lockedTable.find(">tbody>tr").eq(t.index()))),t.find(L).length&&o.ui.icon(t.find(L),{icon:"caret-alt-"+(Nt?"left":"right")}),t.find("td[aria-expanded='true']").first().attr(xt,!1).find("a").attr(kt,gt);var m=[];for(n=0,i=(t=t.nextAll(bt)).length;n<i&&(l=(a=t.eq(n)).find(".k-group-cell").length,a.hasClass(ze)?c++:a.hasClass("k-group-footer")&&c--,!(l<=r||a.hasClass("k-group-footer")&&c<0));n++)u.length&&m.push(u[n]),m.push(a[0]);e(m).hide(),this.options.scrollable.endless&&this.content&&(clearTimeout(s._collapseGroupsTimeOut),s._collapseGroupsTimeOut=setTimeout((function(){s.content.scroll(),s._groupToCollapse=d})))},expandGroup:function(t){t=e(t);var r,l,n,i,a,s=this,d=s.options.groupable.showFooter,c=e(),u=[],p=1;if(r=t.find(".k-group-cell").length,this.dataSource._isGroupPaged()){var h,g=t.attr("data-group-uid"),f=s.dataSource._getGroupByUid(g),m=s.dataSource._calculateGroupsTotal([f],!0);return s.dataSource._groupsState[g]=!0,f.items&&f.items.length&&(h=s.dataSource._calculateGroupsTotal([f],!0),s.dataSource._serverGroupsTotal+=h-m),s._progress(!0),void s.dataSource.range(s.dataSource._currentRangeStart,s.dataSource.take(),(function(){s._progress(!1)}),"expandGroup")}for(this._isLocked()&&(t.closest(_t).hasClass("k-grid-content-locked")?c=this.tbody.children(bt).eq(t.index()).nextAll(bt):(c=t.nextAll(bt),t=this.lockedTable.find(">tbody>tr").eq(t.index()))),t.find(B).length&&o.ui.icon(t.find(B),{icon:"caret-alt-down"}),t.find("td[aria-expanded='false']").first().attr(xt,!0).find("a").attr(kt,ht),i=0,a=(t=t.nextAll(bt)).length;i<a&&!((n=(l=t.eq(i)).find(".k-group-cell").length)<=r);i++)if(n!=r+1||l.hasClass("k-detail-row")||(l.show(),c.eq(i).show(),l.hasClass(ze)&&l.find(".k-icon,.k-svg-icon").is(L)&&s.expandGroup(l),l.hasClass("k-master-row")&&l.find(".k-icon,.k-svg-icon").is(L)&&(l.next().show(),c.eq(i+1).show())),l.hasClass(ze)&&(d&&u.push(l.is(":visible")),p++),l.hasClass("k-group-footer")){if(d){var b=u.pop();l.toggle(b),c.eq(i).toggle(b)}1==p?(l.show(),c.eq(i).show()):p--}(0===r&&s.options.scrollable.endless&&this._isLocked()||!s.options.scrollable.endless&&this._isLocked())&&s._syncLockedContentHeight()},_updateHeader:function(t){var o=this,r=o._isLocked()?o.lockedHeader.find("thead"):o.thead,l=r.find("tr.k-filter-row").find("td.k-group-cell").length,n=r.find(bt).first().find("th.k-group-cell").length,i=r.children("tr:not(:first)").filter((function(){return!e(this).children(":visible").length}));t>n?(e(new Array(t-n+1).join('<th class="k-group-cell k-header k-table-th" scope="col">'+C(o.options.messages.expandCollapseColumnHeader)+"</th>")).prependTo(r.children("tr:not(.k-filter-row)")),o.element.is(":visible")&&i.find("th.k-group-cell").hide()):t<n&&r.find(bt).each((function(){e(this).find(".k-group-cell").eq(t).remove(),e(this).find(".k-group-cell").slice(t).remove()})),t>l&&e(new Array(t-l+1).join('<td class="k-group-cell k-table-group-td k-table-td">&nbsp;</td>')).prependTo(r.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,o=this;o._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",o.wrapper).add(o.thead.parent()).add(o.table),o._footerWidth=vr(t.eq(0)),t.width(o._footerWidth),(t=e(">.k-grid-footer>.k-grid-footer-locked>table",o.wrapper).add(o.lockedHeader.find(">table")).add(o.lockedTable)).width(vr(t.eq(0))))},hideColumn:function(t){var o,r,l,n,i,a,s,c,u,p=this,g=0,f=p.footer||p.wrapper.find(".k-grid-footer"),b=p.virtualScroll||{},k=p.columns,v=p.lockedHeader?ir(p.lockedHeader.find(">table>thead")).filter(Co).length:0;(Array.isArray(t)?t:[t]).forEach((t=>{if(u=m(rr(p.columns),(function(e){return e.groupHeaderColumnTemplate})),(t="number"==typeof t?k[t]:h(t)?m(Po(k),(function(e){return e===t}))[0]:m(Po(k),(function(e){return e.field===t}))[0])&&wo(t)){var C=p._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(i=Do(t,k),C(t,!1),fr(uo(e(">table>thead",p.lockedHeader),p.thead,">tr:eq("+i.row+")>th"),i.cell,!1),r=0;r<t.columns.length;r++)this.hideColumn(t.columns[r]);return p._ariaAddHiddenColIndex(),void p.trigger(X,{column:t})}c=_(t,yo(rr(k))),C(t,!1),p._setParentsVisibility(t,!1),p._templates(),p._updateCols(),p._updateLockedCols();var w=p.thead;if(a=c,p.lockedHeader&&v>c?w=p.lockedHeader.find(">table>thead"):a-=v,ir(w).filter(Co).eq(a)[0].style.display=It,fr(uo(e(">table>thead",p.lockedHeader),p.thead,">tr.k-filter-row>td"),c,!1),f[0]&&(p._updateCols(f.find(">.k-grid-footer-wrap>table")),p._updateLockedCols(f.find(">.k-grid-footer-locked>table")),fr(f.find(".k-footer-template>td"),c,!1)),b.columns&&!t.locked)return p._updateContentWidth(),void p.trigger(X,{column:t});if(p.lockedTable&&v>c?mr(p.lockedTable.find(">tbody>tr"),c):mr(p.tbody.children(),c-v),p.lockedTable)p._updateTablesWidth(),p._applyLockedContainersWidth(),p._syncLockedContentHeight(),p._syncLockedHeaderHeight(),p._syncLockedFooterHeight();else{for(l=p.thead.prev().find("col"),r=0,s=l.length;r<s;r+=1)if(n=l[r].style.width,l[r].className.indexOf("k-hierarchy-col")>-1)g+=d(l[r]);else if(l[r].className.indexOf("k-group-col")>-1)g+=d(l[r]);else{if(!n||-1!=n.indexOf("%")){g=0;break}g+=parseInt(n,10)}o=p.wrapper.find(">.k-grid-header table").first().add(p.wrapper.find(">.k-grid-footer table").first()).add(p.table),p._footerWidth=null,g&&(o.each((function(){this.style.width=g+mt})),p._footerWidth=g,p._setContentWidth())}p._updateFirstColumnClass(),p._updateStickyColumns(),u.length>0&&p._renderGroupRows(),p._ariaAddHiddenColIndex(),p.trigger(X,{column:t})}}))},_setParentsVisibility:function(t,r){var l,n,i,a,s,d=this.columns,c=[],u=this._columnVisibilitySetter(t),p=r?function(e){return yo(e.columns).length&&e.hidden}:function(e){return!yo(e.columns).length&&!e.hidden};if(fo(t,d,c)&&c.length)for(l=c.length-1;l>=0;l--)i=Mo(n=c[l],d),a=uo(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+i.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(i.cell),p(n)&&(u(n,r),a[0].style.display=r?"":It),a.filter("["+o.attr("colspan")+"]").length&&(s=parseInt(a.attr(o.attr("colspan")),10),a[0].colSpan=s-Vo(n.columns)||1)},_updateContentWidth:function(){var e=this;e.table.add(e.thead.parent()).css({width:qo(Zo(Jo(e.columns)))}),e.refresh()},showColumn:function(t){var o,r,l,n,i,a,s,c,u,p,g,f,b,k=this,v=k.columns,C=k.virtualScroll||{},w=k.footer||k.wrapper.find(".k-grid-footer"),y=k.lockedHeader?ir(k.lockedHeader.find(">table>thead")).length:0;(Array.isArray(t)?t:[t]).forEach((t=>{if(b=m(rr(k.columns),(function(e){return e.groupHeaderColumnTemplate})),"number"==typeof t?(p=t,t=v[t]):h(t)?e.each(Po(v),(function(e,o){if(o===t)return t=o,p=e,!1})):e.each(Po(v),(function(e,o){if(o.field===t)return t=o,p=e,!1})),t&&!wo(t)){var S=k._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(s=Mo(t,v),g=Po(k.options.columns)[p],S(t,!0),fr(uo(e(">table>thead",k.lockedHeader),k.thead,">tr:eq("+s.row+")>th"),s.cell,!0),o=0;o<t.columns.length;o++)g.columns[o].hidden||this.showColumn(t.columns[o]);return k._ariaRemoveHiddenColIndex(),void k.trigger(Z,{column:t})}f=_(t,rr(v)),S(t,!0),k._setParentsVisibility(t,!0),k._templates(),k._updateCols(),k._updateLockedCols();var x=k.thead;if(a=f,k.lockedHeader&&y>f?x=k.lockedHeader.find(">table>thead"):a-=y,(l=ir(x).eq(a))[0].style.display="",l[0].classList.remove("k-hidden"),fr(uo(e(">table>thead",k.lockedHeader),k.thead,">tr.k-filter-row>td"),f,!0),w[0]&&(k._updateCols(w.find(">.k-grid-footer-wrap>table")),k._updateLockedCols(w.find(">.k-grid-footer-locked>table")),fr(w.find(".k-footer-template>td"),f,!0)),C.columns&&!t.locked)return k._updateContentWidth(),void k.trigger(Z,{column:t});if(k.lockedTable&&y>f?_r(k.lockedTable.find(">tbody>tr"),f):_r(k.tbody.children(),f-y),k.lockedTable)k._updateTablesWidth(),k._applyLockedContainersWidth(),k._syncLockedContentHeight(),k._syncLockedHeaderHeight();else if(n=k.wrapper.find(">.k-grid-header table").first().add(k.wrapper.find(">.k-grid-footer table").first()).add(k.table),t.width){for(i=0,u=k.thead.prev().find("col"),o=0,r=u.length;o<r;o+=1)if(c=u[o].style.width,u[o].className.indexOf("k-hierarchy-col")>-1)i+=d(u[o]);else if(u[o].className.indexOf("k-group-col")>-1)i+=d(u[o]);else{if(c.indexOf("%")>-1){i=0;break}i+=parseInt(c,10)}k._footerWidth=null,i&&(n.each((function(){this.style.width=i+mt})),k._footerWidth=i,k._setContentWidth())}else n.width("");k._updateFirstColumnClass(),k._updateStickyColumns(),b.length>0&&k._renderGroupRows(),k._ariaRemoveHiddenColIndex(),k.trigger(Z,{column:t})}}))},_columnVisibilitySetter:function(e){return xo((e||{}).media)?mo:_o},_buildSkeleton:function(){var e,t=this.virtualCols?this.virtualCols:Zo(this.columns),o=this.dataSource.pageSize()||this.dataSource.total(),r="",l=this._groups(),n=t.length+l;this._hasDetails()&&n++,this._hasVirtualColumns()&&(e=parseInt(this.content.find(bt).first().find("td").first().attr("colspan"),10));for(var i=0;i<o;i++){r+="<tr class='k-table-row' data-skeleton-row>";for(var a=0;a<n;a++)r+=e&&!a?"<td colspan='"+e+"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>":"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>";r+="</tr>"}return r},_progress:function(e){var t,r=this.element,l=this.options.scrollable&&this.options.scrollable.endless,n=this.options.loaderType;if(this.options.scrollable&&this.options.scrollable.virtual?r=this.content:this._editContainer&&"popup"===this._editMode()?r=this._editContainer:this.lockedContent||l?r=this.wrapper:this.element.is("table")?r=this.element.parent():this.content&&this.content.length&&(r=this.content),"skeleton"!=n||this._isExport)this._isExport?this._loaderContainer(e,{message:this.options.messages.loader.exporting}):l&&e?o.ui.progress(r,e,{height:this.content.height(),top:this.content.parent()[0].offsetTop,opacity:!0}):o.ui.progress(r,e);else{const o=r.find("tbody");e?(t=this._buildSkeleton(),l&&(this._currentEndlessRows=o.children()),o.empty().append(t)):l?(r.find("[data-skeleton-row]").remove(),o.prepend(this._currentEndlessRows)):r.find(".k-skeleton").closest("tbody").empty()}},_resize:function(e,t){this._syncLockedContentHeight(),this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.lockedTable&&this._syncLockedScroll(),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar()),this.pager&&this.pager.element&&this.pager.resize(t),this._anyStickyColumns()&&this._updateStickyColumns(!1)},_isActiveInTable:function(){var t=a();return!!t&&(this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)))},refresh:function(r){var l,n,i,a=this,s=a.dataSource.view(),d=a.options.navigatable,c=a.virtualScroll||{},u=e(a.current()),p=!1,h=a._groups(),g=h+Zo(yo(a.columns)).length,f=m(a.columns,(function(e){return e.columns!==t})).length>0,b=0;if((!r||"itemchange"!==r.action||!a.editable&&!a.options.scrollable.endless||"popup"==this._editMode()&&("popup"!==this._editMode()||a._editableIsClosing))&&(a._shouldMapHights&&(a._mapCachedRowsHeight("get","uid"),a._shouldMapHights=!1),c.columns&&a._templates(),r&&"remove"===r.action&&a.editable&&a.editable.options.model&&_(a.editable.options.model,r.items)>-1&&a.editable.options.model.unbind(J,a._modelChangeHandler),r=r||{},!a.trigger("dataBinding",{action:r.action||"rebind",index:r.index,items:r.items}))){if(r.action===de&&a._isVirtualEditable()&&(a._destroyEditable(),a._clearEditableState()),!a._endlessFetchInProgress){const e=a._isAdaptive()?"kendoActionSheet":"kendoWindow";d&&(a._isActiveInTable()||a._editContainer&&a._editContainer.data(e))&&(l=(p=u.is("th"))?u.parent().children(":not(.k-group-cell)").index(u[0]):Math.max(a.cellIndex(u),0),p&&f&&(b=u.parent().index())),a._destroyEditable()}a.options.scrollable&&a.options.scrollable.endless&&!a._pdfInitialized?(clearTimeout(a._progressTimeOut),a._progressTimeOut=setTimeout((function(){a._endlessFetchInProgress||a._progress(!1)}),250)):a._isExport||a._progress(!1),u.length&&(a._currentRowIndex=u.parent().index()),a._hideResizeHandle(),a._data=[],a.columns.length||(a._autoColumns(a._firstDataItem(s[0],h)),g=h+a.columns.length),a._group=h>0||a._group,a._group&&(a._templates(),a._updateCols(),a._updateLockedCols(),a._virtualColScroll||a._updateHeader(h),a._group=h>0,a._groupRows=br(s)),a.content&&(n=o.scrollLeft(a.content)),"skeleton"!==a.options.loaderType&&r&&"sync"===r.action&&r.partialUpdate&&r.changedItems&&r.changedItems.length?(a._data=a.dataSource.flatView(),r.changedItems.forEach((e=>{const t=a.tbody.find("["+o.attr("uid")+"="+e.uid+"]");a._editMode()===st&&a.dataSource.options.autoSync&&a.dataSource.isLocalTransport()&&a.trigger(Q,{type:"save",model:r.changedItems[0],container:t.find(".k-edit-cell")}),a._displayRow(t),a._groupRows&&a._groupRows.length&&a._rerenderGroupFooterTemplate(e)})),a._progress(!1),a._destroyEditable()):(i=a._skipRerenderItemsCount,a._renderContent(s,g,h),a.options.scrollable&&a.options.scrollable.endless&&this.lockedContent&&(a._skipRerenderItemsCount=i),a._renderLockedContent(s,g,h)),a._virtualColScroll||(a._footer(),a._renderNoRecordsContent(),a._togglePagerVisibility(),a._setContentHeight(),a._setContentWidth(a.content&&n)),a.lockedTable&&(c.rows?a.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):a.touchScroller?a.touchScroller.movable.trigger("change"):(a.wrapper.one("scroll",(function(e){e.stopPropagation()})),a.content.trigger("scroll"))),a._endlessFetchInProgress||a._rowDropping||a._restoreCurrent(l,p,b),a.touchScroller&&a.touchScroller.contentResized(),a.selectable&&a.selectable.resetTouchEvents(),a._checkBoxSelection&&a._toggleHeaderCheckState(!1),a.options.persistSelection&&(a.selectable&&!o.ui.Selectable.parseOptions(a.options.selectable).cell||a._checkBoxSelection)&&(a.items().length||a.dataSource._isGroupPaged())&&a._restoreSelection(),a.options.persistSelection||(a._selectedIds={}),a._hasReorderableRows()&&(a._draggableRows(),a._reorderableRows()),a.options.selectable&&a.options.selectable.cellAggregates&&a._calculateAggregatesForSelected(),a._aria(),a.trigger(te)}},_getSchemaIdField:function(){const e=this.dataSource.options.schema.model;return v(e)?e.fn.idField:e&&e.id},_restoreCurrent:function(o,r,l){if(!(o===t||o<0)){if(this._removeCurrent(),r)this._setCurrent(this.thead.find(`tr:eq(${l}) th:not(.k-group-cell)`).eq(o),!1,this._hasVirtualColumns());else{var n=0,i=this.virtualScroll||{};this._rowVirtualIndex?n=i.rows?this.virtualScrollable.position(this._rowVirtualIndex):this._rowVirtualIndex:this._currentRowIndex?n=this._currentRowIndex:o=0;var a,s=e();let t;this.lockedTable&&(s=this._shouldFocusInLastRow?this.lockedTable.find(">tbody>tr").last():this._shouldFocusInFirstRow?this.lockedTable.find(">tbody>tr").first():this.lockedTable.find(">tbody>tr").eq(n)),t=this._shouldFocusInLastRow?this.tbody.children().last():this._shouldFocusInFirstRow?this.tbody.children().first():this.tbody.children().eq(n),s=s.add(t),this._hasVirtualColumns()&&(a=parseInt(s.find("td").first().attr("colspan"),10),o=this._virtualCellIndex-(a>1?a-1:0));var d=s.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(o);if(!d.length||o<0)return;this._hasVirtualColumns()?this._setCurrent(d,!0,!0):this._setCurrent(d)}this._current&&Sr(this.table,!0)}},_restoreSelection:function(){var e,t=this,o=t.items(),r=t._getSchemaIdField();e=m(o,(function(e){var o=t.dataItem(e)[r];if(t._selectedIds[o])return e})),t.select(e)},_getSelectedRowUids:function(){var t,r,l=this.select(),n=[];for(let i=0;i<l.length;i++)t=e(l[i]),o.ui.Selectable.parseOptions(this.options.selectable).cell&&(t=t.closest(bt)),r=t.data("uid"),-1===n.indexOf(r)&&n.push(r);return n},_getSelectedColumnFields:function(){var t,r,l=this,n=l.select(),i=Zo(l.columns).filter((e=>!e.selectable&&!e.draggable&!e.command)),a=[];if(!o.ui.Selectable.parseOptions(l.options.selectable).cell)return i.map((e=>e.field));for(let o=0;o<n.length;o++)r=e(n[o]).index(),t=l.thead.find("th:eq("+r+")").data("field"),-1===a.indexOf(t)&&a.push(t);return a},_cleanupDetailItems:function(){this._hasDetails()&&this.tbody.find(".k-detail-cell").empty()},_renderContent:function(e,t,r){var l,n,i,a,s,d=this,c="",u=null!=d.lockedContent,p=d.options.scrollable,h={rowTemplate:d.rowTemplate,altRowTemplate:d.altRowTemplate,groupFooterTemplate:d.groupFooterTemplate,groupHeaderColumnTemplate:d.groupHeaderColumnTemplate};if(p&&p.endless&&!d.dataSource.options.endless&&(d._skipRerenderItemsCount=0,d.content&&(d.content[0].scrollTop=0)),i=d._skipRerenderItemsCount>0,t=u?t-Zo(Xo(d.columns)).length:t,r>0)for(t=u?t-r:t,d.detailTemplate&&t++,d.groupFooterTemplate&&(d._groupAggregatesDefaultObject=d.dataSource.aggregates()),d.options.scrollable.endless&&(s=d.dataSource.flatView().length),l=0,n=e.length;l<n;l++)d._skippedGroups||(d._skippedGroups=[]),a=s&&l===e.length-1&&s!==d.dataSource.total(),c+=d._groupRowHtml(e[l],t,0,u?Dr:zr,h,u,a,!1);else c+=d._rowsHtml(e,h);i?(d.tbody.append(c),o.applyStylesFromKendoAttributes(d.tbody,["display","left","right"]),clearTimeout(d._endlessFetchTimeOut),d._endlessFetchTimeOut=setTimeout((function(){d._groupToCollapse&&(d.collapseGroup(d._groupToCollapse),d._groupToCollapse=null)})),d._endlessFetchInProgress=null):d.tbody=dr(d.tbody,d.table,c,this.options.size)},_renderGroupRows:function(){var t,r,l,n,i,a,s,d,c,u,p,h,f,b,_,k,v,C=this,w=C._groupRows,y=C.wrapper.find(x+ze),S=C._groups(),T=null!=C.lockedContent;y.each((function(y,x){b=e(x),u=b.closest("table").parent(),p=u.is(".k-grid-content-locked"),r=Zo(yo(p?Ko(C.columns):Qo(C.columns))),_=b.find(".k-group-cell").length,T?(t=p?zr:Dr,l=p?r.length+S-_:r.length):(t=zr,l=r.length+S-_),n=y>=w.length?w[y-w.length]:w[y],i=n.field,a=m(rr(C.columns),(function(e){return e.field==i}))[0]||{},v=!(a.groupHeaderTemplate||!yo(C.columns)[0].groupHeaderColumnTemplate)&&yo(C.columns)[0],s=a.groupHeaderTemplate?a.groupHeaderTemplate:yo(C.columns)[0].groupHeaderColumnTemplate,d=(a.title&&(C.options.encodeTitles?Lr(a.title,!0):a.title)||Lr(i,!0))+": "+gr(n.value,a.format,a.values,a.encoded),c=C._groupData(n,!1,v),k=p?C.lockedGroupHeaderColumnTemplate:C.groupHeaderColumnTemplate,s&&(d=typeof s===ot?s(c):o.template(s)(c)),h=b.prev().length?b.prev():b.parent(),f=e(k?k(g({},c,{groupCells:_,colspan:S-_,text:d})):t(l,_,d,null,null,null,Nt)),o.applyStylesFromKendoAttributes(f,["display","left","right"]),h.is("tbody")?h.prepend(f):h.after(f),b.remove()}))},_renderLockedContent:function(e,t,o){var r,l,n,i,a="",s=null,d={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};if(this.lockedContent){var c=this.lockedTable;if(s=this._skipRerenderItemsCount>0,o>0)for(t-=yo(rr(Qo(this.columns))).length,this.options.scrollable.endless&&(i=this.dataSource.flatView().length),r=0,l=e.length;r<l;r++)n=i&&r===e.length-1&&i!==this.dataSource.total(),a+=this._groupRowHtml(e[r],t,0,zr,d,!1,n,!0);else a=this._rowsHtml(e,d);s?c.children("tbody").append(a):dr(c.children("tbody"),c,a,this.options.size),this._syncLockedContentHeight()}},_togglePagerVisibility:function(){!1===this.options.pageable.alwaysVisible&&this.wrapper.find(".k-grid-pager").toggle(this.dataSource.total()>=this.dataSource.pageSize())},_adjustRowsHeight:function(e,t){var o,r=e[0].rows,l=r.length,n=t[0].rows,i=e.add(t),a=i.length,s=[];for(o=0;o<l&&n[o];o++)r[o].style.height&&(r[o].style.height=n[o].style.height="");for(o=0;o<l&&n[o];o++){var d=r[o].getBoundingClientRect().height,c=n[o].getBoundingClientRect().height,u=0;d>c?u=d:d<c&&(u=c),s.push(u)}for(o=0;o<a;o++)i[o].style.display=It;for(o=0;o<l;o++)s[o]&&(r[o].style.height=n[o].style.height=s[o]+mt);for(o=0;o<a;o++)i[o].style.display=""}});function wr(e,t){var o,r=e.offsetHeight,l=t.offsetHeight;r>l?o=r+mt:r<l&&(o=l+mt),o&&(e.style.height=t.style.height=o)}function yr(e,t){var o,r,l;if(typeof e===rt&&e===t)return e;if(h(e)&&e.name===t)return e;if(b(e))for(o=0,r=e.length;o<r;o++)if(typeof(l=e[o])===rt&&l===t||l.name===t)return l;return null}function Sr(t,r){if(t&&0!==t.length)if(!0===r){t=e(t);var l=o.scrollLeft(t.parent());o.focusElement(t),o.scrollLeft(t.parent(),l)}else e(t).one("focusin",(function(e){e.preventDefault()})).trigger("focus")}function xr(e,o){return e.options.groupable&&(o.groupable||o.groupable===t)}function Tr(t,o){return!!e.grep(t,(function(e){return e.field===o})).length}function Hr(e,t){return!(!e.field||e.selectable)&&(!(t.editable&&!t.editable(e.field))&&!(e.editable&&!e.editable(t)))}function Rr(t){return e(t).is(":button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-svg-icon>svg,span.k-svg-icon>svg>path,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on")}function Ir(t){var r=this,l=e(t.currentTarget),n=l.is("th"),i=this.table.add(this.lockedTable),a=this.thead.parent().add(e(">table",this.lockedHeader)),s=Rr(t.target),d=e(t.target).is(".k-checkbox"),c=e(t.target),u=l.closest("table")[0];s&&l.find(o.roleSelector("filtercell")).length?this._setCurrent(l,null,null,!0):u!==i[0]&&u!==i[1]&&u!==a[0]&&u!==a[1]||c.is(B+","+L)||(this.options.navigatable&&this._focusFocusable(l,l,!1,d,t),!n&&s||setTimeout((function(){var t=e(o._activeElement());(t.hasClass("k-widget")||t.hasClass("k-dropdownlist")||t.is(".k-upload .k-upload-button"))&&!t.hasClass("k-grid-pager")||t.hasClass("k-select-checkbox")||!r.table||!t.is(ve)&&Rr(o._activeElement())&&e.contains(u,o._activeElement())||Sr(r.table[0],!0)})),n&&!o.support.touch&&t.preventDefault())}function Er(e,t){if(!t)return 0;var r=0;return o.support.browser.webkit&&(r=e.width()),r}function Ar(t,o){var r,l;return!!t&&!!((o=e(o))[0]&&y(t[0],o[0])&&(r=o.offset().top-t.offset().top,l=o.outerHeight()/2,(r>=0||S.abs(r)<=l)&&S.floor(r+l)<=t.height()))}function Mr(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row"))}function Fr(t){return({colspan:r,text:l,expanded:n,isRtl:i})=>{let a="caret-alt-"+(i?"left":"right");return`<td class="k-table-td" colspan="${r+t}"><p class="k-reset">`+o.ui.icon(e(`<a href="\\#" tabindex="-1" ${kt}="${n?ht:gt}"></a>`),{icon:n?"caret-alt-down":a})+l+`</p></td>${new Array(r+t).join("<td hidden group-header-spanned-hidden></td>")}`}}function zr(t,r,l,n,i,a,s){return"<tr "+(a?'data-group-uid="'+i+'"':"")+'class="k-table-group-row k-grouping-row k-table-row">'+no(r)+'<td class="k-table-td" colspan="'+t+'" aria-expanded="'+!!n+'"><p class="k-reset">'+o.ui.icon(e('<a href="#" tabindex="-1" '+kt+'="'+(n?ht:gt)+'"></a>'),{icon:n?"caret-alt-down":"caret-alt-"+(s?"left":"right")})+l+`</p></td>${new Array(t).join("<td hidden group-header-spanned-hidden></td>")}</tr>`}function Dr(e){return'<tr class="k-table-group-row k-grouping-row k-table-row"><td class="k-table-td" colspan="'+e+'" aria-expanded="true">'+`<p class="k-reset">&nbsp;</p></td>${new Array(e).join("<td hidden group-header-spanned-hidden></td>")}</tr>`}function Lr(e,t){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,(function(e){return t?"\\"+e:"&quot;"})).replace(/'/g,"&#39;")}function Br(e,t){return this.dataSource.indexOf(this.dataSource.getByUid(e.uid))-this.dataSource.indexOf(this.dataSource.getByUid(t.uid))}function Pr(e){return!(!1===e.exportable||e.exportable&&!1===e.exportable.excel)}o.ExcelMixin&&o.ExcelMixin.extend(Cr.prototype),o.PDFMixin&&(o.PDFMixin.extend(Cr.prototype),Cr.prototype._drawPDF_autoPageBreak=function(r){var l,n=this,i=new e.Deferred,a=n.dataSource,s=n.options.pdf.allPages,d=n.wrapper.find("> table > tbody, .k-grid-content > table > tbody").first(),c=e("<div>").css({position:"absolute",left:-1e4,top:-1e4});n.toggleUnexportableColumns(n.columns),(l=n.wrapper.clone().css({height:et,width:et}).appendTo(c)).find(".k-grid-content").css({height:et,width:et,overflow:"visible"}),l.find("> table, .k-grid-header table, .k-grid-content > table, .k-grid-footer table").css({height:et,width:"100%",overflow:"visible"}),l.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove(),l.find(".k-grid-header, .k-grid-footer, .k-auto-scrollable").css({paddingRight:0});var u=l.find("> table > tbody, .k-grid-content > table > tbody").first().empty(),p=a.page();function h(){c.appendTo(document.body);var t=e.extend({},n.options.pdf,{_destructive:!0,progress:function(e){r.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});o.drawing.drawDOM(l,t).always((function(){c.remove()})).then((function(e){i.resolve(e),n.toggleUnexportableColumns(n.columns,!0)})).fail((function(e){i.reject(e)}))}function g(){var e=a.page(),o=s?a.totalPages():1;u.append(d.children("tr:not(.k-detail-row)")),e<o?a.page(e+1):(a.unbind("change",g),s&&p!==t?(a.one("change",h),a.page(p)):(n.refresh(),h()))}return s?(a.bind("change",g),a.page(1)):g(),i.promise()},Cr.prototype.toggleUnexportableColumns=function(e,t){for(var o,r,l,n,i=e.length,a=0;a<i;a++)r=(o=e[a]).exportable,t?o._toggledDuringExport?(o._toggledDuringExport=!1,o.hidden?this.showColumn(o):this.hideColumn(o)):o.columns&&this.toggleUnexportableColumns(o.columns,t):("object"==typeof o.exportable&&(r=o.exportable.pdf),l=!o.hidden&&!1!==r,n=o.hidden&&!0===r,(r=l||n)||o.hidden?r&&o.hidden?(o._toggledDuringExport=!0,this.showColumn(o)):r&&o.columns&&this.toggleUnexportableColumns(o.columns):(o._toggledDuringExport=!0,this.hideColumn(o)))},Cr.prototype._drawPDF=function(r){var l=this;if(l.options.pdf.paperSize&&l.options.pdf.paperSize!=et)return l._drawPDF_autoPageBreak(r);var n=new e.Deferred,i=l.dataSource,a=l.options.pdf.allPages,s=new o.drawing.Group,d=i.page();function c(){l.toggleUnexportableColumns(l.columns),l._drawPDFShadow({width:l.wrapper.width()},{avoidLinks:l.options.pdf.avoidLinks}).done((function(e){var o=i.page(),u=a?i.totalPages():1,p={page:e,pageNumber:o,progress:o/u,totalPages:u};l.toggleUnexportableColumns(l.columns,!0),r.notify(p),s.append(p.page),o<u?i.page(o+1):a&&d!==t?(i.unbind("change",c),i.one("change",(function(){n.resolve(s)})),i.page(d)):n.resolve(s)})).fail((function(e){n.reject(e)}))}return a?(i.bind("change",c),i.page(1)):c(),n.promise()}),r.plugin(Cr),r.plugin(ro),g(o.ui.grid,{defaultBodyContextMenu:Xt,defaultHeadContextMenu:Zt,defaultGroupsContextMenu:eo})}(window.kendo.jQuery);var E=kendo;e.__meta__={id:"grid",name:"Grid",category:"web",description:"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.",depends:["data","columnsorter","sortable","toolbar","html.button","icons","menu","loader","html.loadercontainer","badge","loaderContainer.chunk"],features:[{id:"grid-editing",name:"Editing",description:"Support for record editing",depends:["editable","window","textbox","form"]},{id:"grid-filtering",name:"Filtering",description:"Support for record filtering",depends:["filtermenu"]},{id:"grid-columnmenu",name:"Column menu",description:"Support for header column menu",depends:["columnmenu"]},{id:"grid-grouping",name:"Grouping",description:"Support for grid grouping",depends:["groupable"]},{id:"grid-filtercell",name:"Row filter",description:"Support for grid header filtering",depends:["filtercell"]},{id:"grid-paging",name:"Paging",description:"Support for grid paging",depends:["pager"]},{id:"grid-selection",name:"Selection",description:"Support for row selection",depends:["selectable"]},{id:"grid-column-reorder",name:"Column reordering",description:"Support for column reordering",depends:["reorderable"]},{id:"grid-column-resize",name:"Column resizing",description:"Support for column resizing",depends:["resizable"]},{id:"grid-mobile",name:"Grid adaptive rendering",description:"Support for adaptive rendering",depends:["dialog","pane","switch"]},{id:"grid-excel-export",name:"Excel export",description:"Export grid data as Excel spreadsheet",depends:["excel"]},{id:"grid-pdf-export",name:"PDF export",description:"Export grid data as PDF",depends:["pdf","drawing"]}]},e.default=E,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=kendo.grid.min.js.map
